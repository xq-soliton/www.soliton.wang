<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title></title>
      <link href="/2018/11/08/ceshi/"/>
      <url>/2018/11/08/ceshi/</url>
      
        <content type="html"><![CDATA[<h1 id="—————————————————————"><a href="#—————————————————————" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Theme-Core-Configuration-Settings"><a href="#Theme-Core-Configuration-Settings" class="headerlink" title="Theme Core Configuration Settings"></a>Theme Core Configuration Settings</h1><h1 id="—————————————————————-1"><a href="#—————————————————————-1" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="If-false-merge-configs-from-data-next-yml-into-default-configuration-rewrite"><a href="#If-false-merge-configs-from-data-next-yml-into-default-configuration-rewrite" class="headerlink" title="If false, merge configs from _data/next.yml into default configuration (rewrite)."></a>If false, merge configs from <code>_data/next.yml</code> into default configuration (rewrite).</h1><h1 id="If-true-will-fully-override-default-configuration-by-options-from-data-next-yml-override-Only-for-NexT-settings"><a href="#If-true-will-fully-override-default-configuration-by-options-from-data-next-yml-override-Only-for-NexT-settings" class="headerlink" title="If true, will fully override default configuration by options from _data/next.yml (override). Only for NexT settings."></a>If true, will fully override default configuration by options from <code>_data/next.yml</code> (override). Only for NexT settings.</h1><h1 id="And-if-true-all-config-from-default-NexT-config-yml-must-be-copied-into-next-yml-Use-if-you-know-what-you-are-doing"><a href="#And-if-true-all-config-from-default-NexT-config-yml-must-be-copied-into-next-yml-Use-if-you-know-what-you-are-doing" class="headerlink" title="And if true, all config from default NexT _config.yml must be copied into next.yml. Use if you know what you are doing."></a>And if true, all config from default NexT <code>_config.yml</code> must be copied into <code>next.yml</code>. Use if you know what you are doing.</h1><h1 id="Useful-if-you-want-to-comment-some-options-from-NexT-config-yml-by-next-yml-without-editing-default-config"><a href="#Useful-if-you-want-to-comment-some-options-from-NexT-config-yml-by-next-yml-without-editing-default-config" class="headerlink" title="Useful if you want to comment some options from NexT _config.yml by next.yml without editing default config."></a>Useful if you want to comment some options from NexT <code>_config.yml</code> by <code>next.yml</code> without editing default config.</h1><p>override: false</p><h1 id="Allow-to-cache-content-generation-Introduced-in-NexT-v6-0-0"><a href="#Allow-to-cache-content-generation-Introduced-in-NexT-v6-0-0" class="headerlink" title="Allow to cache content generation. Introduced in NexT v6.0.0."></a>Allow to cache content generation. Introduced in NexT v6.0.0.</h1><p>cache:<br>  enable: true</p><h1 id="Redefine-custom-file-paths-Introduced-in-NexT-v6-0-2"><a href="#Redefine-custom-file-paths-Introduced-in-NexT-v6-0-2" class="headerlink" title="Redefine custom file paths. Introduced in NexT v6.0.2."></a>Redefine custom file paths. Introduced in NexT v6.0.2.</h1><h1 id="If-commented-will-be-used-default-custom-file-paths"><a href="#If-commented-will-be-used-default-custom-file-paths" class="headerlink" title="If commented, will be used default custom file paths."></a>If commented, will be used default custom file paths.</h1><h1 id="For-example-you-want-to-put-your-custom-styles-file"><a href="#For-example-you-want-to-put-your-custom-styles-file" class="headerlink" title="For example, you want to put your custom styles file"></a>For example, you want to put your custom styles file</h1><h1 id="outside-theme-directory-in-root-source-data-set"><a href="#outside-theme-directory-in-root-source-data-set" class="headerlink" title="outside theme directory in root source/_data, set"></a>outside theme directory in root <code>source/_data</code>, set</h1><h1 id="styles-source-data-styles-styl"><a href="#styles-source-data-styles-styl" class="headerlink" title="styles: source/_data/styles.styl"></a><code>styles: source/_data/styles.styl</code></h1><p>#custom_file_path:</p><h1 id="Default-paths-layout-custom"><a href="#Default-paths-layout-custom" class="headerlink" title="Default paths: layout/_custom/*"></a>Default paths: layout/_custom/*</h1><p>  #head: source/_data/head.swig</p><p>  #header: source/_data/header.swig</p><p>  #sidebar: source/_data/sidebar.swig</p><h1 id="Default-path-source-css-variables-custom-styl"><a href="#Default-path-source-css-variables-custom-styl" class="headerlink" title="Default path: source/css/_variables/custom.styl"></a>Default path: source/css/_variables/custom.styl</h1><p>  #variables: source/_data/variables.styl</p><h1 id="Default-path-source-css-mixins-custom-styl"><a href="#Default-path-source-css-mixins-custom-styl" class="headerlink" title="Default path: source/css/_mixins/custom.styl"></a>Default path: source/css/_mixins/custom.styl</h1><p>  #mixins: source/_data/mixins.styl</p><h1 id="Default-path-source-css-custom-custom-styl"><a href="#Default-path-source-css-custom-custom-styl" class="headerlink" title="Default path: source/css/_custom/custom.styl"></a>Default path: source/css/_custom/custom.styl</h1><p>  #styles: source/_data/styles.styl</p><h1 id="—————————————————————-2"><a href="#—————————————————————-2" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Site-Information-Settings"><a href="#Site-Information-Settings" class="headerlink" title="Site Information Settings"></a>Site Information Settings</h1><h1 id="—————————————————————-3"><a href="#—————————————————————-3" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="To-get-or-check-favicons-visit-https-realfavicongenerator-net"><a href="#To-get-or-check-favicons-visit-https-realfavicongenerator-net" class="headerlink" title="To get or check favicons visit: https://realfavicongenerator.net"></a>To get or check favicons visit: <a href="https://realfavicongenerator.net" target="_blank" rel="noopener">https://realfavicongenerator.net</a></h1><h1 id="Put-your-favicons-into-hexo-site-source-recommend-or-hexo-site-themes-next-source-images-directory"><a href="#Put-your-favicons-into-hexo-site-source-recommend-or-hexo-site-themes-next-source-images-directory" class="headerlink" title="Put your favicons into hexo-site/source/ (recommend) or hexo-site/themes/next/source/images/ directory."></a>Put your favicons into <code>hexo-site/source/</code> (recommend) or <code>hexo-site/themes/next/source/images/</code> directory.</h1><h1 id="Default-NexT-favicons-placed-in-hexo-site-themes-next-source-images-directory"><a href="#Default-NexT-favicons-placed-in-hexo-site-themes-next-source-images-directory" class="headerlink" title="Default NexT favicons placed in hexo-site/themes/next/source/images/ directory."></a>Default NexT favicons placed in <code>hexo-site/themes/next/source/images/</code> directory.</h1><h1 id="And-if-you-want-to-place-your-icons-in-hexo-site-source-root-directory-you-must-remove-images-prefix-from-pathes"><a href="#And-if-you-want-to-place-your-icons-in-hexo-site-source-root-directory-you-must-remove-images-prefix-from-pathes" class="headerlink" title="And if you want to place your icons in hexo-site/source/ root directory, you must remove /images prefix from pathes."></a>And if you want to place your icons in <code>hexo-site/source/</code> root directory, you must remove <code>/images</code> prefix from pathes.</h1><h1 id="For-example-you-put-your-favicons-into-hexo-site-source-images-directory"><a href="#For-example-you-put-your-favicons-into-hexo-site-source-images-directory" class="headerlink" title="For example, you put your favicons into hexo-site/source/images directory."></a>For example, you put your favicons into <code>hexo-site/source/images</code> directory.</h1><h1 id="Then-need-to-rename-amp-redefine-they-on-any-other-names-otherwise-icons-from-Next-will-rewrite-your-custom-icons-in-Hexo"><a href="#Then-need-to-rename-amp-redefine-they-on-any-other-names-otherwise-icons-from-Next-will-rewrite-your-custom-icons-in-Hexo" class="headerlink" title="Then need to rename &amp; redefine they on any other names, otherwise icons from Next will rewrite your custom icons in Hexo."></a>Then need to rename &amp; redefine they on any other names, otherwise icons from Next will rewrite your custom icons in Hexo.</h1><p>favicon:<br>  small: /images/ico.png<br>  medium: /images/ico.png<br>  apple_touch_icon: /images/ico.png</p><p>  #safari_pinned_tab: /images/logo.svg</p><p>  #android_manifest: /images/manifest.json</p><p>  #ms_browserconfig: /images/browserconfig.xml</p><h1 id="Set-rss-to-false-to-disable-feed-link"><a href="#Set-rss-to-false-to-disable-feed-link" class="headerlink" title="Set rss to false to disable feed link."></a>Set rss to false to disable feed link.</h1><h1 id="Leave-rss-as-empty-to-use-site’s-feed-link-and-install-hexo-generator-feed-npm-install-hexo-generator-feed-save"><a href="#Leave-rss-as-empty-to-use-site’s-feed-link-and-install-hexo-generator-feed-npm-install-hexo-generator-feed-save" class="headerlink" title="Leave rss as empty to use site’s feed link, and install hexo-generator-feed: npm install hexo-generator-feed --save."></a>Leave rss as empty to use site’s feed link, and install hexo-generator-feed: <code>npm install hexo-generator-feed --save</code>.</h1><h1 id="Set-rss-to-specific-value-if-you-have-burned-your-feed-already"><a href="#Set-rss-to-specific-value-if-you-have-burned-your-feed-already" class="headerlink" title="Set rss to specific value if you have burned your feed already."></a>Set rss to specific value if you have burned your feed already.</h1><p>rss:</p><p>footer:</p><h1 id="Specify-the-date-when-the-site-was-setup"><a href="#Specify-the-date-when-the-site-was-setup" class="headerlink" title="Specify the date when the site was setup."></a>Specify the date when the site was setup.</h1><h1 id="If-not-defined-current-year-will-be-used"><a href="#If-not-defined-current-year-will-be-used" class="headerlink" title="If not defined, current year will be used."></a>If not defined, current year will be used.</h1><p>  #since: 2015</p><h1 id="Icon-between-year-and-copyright-info"><a href="#Icon-between-year-and-copyright-info" class="headerlink" title="Icon between year and copyright info."></a>Icon between year and copyright info.</h1><p>  icon:</p><pre><code># Icon name in fontawesome, see: https://fontawesome.com/v4.7.0/icons# `heart` is recommended with animation in red (#ff0000).name: user# If you want to animate the icon, set it to true.animated: false# Change the color of icon, using Hex Code.color: &quot;#808080&quot;</code></pre><h1 id="If-not-defined-will-be-used-author-from-Hexo-main-config"><a href="#If-not-defined-will-be-used-author-from-Hexo-main-config" class="headerlink" title="If not defined, will be used author from Hexo main config."></a>If not defined, will be used <code>author</code> from Hexo main config.</h1><p>  copyright: </p><h1 id="————————————————————"><a href="#————————————————————" class="headerlink" title="————————————————————-"></a>————————————————————-</h1><p>  powered:</p><pre><code># Hexo link (Powered by Hexo).enable: true# Version info of Hexo after Hexo link (vX.X.X).version: false</code></pre><p>  theme:</p><pre><code># Theme &amp; scheme info link (Theme - NexT.scheme).enable: true# Version info of NexT after scheme info (vX.X.X).version: false</code></pre><h1 id="————————————————————-1"><a href="#————————————————————-1" class="headerlink" title="————————————————————-"></a>————————————————————-</h1><h1 id="Any-custom-text-can-be-defined-here"><a href="#Any-custom-text-can-be-defined-here" class="headerlink" title="Any custom text can be defined here."></a>Any custom text can be defined here.</h1><p>  #custom_text: Hosted by <a target="_blank" rel="external nofollow" href="https://pages.coding.me"><b>Coding Pages</b></a></p><h1 id="—————————————————————-4"><a href="#—————————————————————-4" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="SEO-Settings"><a href="#SEO-Settings" class="headerlink" title="SEO Settings"></a>SEO Settings</h1><h1 id="—————————————————————-5"><a href="#—————————————————————-5" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Canonical-set-a-canonical-link-tag-in-your-hexo-you-could-use-it-for-your-SEO-of-blog"><a href="#Canonical-set-a-canonical-link-tag-in-your-hexo-you-could-use-it-for-your-SEO-of-blog" class="headerlink" title="Canonical, set a canonical link tag in your hexo, you could use it for your SEO of blog."></a>Canonical, set a canonical link tag in your hexo, you could use it for your SEO of blog.</h1><h1 id="See-https-support-google-com-webmasters-answer-139066"><a href="#See-https-support-google-com-webmasters-answer-139066" class="headerlink" title="See: https://support.google.com/webmasters/answer/139066"></a>See: <a href="https://support.google.com/webmasters/answer/139066" target="_blank" rel="noopener">https://support.google.com/webmasters/answer/139066</a></h1><h1 id="Tips-Before-you-open-this-tag-remember-set-up-your-URL-in-hexo-config-yml-ex-url-http-yourdomain-com"><a href="#Tips-Before-you-open-this-tag-remember-set-up-your-URL-in-hexo-config-yml-ex-url-http-yourdomain-com" class="headerlink" title="Tips: Before you open this tag, remember set up your URL in hexo _config.yml ( ex. url: http://yourdomain.com )"></a>Tips: Before you open this tag, remember set up your URL in hexo _config.yml ( ex. url: <a href="http://yourdomain.com" target="_blank" rel="noopener">http://yourdomain.com</a> )</h1><p>canonical: true</p><h1 id="Change-headers-hierarchy-on-site-subtitle-will-be-main-site-description-and-on-all-post-pages-titles-for-better-SEO-optimization"><a href="#Change-headers-hierarchy-on-site-subtitle-will-be-main-site-description-and-on-all-post-pages-titles-for-better-SEO-optimization" class="headerlink" title="Change headers hierarchy on site-subtitle (will be main site description) and on all post/pages titles for better SEO-optimization."></a>Change headers hierarchy on site-subtitle (will be main site description) and on all post/pages titles for better SEO-optimization.</h1><p>seo: true</p><h1 id="If-true-will-add-site-subtitle-to-index-page-added-in-main-hexo-config"><a href="#If-true-will-add-site-subtitle-to-index-page-added-in-main-hexo-config" class="headerlink" title="If true, will add site-subtitle to index page, added in main hexo config."></a>If true, will add site-subtitle to index page, added in main hexo config.</h1><h1 id="subtitle-Subtitle"><a href="#subtitle-Subtitle" class="headerlink" title="subtitle: Subtitle"></a>subtitle: Subtitle</h1><p>index_with_subtitle: false</p><h1 id="—————————————————————-6"><a href="#—————————————————————-6" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Menu-Settings"><a href="#Menu-Settings" class="headerlink" title="Menu Settings"></a>Menu Settings</h1><h1 id="—————————————————————-7"><a href="#—————————————————————-7" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="When-running-the-site-in-a-subdirectory-e-g-domain-tld-blog-remove-the-leading-slash-from-link-value-archives-gt-archives"><a href="#When-running-the-site-in-a-subdirectory-e-g-domain-tld-blog-remove-the-leading-slash-from-link-value-archives-gt-archives" class="headerlink" title="When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash from link value (/archives -&gt; archives)."></a>When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash from link value (/archives -&gt; archives).</h1><h1 id="Usage-Key-link-icon"><a href="#Usage-Key-link-icon" class="headerlink" title="Usage: Key: /link/ || icon"></a>Usage: <code>Key: /link/ || icon</code></h1><h1 id="Key-is-the-name-of-menu-item-If-translate-for-this-menu-will-find-in-languages-this-translate-will-be-loaded-if-not-Key-name-will-be-used-Key-is-case-senstive"><a href="#Key-is-the-name-of-menu-item-If-translate-for-this-menu-will-find-in-languages-this-translate-will-be-loaded-if-not-Key-name-will-be-used-Key-is-case-senstive" class="headerlink" title="Key is the name of menu item. If translate for this menu will find in languages - this translate will be loaded; if not - Key name will be used. Key is case-senstive."></a>Key is the name of menu item. If translate for this menu will find in languages - this translate will be loaded; if not - Key name will be used. Key is case-senstive.</h1><h1 id="Value-before-delimeter-is-the-target-link"><a href="#Value-before-delimeter-is-the-target-link" class="headerlink" title="Value before || delimeter is the target link."></a>Value before <code>||</code> delimeter is the target link.</h1><h1 id="Value-after-delimeter-is-the-name-of-FontAwesome-icon-If-icon-with-or-without-delimeter-is-not-specified-question-icon-will-be-loaded"><a href="#Value-after-delimeter-is-the-name-of-FontAwesome-icon-If-icon-with-or-without-delimeter-is-not-specified-question-icon-will-be-loaded" class="headerlink" title="Value after || delimeter is the name of FontAwesome icon. If icon (with or without delimeter) is not specified, question icon will be loaded."></a>Value after <code>||</code> delimeter is the name of FontAwesome icon. If icon (with or without delimeter) is not specified, question icon will be loaded.</h1><p>menu:<br>  home: / || home</p><p>  #about: /about/ || user<br>  tags: /tags/  || tags<br>  categories: /categories/ || th<br>  archives: /archives/ || archive</p><p>  #schedule: /schedule/ || calendar<br>  sitemap: /sitemap.xml || sitemap<br>  docekr: /docker/ || download<br>  book: /book/ || book</p><p>  #commonweal: /404/ || heartbeat<br>  photo: /photo || photo</p><h1 id="Enable-Disable-menu-icons-item-badges"><a href="#Enable-Disable-menu-icons-item-badges" class="headerlink" title="Enable/Disable menu icons / item badges."></a>Enable/Disable menu icons / item badges.</h1><p>menu_settings:<br>  icons: true<br>  badges: true</p><h1 id="—————————————————————-8"><a href="#—————————————————————-8" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Scheme-Settings"><a href="#Scheme-Settings" class="headerlink" title="Scheme Settings"></a>Scheme Settings</h1><h1 id="—————————————————————-9"><a href="#—————————————————————-9" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Schemes"><a href="#Schemes" class="headerlink" title="Schemes"></a>Schemes</h1><p>#scheme: Muse</p><p>#scheme: Mist</p><p>#scheme: Pisces<br>scheme: Gemini</p><h1 id="—————————————————————-10"><a href="#—————————————————————-10" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Sidebar-Settings"><a href="#Sidebar-Settings" class="headerlink" title="Sidebar Settings"></a>Sidebar Settings</h1><h1 id="—————————————————————-11"><a href="#—————————————————————-11" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Posts-Categories-Tags-in-sidebar"><a href="#Posts-Categories-Tags-in-sidebar" class="headerlink" title="Posts / Categories / Tags in sidebar."></a>Posts / Categories / Tags in sidebar.</h1><p>site_state: true</p><h1 id="Social-Links"><a href="#Social-Links" class="headerlink" title="Social Links."></a>Social Links.</h1><h1 id="Usage-Key-permalink-icon"><a href="#Usage-Key-permalink-icon" class="headerlink" title="Usage: Key: permalink || icon"></a>Usage: <code>Key: permalink || icon</code></h1><h1 id="Key-is-the-link-label-showing-to-end-users"><a href="#Key-is-the-link-label-showing-to-end-users" class="headerlink" title="Key is the link label showing to end users."></a>Key is the link label showing to end users.</h1><h1 id="Value-before-delimeter-is-the-target-permalink"><a href="#Value-before-delimeter-is-the-target-permalink" class="headerlink" title="Value before || delimeter is the target permalink."></a>Value before <code>||</code> delimeter is the target permalink.</h1><h1 id="Value-after-delimeter-is-the-name-of-FontAwesome-icon-If-icon-with-or-without-delimeter-is-not-specified-globe-icon-will-be-loaded"><a href="#Value-after-delimeter-is-the-name-of-FontAwesome-icon-If-icon-with-or-without-delimeter-is-not-specified-globe-icon-will-be-loaded" class="headerlink" title="Value after || delimeter is the name of FontAwesome icon. If icon (with or without delimeter) is not specified, globe icon will be loaded."></a>Value after <code>||</code> delimeter is the name of FontAwesome icon. If icon (with or without delimeter) is not specified, globe icon will be loaded.</h1><p>social:<br>  GitHub: <a href="https://xq-soliton.github.io/" target="_blank" rel="noopener">https://xq-soliton.github.io/</a> || github<br>  E-Mail: mailto:<a href="mailto:Linux_Wangxinqiu@163.com" target="_blank" rel="noopener">Linux_Wangxinqiu@163.com</a> || envelope<br>  Google: mailto:<a href="mailto:soliton.wang@gmail.com" target="_blank" rel="noopener">soliton.wang@gmail.com</a> || google<br>  QQ: <a href="http://sighttp.qq.com/msgrd?v=1&amp;uin=1670829014" target="_blank" rel="noopener">http://sighttp.qq.com/msgrd?v=1&amp;uin=1670829014</a> || qq</p><p>  #知乎: <a href="https://www.zhihu.com/people/soliton.wang/activities" target="_blank" rel="noopener">https://www.zhihu.com/people/soliton.wang/activities</a> || zhihu</p><p>  #Twitter: <a href="https://twitter.com/yourname" target="_blank" rel="noopener">https://twitter.com/yourname</a> || twitter</p><p>  #FB Page: <a href="https://www.facebook.com/yourname" target="_blank" rel="noopener">https://www.facebook.com/yourname</a> || facebook</p><p>  #VK Group: <a href="https://vk.com/yourname" target="_blank" rel="noopener">https://vk.com/yourname</a> || vk</p><p>  #StackOverflow: <a href="https://stackoverflow.com/yourname" target="_blank" rel="noopener">https://stackoverflow.com/yourname</a> || stack-overflow</p><p>  #YouTube: <a href="https://youtube.com/yourname" target="_blank" rel="noopener">https://youtube.com/yourname</a> || youtube</p><p>  #Instagram: <a href="https://instagram.com/yourname" target="_blank" rel="noopener">https://instagram.com/yourname</a> || instagram</p><p>  #Skype: skype:yourname?call|chat || skype</p><p>social_icons:<br>  enable: true</p><p>  zhihu: 知乎<br>  QQ: QQ</p><p>  icons_only: false<br>  transition: false</p><h1 id="Dependencies-exturl-true-in-Tags-Settings-section-below"><a href="#Dependencies-exturl-true-in-Tags-Settings-section-below" class="headerlink" title="Dependencies: exturl: true in Tags Settings section below."></a>Dependencies: exturl: true in Tags Settings section below.</h1><h1 id="To-encrypt-links-above-use-https-www-base64encode-org"><a href="#To-encrypt-links-above-use-https-www-base64encode-org" class="headerlink" title="To encrypt links above use https://www.base64encode.org"></a>To encrypt links above use <a href="https://www.base64encode.org" target="_blank" rel="noopener">https://www.base64encode.org</a></h1><h1 id="Example-encoded-link-GitHub-aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQ-github"><a href="#Example-encoded-link-GitHub-aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQ-github" class="headerlink" title="Example encoded link: GitHub: aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQ= || github"></a>Example encoded link: <code>GitHub: aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQ= || github</code></h1><p>  exturl: false</p><h1 id="Follow-me-on-GitHub-banner-in-right-top-corner"><a href="#Follow-me-on-GitHub-banner-in-right-top-corner" class="headerlink" title="Follow me on GitHub banner in right-top corner."></a>Follow me on GitHub banner in right-top corner.</h1><h1 id="Usage-permalink-title"><a href="#Usage-permalink-title" class="headerlink" title="Usage: permalink || title"></a>Usage: <code>permalink || title</code></h1><h1 id="Value-before-delimeter-is-the-target-permalink-1"><a href="#Value-before-delimeter-is-the-target-permalink-1" class="headerlink" title="Value before || delimeter is the target permalink."></a>Value before <code>||</code> delimeter is the target permalink.</h1><h1 id="Value-after-delimeter-is-the-title-and-aria-label-name"><a href="#Value-after-delimeter-is-the-title-and-aria-label-name" class="headerlink" title="Value after || delimeter is the title and aria-label name."></a>Value after <code>||</code> delimeter is the title and aria-label name.</h1><p>#github_banner: <a href="https://github.com/yourname" target="_blank" rel="noopener">https://github.com/yourname</a> || Follow me on GitHub</p><h1 id="Blog-rolls"><a href="#Blog-rolls" class="headerlink" title="Blog rolls"></a>Blog rolls</h1><p>links_icon: link<br>links_title: Links</p><p>#links_layout: block<br>links_layout: inline</p><p>#links:</p><p>  #Title: <a href="http://example.com/" target="_blank" rel="noopener">http://example.com/</a></p><h1 id="Sidebar-Avatar"><a href="#Sidebar-Avatar" class="headerlink" title="Sidebar Avatar"></a>Sidebar Avatar</h1><p>avatar:</p><h1 id="in-theme-directory-source-images-images-avatar-gif"><a href="#in-theme-directory-source-images-images-avatar-gif" class="headerlink" title="in theme directory(source/images): /images/avatar.gif"></a>in theme directory(source/images): /images/avatar.gif</h1><h1 id="in-site-directory-source-uploads-uploads-avatar-gif"><a href="#in-site-directory-source-uploads-uploads-avatar-gif" class="headerlink" title="in site  directory(source/uploads): /uploads/avatar.gif"></a>in site  directory(source/uploads): /uploads/avatar.gif</h1><h1 id="You-can-also-use-other-linking-images"><a href="#You-can-also-use-other-linking-images" class="headerlink" title="You can also use other linking images."></a>You can also use other linking images.</h1><p>  url: /images/logo.jpg</p><h1 id="If-true-the-avatar-would-be-dispalyed-in-circle"><a href="#If-true-the-avatar-would-be-dispalyed-in-circle" class="headerlink" title="If true, the avatar would be dispalyed in circle."></a>If true, the avatar would be dispalyed in circle.</h1><p>  rounded: true</p><h1 id="The-value-of-opacity-should-be-choose-from-0-to-1-to-set-the-opacity-of-the-avatar"><a href="#The-value-of-opacity-should-be-choose-from-0-to-1-to-set-the-opacity-of-the-avatar" class="headerlink" title="The value of opacity should be choose from 0 to 1 to set the opacity of the avatar."></a>The value of opacity should be choose from 0 to 1 to set the opacity of the avatar.</h1><p>  opacity: 1</p><h1 id="If-true-the-avatar-would-be-rotated-with-the-cursor"><a href="#If-true-the-avatar-would-be-rotated-with-the-cursor" class="headerlink" title="If true, the avatar would be rotated with the cursor."></a>If true, the avatar would be rotated with the cursor.</h1><p>  rotated: false</p><h1 id="Table-Of-Contents-in-the-Sidebar"><a href="#Table-Of-Contents-in-the-Sidebar" class="headerlink" title="Table Of Contents in the Sidebar"></a>Table Of Contents in the Sidebar</h1><p>toc:<br>  enable: true</p><h1 id="Automatically-add-list-number-to-toc"><a href="#Automatically-add-list-number-to-toc" class="headerlink" title="Automatically add list number to toc."></a>Automatically add list number to toc.</h1><p>  number: true</p><h1 id="If-true-all-words-will-placed-on-next-lines-if-header-width-longer-then-sidebar-width"><a href="#If-true-all-words-will-placed-on-next-lines-if-header-width-longer-then-sidebar-width" class="headerlink" title="If true, all words will placed on next lines if header width longer then sidebar width."></a>If true, all words will placed on next lines if header width longer then sidebar width.</h1><p>  wrap: false</p><h1 id="Creative-Commons-4-0-International-License"><a href="#Creative-Commons-4-0-International-License" class="headerlink" title="Creative Commons 4.0 International License."></a>Creative Commons 4.0 International License.</h1><h1 id="http-creativecommons-org"><a href="#http-creativecommons-org" class="headerlink" title="http://creativecommons.org/"></a><a href="http://creativecommons.org/" target="_blank" rel="noopener">http://creativecommons.org/</a></h1><h1 id="Available-by-by-nc-by-nc-nd-by-nc-sa-by-nd-by-sa-zero"><a href="#Available-by-by-nc-by-nc-nd-by-nc-sa-by-nd-by-sa-zero" class="headerlink" title="Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero"></a>Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</h1><p>#creative_commons: by-nc-sa</p><p>#creative_commons:</p><p>sidebar:</p><h1 id="Sidebar-Position-available-value-left-right-only-for-Pisces-Gemini"><a href="#Sidebar-Position-available-value-left-right-only-for-Pisces-Gemini" class="headerlink" title="Sidebar Position, available value: left | right (only for Pisces | Gemini)."></a>Sidebar Position, available value: left | right (only for Pisces | Gemini).</h1><p>  #position: left<br>  position: right</p><h1 id="Manual-define-the-sidebar-width"><a href="#Manual-define-the-sidebar-width" class="headerlink" title="Manual define the sidebar width."></a>Manual define the sidebar width.</h1><h1 id="If-commented-will-be-default-for"><a href="#If-commented-will-be-default-for" class="headerlink" title="If commented, will be default for:"></a>If commented, will be default for:</h1><h1 id="Muse-Mist-320"><a href="#Muse-Mist-320" class="headerlink" title="Muse | Mist: 320"></a>Muse | Mist: 320</h1><h1 id="Pisces-Gemini-240"><a href="#Pisces-Gemini-240" class="headerlink" title="Pisces | Gemini: 240"></a>Pisces | Gemini: 240</h1><p>  #width: 300</p><h1 id="Sidebar-Display-available-value-only-for-Muse-Mist"><a href="#Sidebar-Display-available-value-only-for-Muse-Mist" class="headerlink" title="Sidebar Display, available value (only for Muse | Mist):"></a>Sidebar Display, available value (only for Muse | Mist):</h1><h1 id="post-expand-on-posts-automatically-Default"><a href="#post-expand-on-posts-automatically-Default" class="headerlink" title="- post    expand on posts automatically. Default."></a>- post    expand on posts automatically. Default.</h1><h1 id="always-expand-for-all-pages-automatically"><a href="#always-expand-for-all-pages-automatically" class="headerlink" title="- always  expand for all pages automatically"></a>- always  expand for all pages automatically</h1><h1 id="hide-expand-only-when-click-on-the-sidebar-toggle-icon"><a href="#hide-expand-only-when-click-on-the-sidebar-toggle-icon" class="headerlink" title="- hide    expand only when click on the sidebar toggle icon."></a>- hide    expand only when click on the sidebar toggle icon.</h1><h1 id="remove-Totally-remove-sidebar-including-sidebar-toggle"><a href="#remove-Totally-remove-sidebar-including-sidebar-toggle" class="headerlink" title="- remove  Totally remove sidebar including sidebar toggle."></a>- remove  Totally remove sidebar including sidebar toggle.</h1><p>  display: post</p><p>  #display: always</p><p>  #display: hide</p><p>  #display: remove</p><h1 id="Sidebar-offset-from-top-menubar-in-pixels-only-for-Pisces-Gemini"><a href="#Sidebar-offset-from-top-menubar-in-pixels-only-for-Pisces-Gemini" class="headerlink" title="Sidebar offset from top menubar in pixels (only for Pisces | Gemini)."></a>Sidebar offset from top menubar in pixels (only for Pisces | Gemini).</h1><p>  offset: 12</p><h1 id="Back-to-top-in-sidebar-only-for-Pisces-Gemini"><a href="#Back-to-top-in-sidebar-only-for-Pisces-Gemini" class="headerlink" title="Back to top in sidebar (only for Pisces | Gemini)."></a>Back to top in sidebar (only for Pisces | Gemini).</h1><p>  b2t: false</p><h1 id="Scroll-percent-label-in-b2t-button"><a href="#Scroll-percent-label-in-b2t-button" class="headerlink" title="Scroll percent label in b2t button."></a>Scroll percent label in b2t button.</h1><p>  scrollpercent: true</p><h1 id="Enable-sidebar-on-narrow-view-only-for-Muse-Mist"><a href="#Enable-sidebar-on-narrow-view-only-for-Muse-Mist" class="headerlink" title="Enable sidebar on narrow view (only for Muse | Mist)."></a>Enable sidebar on narrow view (only for Muse | Mist).</h1><p>  onmobile: false</p><h1 id="—————————————————————-12"><a href="#—————————————————————-12" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Post-Settings"><a href="#Post-Settings" class="headerlink" title="Post Settings"></a>Post Settings</h1><h1 id="—————————————————————-13"><a href="#—————————————————————-13" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Automatically-scroll-page-to-section-which-is-under-mark"><a href="#Automatically-scroll-page-to-section-which-is-under-mark" class="headerlink" title="Automatically scroll page to section which is under  mark."></a>Automatically scroll page to section which is under <a id="more"></a> mark.</h1><p>scroll_to_more: true</p><h1 id="Automatically-saving-scroll-position-on-each-post-page-in-cookies"><a href="#Automatically-saving-scroll-position-on-each-post-page-in-cookies" class="headerlink" title="Automatically saving scroll position on each post/page in cookies."></a>Automatically saving scroll position on each post/page in cookies.</h1><p>save_scroll: false</p><h1 id="Automatically-excerpt-description-in-homepage-as-preamble-text"><a href="#Automatically-excerpt-description-in-homepage-as-preamble-text" class="headerlink" title="Automatically excerpt description in homepage as preamble text."></a>Automatically excerpt description in homepage as preamble text.</h1><p>excerpt_description: true</p><h1 id="Automatically-Excerpt-Not-recommend"><a href="#Automatically-Excerpt-Not-recommend" class="headerlink" title="Automatically Excerpt. Not recommend."></a>Automatically Excerpt. Not recommend.</h1><h1 id="Please-use-in-the-post-to-control-excerpt-accurately"><a href="#Please-use-in-the-post-to-control-excerpt-accurately" class="headerlink" title="Please use  in the post to control excerpt accurately."></a>Please use <!-- more --> in the post to control excerpt accurately.</h1><p>auto_excerpt:<br>  enable: false<br>  length: 150</p><h1 id="Post-meta-display-settings"><a href="#Post-meta-display-settings" class="headerlink" title="Post meta display settings"></a>Post meta display settings</h1><p>post_meta:<br>  item_text: true</p><p>  #wordcount: true               #单篇 字数统计</p><p>  #min2read: true          # 单篇 阅读时长</p><p>  #totalcount: true</p><p>  #separated_meta: true<br>  created_at: true<br>  updated_at:<br>    enabled: true</p><pre><code># If true, show updated date label only if `updated date` different from &apos;created date&apos; (post edited in another day than was created).# And if post will edited in same day as created, edited time will show in popup title under created time label.# If false show anyway, but if post edited in same day, show only edited time.another_day: true</code></pre><p>  categories: true</p><h1 id="Post-wordcount-display-settings"><a href="#Post-wordcount-display-settings" class="headerlink" title="Post wordcount display settings"></a>Post wordcount display settings</h1><h1 id="Dependencies-https-github-com-theme-next-hexo-symbols-count-time"><a href="#Dependencies-https-github-com-theme-next-hexo-symbols-count-time" class="headerlink" title="Dependencies: https://github.com/theme-next/hexo-symbols-count-time"></a>Dependencies: <a href="https://github.com/theme-next/hexo-symbols-count-time" target="_blank" rel="noopener">https://github.com/theme-next/hexo-symbols-count-time</a></h1><p>symbols_count_time:<br>  separated_meta: true<br>  item_text_post: true<br>  item_text_total: false<br>  awl: 4<br>  wpm: 275</p><h1 id="Post-wordcount-display-settings-1"><a href="#Post-wordcount-display-settings-1" class="headerlink" title="Post wordcount display settings"></a>Post wordcount display settings</h1><h1 id="Dependencies-https-github-com-willin-hexo-wordcount"><a href="#Dependencies-https-github-com-willin-hexo-wordcount" class="headerlink" title="# Dependencies: https://github.com/willin/hexo-wordcount"></a># Dependencies: <a href="https://github.com/willin/hexo-wordcount" target="_blank" rel="noopener">https://github.com/willin/hexo-wordcount</a></h1><h1 id="文章字数展示设置"><a href="#文章字数展示设置" class="headerlink" title="# 文章字数展示设置"></a># 文章字数展示设置</h1><p>post_wordcount: </p><p>  #文本显示<br>  item_text: true</p><h1 id="文章字数统计"><a href="#文章字数统计" class="headerlink" title="文章字数统计"></a>文章字数统计</h1><p>  wordcount: true</p><h1 id="阅读时长"><a href="#阅读时长" class="headerlink" title="阅读时长"></a>阅读时长</h1><p>  min2read: true</p><h1 id="站点总字数统计"><a href="#站点总字数统计" class="headerlink" title="站点总字数统计"></a>站点总字数统计</h1><p>  totalcount: true</p><h1 id="该post-wordcount的所有设置另起一行显示"><a href="#该post-wordcount的所有设置另起一行显示" class="headerlink" title="该post_wordcount的所有设置另起一行显示"></a>该post_wordcount的所有设置另起一行显示</h1><p>separated_meta: true</p><p>codeblock:</p><h1 id="Manual-define-the-border-radius-in-codeblock"><a href="#Manual-define-the-border-radius-in-codeblock" class="headerlink" title="Manual define the border radius in codeblock"></a>Manual define the border radius in codeblock</h1><h1 id="Leave-it-empty-for-the-default-1"><a href="#Leave-it-empty-for-the-default-1" class="headerlink" title="Leave it empty for the default 1"></a>Leave it empty for the default 1</h1><p>  border_radius:</p><h1 id="Add-copy-button-on-codeblock"><a href="#Add-copy-button-on-codeblock" class="headerlink" title="Add copy button on codeblock"></a>Add copy button on codeblock</h1><p>  copy_button:<br>    enable: true</p><pre><code># Show text copy resultshow_result: true</code></pre><h1 id="Wechat-Subscriber"><a href="#Wechat-Subscriber" class="headerlink" title="Wechat Subscriber"></a>Wechat Subscriber</h1><p>#wechat_subscriber:</p><p>  #enabled: true</p><p>  #qcode: /path/to/your/wechatqcode ex. /uploads/wechat-qcode.jpg</p><p>  #description: ex. subscribe to my blog by scanning my public wechat account</p><h1 id="Reward"><a href="#Reward" class="headerlink" title="Reward"></a>Reward</h1><p>#reward_comment: Donate comment here</p><p>#wechatpay: /images/wechatpay.jpg</p><p>#alipay: /images/alipay.jpg</p><p>#bitcoin: /images/bitcoin.png</p><h1 id="Related-popular-posts"><a href="#Related-popular-posts" class="headerlink" title="Related popular posts"></a>Related popular posts</h1><h1 id="Dependencies-https-github-com-tea3-hexo-related-popular-posts"><a href="#Dependencies-https-github-com-tea3-hexo-related-popular-posts" class="headerlink" title="Dependencies: https://github.com/tea3/hexo-related-popular-posts"></a>Dependencies: <a href="https://github.com/tea3/hexo-related-popular-posts" target="_blank" rel="noopener">https://github.com/tea3/hexo-related-popular-posts</a></h1><p>related_posts:<br>  enable: false<br>  title: # custom header, leave empty to use the default one<br>  display_in_home: false<br>  params:<br>    maxCount: 5</p><pre><code>#PPMixingRate: 0.0#isDate: false#isImage: false#isExcerpt: false</code></pre><h1 id="Declare-license-on-posts"><a href="#Declare-license-on-posts" class="headerlink" title="Declare license on posts"></a>Declare license on posts</h1><p>post_copyright:<br>  enable: true<br>  license: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a></p><h1 id="Post-edit"><a href="#Post-edit" class="headerlink" title="Post edit"></a>Post edit</h1><h1 id="Dependencies-https-github-com-hexojs-hexo-deployer-git"><a href="#Dependencies-https-github-com-hexojs-hexo-deployer-git" class="headerlink" title="Dependencies: https://github.com/hexojs/hexo-deployer-git"></a>Dependencies: <a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="noopener">https://github.com/hexojs/hexo-deployer-git</a></h1><p>post_edit:<br>  enable: false<br>  url: <a href="https://github.com/theme-next/theme-next.org/_posts/tree/master/" target="_blank" rel="noopener">https://github.com/theme-next/theme-next.org/_posts/tree/master/</a> # Link for view source.</p><h1 id="url-https-github-com-theme-next-theme-next-org-posts-edit-master-Link-for-fork-amp-edit"><a href="#url-https-github-com-theme-next-theme-next-org-posts-edit-master-Link-for-fork-amp-edit" class="headerlink" title="url: https://github.com/theme-next/theme-next.org/_posts/edit/master/ # Link for fork &amp; edit."></a>url: <a href="https://github.com/theme-next/theme-next.org/_posts/edit/master/" target="_blank" rel="noopener">https://github.com/theme-next/theme-next.org/_posts/edit/master/</a> # Link for fork &amp; edit.</h1><h1 id="—————————————————————-14"><a href="#—————————————————————-14" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Misc-Theme-Settings"><a href="#Misc-Theme-Settings" class="headerlink" title="Misc Theme Settings"></a>Misc Theme Settings</h1><h1 id="—————————————————————-15"><a href="#—————————————————————-15" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Reduce-padding-margin-indents-on-devices-with-narrow-width"><a href="#Reduce-padding-margin-indents-on-devices-with-narrow-width" class="headerlink" title="Reduce padding / margin indents on devices with narrow width."></a>Reduce padding / margin indents on devices with narrow width.</h1><p>mobile_layout_economy: false</p><h1 id="Android-Chrome-header-panel-color-brand-bg-headband-bg-gt-black-deep"><a href="#Android-Chrome-header-panel-color-brand-bg-headband-bg-gt-black-deep" class="headerlink" title="Android Chrome header panel color ($brand-bg / $headband-bg =&gt; $black-deep)."></a>Android Chrome header panel color ($brand-bg / $headband-bg =&gt; $black-deep).</h1><p>android_chrome_color: “#222”</p><h1 id="Custom-Logo"><a href="#Custom-Logo" class="headerlink" title="Custom Logo."></a>Custom Logo.</h1><h1 id="Only-available-for-Default-Scheme-currently"><a href="#Only-available-for-Default-Scheme-currently" class="headerlink" title="!!Only available for Default Scheme currently."></a>!!Only available for Default Scheme currently.</h1><h1 id="Options"><a href="#Options" class="headerlink" title="Options:"></a>Options:</h1><h1 id="enabled-true-false-Replace-with-specific-image"><a href="#enabled-true-false-Replace-with-specific-image" class="headerlink" title="enabled: [true/false] - Replace with specific image"></a>enabled: [true/false] - Replace with specific image</h1><h1 id="image-url-of-image-Images’s-url"><a href="#image-url-of-image-Images’s-url" class="headerlink" title="image: url-of-image   - Images’s url"></a>image: url-of-image   - Images’s url</h1><p>custom_logo:<br>  enabled: false<br>  image:</p><h1 id="Code-Highlight-theme"><a href="#Code-Highlight-theme" class="headerlink" title="Code Highlight theme"></a>Code Highlight theme</h1><h1 id="Available-values-normal-night-night-eighties-night-blue-night-bright"><a href="#Available-values-normal-night-night-eighties-night-blue-night-bright" class="headerlink" title="Available values: normal | night | night eighties | night blue | night bright"></a>Available values: normal | night | night eighties | night blue | night bright</h1><h1 id="https-github-com-chriskempson-tomorrow-theme"><a href="#https-github-com-chriskempson-tomorrow-theme" class="headerlink" title="https://github.com/chriskempson/tomorrow-theme"></a><a href="https://github.com/chriskempson/tomorrow-theme" target="_blank" rel="noopener">https://github.com/chriskempson/tomorrow-theme</a></h1><p>highlight_theme: normal</p><h1 id="Enable-“cheers”-for-archive-page"><a href="#Enable-“cheers”-for-archive-page" class="headerlink" title="Enable “cheers” for archive page."></a>Enable “cheers” for archive page.</h1><p>cheers_enabled: true</p><h1 id="—————————————————————-16"><a href="#—————————————————————-16" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Font-Settings"><a href="#Font-Settings" class="headerlink" title="Font Settings"></a>Font Settings</h1><h1 id="Find-fonts-on-Google-Fonts-https-www-google-com-fonts"><a href="#Find-fonts-on-Google-Fonts-https-www-google-com-fonts" class="headerlink" title="- Find fonts on Google Fonts (https://www.google.com/fonts)"></a>- Find fonts on Google Fonts (<a href="https://www.google.com/fonts" target="_blank" rel="noopener">https://www.google.com/fonts</a>)</h1><h1 id="All-fonts-set-here-will-have-the-following-styles"><a href="#All-fonts-set-here-will-have-the-following-styles" class="headerlink" title="- All fonts set here will have the following styles:"></a>- All fonts set here will have the following styles:</h1><h1 id="light-light-italic-normal-normal-italic-bold-bold-italic"><a href="#light-light-italic-normal-normal-italic-bold-bold-italic" class="headerlink" title="light, light italic, normal, normal italic, bold, bold italic"></a>light, light italic, normal, normal italic, bold, bold italic</h1><h1 id="Be-aware-that-setting-too-much-fonts-will-cause-site-running-slowly"><a href="#Be-aware-that-setting-too-much-fonts-will-cause-site-running-slowly" class="headerlink" title="- Be aware that setting too much fonts will cause site running slowly"></a>- Be aware that setting too much fonts will cause site running slowly</h1><h1 id="Introduce-in-5-0-1"><a href="#Introduce-in-5-0-1" class="headerlink" title="- Introduce in 5.0.1"></a>- Introduce in 5.0.1</h1><h1 id="—————————————————————-17"><a href="#—————————————————————-17" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="CAUTION-Safari-Version-10-1-2-bug-https-github-com-iissnan-hexo-theme-next-issues-1844"><a href="#CAUTION-Safari-Version-10-1-2-bug-https-github-com-iissnan-hexo-theme-next-issues-1844" class="headerlink" title="CAUTION! Safari Version 10.1.2 bug: https://github.com/iissnan/hexo-theme-next/issues/1844"></a>CAUTION! Safari Version 10.1.2 bug: <a href="https://github.com/iissnan/hexo-theme-next/issues/1844" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next/issues/1844</a></h1><h1 id="To-avoid-space-between-header-and-sidebar-in-Pisces-Gemini-themes-recommended-to-use-Web-Safe-fonts-for-global-and-logo"><a href="#To-avoid-space-between-header-and-sidebar-in-Pisces-Gemini-themes-recommended-to-use-Web-Safe-fonts-for-global-and-logo" class="headerlink" title="To avoid space between header and sidebar in Pisces / Gemini themes recommended to use Web Safe fonts for global (and logo):"></a>To avoid space between header and sidebar in Pisces / Gemini themes recommended to use Web Safe fonts for <code>global</code> (and <code>logo</code>):</h1><h1 id="Arial-Tahoma-Helvetica-Times-New-Roman-Courier-New-Verdana-Georgia-Palatino-Garamond-Comic-Sans-MS-Trebuchet-MS"><a href="#Arial-Tahoma-Helvetica-Times-New-Roman-Courier-New-Verdana-Georgia-Palatino-Garamond-Comic-Sans-MS-Trebuchet-MS" class="headerlink" title="Arial | Tahoma | Helvetica | Times New Roman | Courier New | Verdana | Georgia | Palatino | Garamond | Comic Sans MS | Trebuchet MS"></a>Arial | Tahoma | Helvetica | Times New Roman | Courier New | Verdana | Georgia | Palatino | Garamond | Comic Sans MS | Trebuchet MS</h1><h1 id="—————————————————————-18"><a href="#—————————————————————-18" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><p>font:<br>  enable: false</p><h1 id="Uri-of-fonts-host-E-g-fonts-googleapis-com-Default"><a href="#Uri-of-fonts-host-E-g-fonts-googleapis-com-Default" class="headerlink" title="Uri of fonts host. E.g. //fonts.googleapis.com (Default)."></a>Uri of fonts host. E.g. //fonts.googleapis.com (Default).</h1><p>  host:</p><h1 id="Font-options"><a href="#Font-options" class="headerlink" title="Font options:"></a>Font options:</h1><h1 id="external-true-will-load-this-font-family-from-host-above"><a href="#external-true-will-load-this-font-family-from-host-above" class="headerlink" title="external: true will load this font family from host above."></a><code>external: true</code> will load this font family from <code>host</code> above.</h1><h1 id="family-Times-New-Roman-Without-any-quotes"><a href="#family-Times-New-Roman-Without-any-quotes" class="headerlink" title="family: Times New Roman. Without any quotes."></a><code>family: Times New Roman</code>. Without any quotes.</h1><h1 id="size-xx-Use-px-as-unit"><a href="#size-xx-Use-px-as-unit" class="headerlink" title="size: xx. Use px as unit."></a><code>size: xx</code>. Use <code>px</code> as unit.</h1><h1 id="Global-font-settings-used-for-all-elements-in"><a href="#Global-font-settings-used-for-all-elements-in" class="headerlink" title="Global font settings used for all elements in ."></a>Global font settings used for all elements in <body>.</body></h1><p>  global:<br>    external: true<br>    family: Lato<br>    size:</p><h1 id="Font-settings-for-Headlines-H1-H2-H3-H4-H5-H6"><a href="#Font-settings-for-Headlines-H1-H2-H3-H4-H5-H6" class="headerlink" title="Font settings for Headlines (H1, H2, H3, H4, H5, H6)."></a>Font settings for Headlines (H1, H2, H3, H4, H5, H6).</h1><h1 id="Fallback-to-global-font-settings"><a href="#Fallback-to-global-font-settings" class="headerlink" title="Fallback to global font settings."></a>Fallback to <code>global</code> font settings.</h1><p>  headings:<br>    external: true<br>    family:<br>    size:</p><h1 id="Font-settings-for-posts"><a href="#Font-settings-for-posts" class="headerlink" title="Font settings for posts."></a>Font settings for posts.</h1><h1 id="Fallback-to-global-font-settings-1"><a href="#Fallback-to-global-font-settings-1" class="headerlink" title="Fallback to global font settings."></a>Fallback to <code>global</code> font settings.</h1><p>  posts:<br>    external: true<br>    family:</p><h1 id="Font-settings-for-Logo"><a href="#Font-settings-for-Logo" class="headerlink" title="Font settings for Logo."></a>Font settings for Logo.</h1><h1 id="Fallback-to-global-font-settings-2"><a href="#Fallback-to-global-font-settings-2" class="headerlink" title="Fallback to global font settings."></a>Fallback to <code>global</code> font settings.</h1><p>  logo:<br>    external: true<br>    family:<br>    size:</p><h1 id="Font-settings-for-and-code-blocks"><a href="#Font-settings-for-and-code-blocks" class="headerlink" title="Font settings for  and code blocks."></a>Font settings for <code> and code blocks.</code></h1><p>  codes:<br>    external: true<br>    family:<br>    size:</p><h1 id="—————————————————————-19"><a href="#—————————————————————-19" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Third-Party-Services-Settings"><a href="#Third-Party-Services-Settings" class="headerlink" title="Third Party Services Settings"></a>Third Party Services Settings</h1><h1 id="—————————————————————-20"><a href="#—————————————————————-20" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Math-Equations-Render-Support"><a href="#Math-Equations-Render-Support" class="headerlink" title="Math Equations Render Support"></a>Math Equations Render Support</h1><p>math:<br>  enable: false</p><h1 id="Default-true-will-load-mathjax-katex-script-on-demand"><a href="#Default-true-will-load-mathjax-katex-script-on-demand" class="headerlink" title="Default(true) will load mathjax/katex script on demand"></a>Default(true) will load mathjax/katex script on demand</h1><h1 id="That-is-it-only-render-those-page-who-has-‘mathjax-true’-in-Front-Matter"><a href="#That-is-it-only-render-those-page-who-has-‘mathjax-true’-in-Front-Matter" class="headerlink" title="That is it only render those page who has ‘mathjax: true’ in Front Matter."></a>That is it only render those page who has ‘mathjax: true’ in Front Matter.</h1><h1 id="If-you-set-it-to-false-it-will-load-mathjax-katex-srcipt-EVERY-PAGE"><a href="#If-you-set-it-to-false-it-will-load-mathjax-katex-srcipt-EVERY-PAGE" class="headerlink" title="If you set it to false, it will load mathjax/katex srcipt EVERY PAGE."></a>If you set it to false, it will load mathjax/katex srcipt EVERY PAGE.</h1><p>  per_page: true</p><p>  engine: mathjax</p><p>  #engine: katex</p><h1 id="hexo-rendering-pandoc-or-hexo-renderer-kramed-needed-to-full-MathJax-support"><a href="#hexo-rendering-pandoc-or-hexo-renderer-kramed-needed-to-full-MathJax-support" class="headerlink" title="hexo-rendering-pandoc (or hexo-renderer-kramed) needed to full MathJax support."></a>hexo-rendering-pandoc (or hexo-renderer-kramed) needed to full MathJax support.</h1><p>  mathjax:</p><pre><code># Use 2.7.1 as default, jsdelivr as default CDN, works everywhere even in Chinacdn: //cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML# For newMathJax CDN (cdnjs.cloudflare.com) with fallback to oldMathJax (cdn.mathjax.org).#cdn: //cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML# For direct link to MathJax.js with CloudFlare CDN (cdnjs.cloudflare.com).#cdn: //cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML# For automatic detect latest version link to MathJax.js and get from Bootcss.#cdn: //cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML</code></pre><h1 id="hexo-renderer-markdown-it-plus-or-hexo-renderer-markdown-it-with-markdown-it-katex-plugin"><a href="#hexo-renderer-markdown-it-plus-or-hexo-renderer-markdown-it-with-markdown-it-katex-plugin" class="headerlink" title="hexo-renderer-markdown-it-plus (or hexo-renderer-markdown-it with markdown-it-katex plugin)"></a>hexo-renderer-markdown-it-plus (or hexo-renderer-markdown-it with markdown-it-katex plugin)</h1><h1 id="needed-to-full-Katex-support"><a href="#needed-to-full-Katex-support" class="headerlink" title="needed to full Katex support."></a>needed to full Katex support.</h1><p>  katex:</p><pre><code># Use 0.7.1 as default, jsdelivr as default CDN, works everywhere even in Chinacdn: //cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css# CDNJS, provided by cloudflare, maybe the best CDN, but not works in China#cdn: //cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css# Bootcss, works great in China, but not so well in other region#cdn: //cdn.bootcss.com/KaTeX/0.7.1/katex.min.css</code></pre><h1 id="Han-Support"><a href="#Han-Support" class="headerlink" title="Han Support"></a>Han Support</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-han"><a href="#Dependencies-https-github-com-theme-next-theme-next-han" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-han"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-han" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-han</a></h1><p>han: false</p><h1 id="Pangu-Support"><a href="#Pangu-Support" class="headerlink" title="Pangu Support"></a>Pangu Support</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-pangu"><a href="#Dependencies-https-github-com-theme-next-theme-next-pangu" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-pangu"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-pangu" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-pangu</a></h1><h1 id="For-more-information-https-github-com-vinta-pangu-js"><a href="#For-more-information-https-github-com-vinta-pangu-js" class="headerlink" title="For more information: https://github.com/vinta/pangu.js"></a>For more information: <a href="https://github.com/vinta/pangu.js" target="_blank" rel="noopener">https://github.com/vinta/pangu.js</a></h1><p>pangu: false</p><h1 id="Swiftype-Search-API-Key"><a href="#Swiftype-Search-API-Key" class="headerlink" title="Swiftype Search API Key"></a>Swiftype Search API Key</h1><p>#swiftype_key:</p><h1 id="Baidu-Analytics-ID"><a href="#Baidu-Analytics-ID" class="headerlink" title="Baidu Analytics ID"></a>Baidu Analytics ID</h1><p>#baidu_analytics:</p><h1 id="Disqus"><a href="#Disqus" class="headerlink" title="Disqus"></a>Disqus</h1><p>disqus:<br>  enable: false<br>  shortname:<br>  count: true<br>  lazyload: false</p><h1 id="changyan"><a href="#changyan" class="headerlink" title="changyan"></a>changyan</h1><p>changyan:<br>  enable: false<br>  appid: cytMkCChL<br>  appkey: 840a3b3a6d6c5636110a7818b370fcf9</p><h1 id="Valine"><a href="#Valine" class="headerlink" title="Valine."></a>Valine.</h1><h1 id="You-can-get-your-appid-and-appkey-from-https-leancloud-cn"><a href="#You-can-get-your-appid-and-appkey-from-https-leancloud-cn" class="headerlink" title="You can get your appid and appkey from https://leancloud.cn"></a>You can get your appid and appkey from <a href="https://leancloud.cn" target="_blank" rel="noopener">https://leancloud.cn</a></h1><h1 id="more-info-please-open-https-valine-js-org"><a href="#more-info-please-open-https-valine-js-org" class="headerlink" title="more info please open https://valine.js.org"></a>more info please open <a href="https://valine.js.org" target="_blank" rel="noopener">https://valine.js.org</a></h1><p>valine:<br>  enable: false # When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version.<br>  appid:  # your leancloud application appid<br>  appkey:  # your leancloud application appkey<br>  notify: false # mail notifier , <a href="https://github.com/xCss/Valine/wiki" target="_blank" rel="noopener">https://github.com/xCss/Valine/wiki</a><br>  verify: false # Verification code<br>  placeholder: Just go go # comment box placeholder<br>  avatar: mm # gravatar style<br>  guest_info: nick,mail,link # custom comment header<br>  pageSize: 10 # pagination size<br>  visitor: false # leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors’ for counter compatibility. Article reading statistic <a href="https://valine.js.org/visitor.html" target="_blank" rel="noopener">https://valine.js.org/visitor.html</a></p><h1 id="Support-for-LiveRe-comments-system"><a href="#Support-for-LiveRe-comments-system" class="headerlink" title="Support for LiveRe comments system."></a>Support for LiveRe comments system.</h1><h1 id="You-can-get-your-uid-from-https-livere-com-insight-myCode-General-web-site"><a href="#You-can-get-your-uid-from-https-livere-com-insight-myCode-General-web-site" class="headerlink" title="You can get your uid from https://livere.com/insight/myCode (General web site)"></a>You can get your uid from <a href="https://livere.com/insight/myCode" target="_blank" rel="noopener">https://livere.com/insight/myCode</a> (General web site)</h1><p>livere_uid: MTAyMC8zOTE3MS8xNTY5OA==</p><h1 id="Gitment"><a href="#Gitment" class="headerlink" title="Gitment"></a>Gitment</h1><h1 id="Introduction-https-imsun-net-posts-gitment-introduction"><a href="#Introduction-https-imsun-net-posts-gitment-introduction" class="headerlink" title="Introduction: https://imsun.net/posts/gitment-introduction/"></a>Introduction: <a href="https://imsun.net/posts/gitment-introduction/" target="_blank" rel="noopener">https://imsun.net/posts/gitment-introduction/</a></h1><p>gitment:<br>  enable: false<br>  mint: true # RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway<br>  count: true # Show comments count in post meta area<br>  lazy: false # Comments lazy loading with a button<br>  cleanly: false # Hide ‘Powered by …’ on footer, and more<br>  language: # Force language, or auto switch by theme<br>  github_user: xq-soliton  # MUST HAVE, Your Github Username<br>  github_repo:  <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:xq-soliton/xq-soliton.github.io.git  # MUST HAVE, The name of the repo you use to store Gitment comments<br>  client_id: b8ab6b394b56c9377a52  # MUST HAVE, Github client id for the Gitment<br>  client_secret: ed7e33243e4ce522a59e2d1be0c1e4bc6a8b81d7  # EITHER this or proxy_gateway, Github access secret token for the Gitment<br>  proxy_gateway: # Address of api proxy, See: <a href="https://github.com/aimingoo/intersect" target="_blank" rel="noopener">https://github.com/aimingoo/intersect</a><br>  redirect_protocol: # Protocol of redirect_uri with force_redirect_protocol when mint enabled</p><h1 id="Baidu-Share"><a href="#Baidu-Share" class="headerlink" title="Baidu Share"></a>Baidu Share</h1><h1 id="Available-value"><a href="#Available-value" class="headerlink" title="Available value:"></a>Available value:</h1><h1 id="button-slide"><a href="#button-slide" class="headerlink" title="button | slide"></a>button | slide</h1><h1 id="Warning-Baidu-Share-does-not-support-https"><a href="#Warning-Baidu-Share-does-not-support-https" class="headerlink" title="Warning: Baidu Share does not support https."></a>Warning: Baidu Share does not support https.</h1><p>baidushare:<br>  type: button<br>  baidushare: true</p><h1 id="addthis-Share-see-https-www-addthis-com"><a href="#addthis-Share-see-https-www-addthis-com" class="headerlink" title="addthis Share, see: https://www.addthis.com/"></a>addthis Share, see: <a href="https://www.addthis.com/" target="_blank" rel="noopener">https://www.addthis.com/</a></h1><p>#add_this_id:</p><h1 id="NeedMoreShare2"><a href="#NeedMoreShare2" class="headerlink" title="NeedMoreShare2"></a>NeedMoreShare2</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-needmoreshare2"><a href="#Dependencies-https-github-com-theme-next-theme-next-needmoreshare2" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-needmoreshare2"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-needmoreshare2" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-needmoreshare2</a></h1><h1 id="See-https-github-com-revir-need-more-share2"><a href="#See-https-github-com-revir-need-more-share2" class="headerlink" title="See: https://github.com/revir/need-more-share2"></a>See: <a href="https://github.com/revir/need-more-share2" target="_blank" rel="noopener">https://github.com/revir/need-more-share2</a></h1><h1 id="Also-see-https-github-com-DzmVasileusky-needShareButton"><a href="#Also-see-https-github-com-DzmVasileusky-needShareButton" class="headerlink" title="Also see: https://github.com/DzmVasileusky/needShareButton"></a>Also see: <a href="https://github.com/DzmVasileusky/needShareButton" target="_blank" rel="noopener">https://github.com/DzmVasileusky/needShareButton</a></h1><h1 id="iconStyle-default-box"><a href="#iconStyle-default-box" class="headerlink" title="iconStyle: default | box"></a>iconStyle: default | box</h1><h1 id="boxForm-horizontal-vertical"><a href="#boxForm-horizontal-vertical" class="headerlink" title="boxForm: horizontal | vertical"></a>boxForm: horizontal | vertical</h1><h1 id="position-top-middle-bottom-Left-Center-Right"><a href="#position-top-middle-bottom-Left-Center-Right" class="headerlink" title="position: top / middle / bottom + Left / Center / Right"></a>position: top / middle / bottom + Left / Center / Right</h1><h1 id="networks-Weibo-Wechat-Douban-QQZone-Twitter-Linkedin-Mailto-Reddit"><a href="#networks-Weibo-Wechat-Douban-QQZone-Twitter-Linkedin-Mailto-Reddit" class="headerlink" title="networks: Weibo,Wechat,Douban,QQZone,Twitter,Linkedin,Mailto,Reddit,"></a>networks: Weibo,Wechat,Douban,QQZone,Twitter,Linkedin,Mailto,Reddit,</h1><h1 id="Delicious-StumbleUpon-Pinterest-Facebook-GooglePlus-Slashdot"><a href="#Delicious-StumbleUpon-Pinterest-Facebook-GooglePlus-Slashdot" class="headerlink" title="Delicious,StumbleUpon,Pinterest,Facebook,GooglePlus,Slashdot,"></a>Delicious,StumbleUpon,Pinterest,Facebook,GooglePlus,Slashdot,</h1><h1 id="Technorati-Posterous-Tumblr-GoogleBookmarks-Newsvine"><a href="#Technorati-Posterous-Tumblr-GoogleBookmarks-Newsvine" class="headerlink" title="Technorati,Posterous,Tumblr,GoogleBookmarks,Newsvine,"></a>Technorati,Posterous,Tumblr,GoogleBookmarks,Newsvine,</h1><h1 id="Evernote-Friendfeed-Vkontakte-Odnoklassniki-Mailru"><a href="#Evernote-Friendfeed-Vkontakte-Odnoklassniki-Mailru" class="headerlink" title="Evernote,Friendfeed,Vkontakte,Odnoklassniki,Mailru"></a>Evernote,Friendfeed,Vkontakte,Odnoklassniki,Mailru</h1><p>needmoreshare2:<br>  enable: true<br>  postbottom:<br>    enable: true<br>    options:<br>      iconStyle: box<br>      boxForm: horizontal<br>      position: bottomCenter<br>      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook<br>  float:<br>    enable: false<br>    options:<br>      iconStyle: box<br>      boxForm: horizontal<br>      position: middleRight<br>      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook</p><h1 id="Google-Webmaster-tools-verification-setting"><a href="#Google-Webmaster-tools-verification-setting" class="headerlink" title="Google Webmaster tools verification setting"></a>Google Webmaster tools verification setting</h1><h1 id="See-https-www-google-com-webmasters"><a href="#See-https-www-google-com-webmasters" class="headerlink" title="See: https://www.google.com/webmasters/"></a>See: <a href="https://www.google.com/webmasters/" target="_blank" rel="noopener">https://www.google.com/webmasters/</a></h1><p>#google_site_verification:</p><h1 id="Google-Analytics"><a href="#Google-Analytics" class="headerlink" title="Google Analytics"></a>Google Analytics</h1><p>#google_analytics:</p><h1 id="Bing-Webmaster-tools-verification-setting"><a href="#Bing-Webmaster-tools-verification-setting" class="headerlink" title="Bing Webmaster tools verification setting"></a>Bing Webmaster tools verification setting</h1><h1 id="See-https-www-bing-com-webmaster"><a href="#See-https-www-bing-com-webmaster" class="headerlink" title="See: https://www.bing.com/webmaster/"></a>See: <a href="https://www.bing.com/webmaster/" target="_blank" rel="noopener">https://www.bing.com/webmaster/</a></h1><p>#bing_site_verification:</p><h1 id="Yandex-Webmaster-tools-verification-setting"><a href="#Yandex-Webmaster-tools-verification-setting" class="headerlink" title="Yandex Webmaster tools verification setting"></a>Yandex Webmaster tools verification setting</h1><h1 id="See-https-webmaster-yandex-ru"><a href="#See-https-webmaster-yandex-ru" class="headerlink" title="See: https://webmaster.yandex.ru/"></a>See: <a href="https://webmaster.yandex.ru/" target="_blank" rel="noopener">https://webmaster.yandex.ru/</a></h1><p>#yandex_site_verification:</p><h1 id="Baidu-Webmaster-tools-verification-setting"><a href="#Baidu-Webmaster-tools-verification-setting" class="headerlink" title="Baidu Webmaster tools verification setting"></a>Baidu Webmaster tools verification setting</h1><h1 id="See-https-ziyuan-baidu-com-site"><a href="#See-https-ziyuan-baidu-com-site" class="headerlink" title="See: https://ziyuan.baidu.com/site/"></a>See: <a href="https://ziyuan.baidu.com/site/" target="_blank" rel="noopener">https://ziyuan.baidu.com/site/</a></h1><p>#baidu_site_verification:</p><h1 id="CNZZ-count"><a href="#CNZZ-count" class="headerlink" title="CNZZ count"></a>CNZZ count</h1><p>#cnzz_siteid:</p><h1 id="Application-Insights"><a href="#Application-Insights" class="headerlink" title="Application Insights"></a>Application Insights</h1><h1 id="See-https-azure-microsoft-com-en-us-services-application-insights"><a href="#See-https-azure-microsoft-com-en-us-services-application-insights" class="headerlink" title="See https://azure.microsoft.com/en-us/services/application-insights/"></a>See <a href="https://azure.microsoft.com/en-us/services/application-insights/" target="_blank" rel="noopener">https://azure.microsoft.com/en-us/services/application-insights/</a></h1><h1 id="application-insights"><a href="#application-insights" class="headerlink" title="application_insights:"></a>application_insights:</h1><h1 id="Post-widgets-amp-FB-VK-comments-settings"><a href="#Post-widgets-amp-FB-VK-comments-settings" class="headerlink" title="Post widgets &amp; FB/VK comments settings."></a>Post widgets &amp; FB/VK comments settings.</h1><h1 id="—————————————————————-21"><a href="#—————————————————————-21" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Facebook-SDK-Support"><a href="#Facebook-SDK-Support" class="headerlink" title="Facebook SDK Support."></a>Facebook SDK Support.</h1><h1 id="https-github-com-iissnan-hexo-theme-next-pull-410"><a href="#https-github-com-iissnan-hexo-theme-next-pull-410" class="headerlink" title="https://github.com/iissnan/hexo-theme-next/pull/410"></a><a href="https://github.com/iissnan/hexo-theme-next/pull/410" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next/pull/410</a></h1><p>facebook_sdk:<br>  enable:       false<br>  app_id:       #&lt;app_id&gt;<br>  fb_admin:     #&lt;user_id&gt;<br>  like_button:  #true<br>  webmaster:    #true</p><h1 id="Facebook-comments-plugin"><a href="#Facebook-comments-plugin" class="headerlink" title="Facebook comments plugin"></a>Facebook comments plugin</h1><h1 id="This-plugin-depends-on-Facebook-SDK"><a href="#This-plugin-depends-on-Facebook-SDK" class="headerlink" title="This plugin depends on Facebook SDK."></a>This plugin depends on Facebook SDK.</h1><h1 id="If-facebook-sdk-enable-is-false-Facebook-comments-plugin-is-unavailable"><a href="#If-facebook-sdk-enable-is-false-Facebook-comments-plugin-is-unavailable" class="headerlink" title="If facebook_sdk.enable is false, Facebook comments plugin is unavailable."></a>If facebook_sdk.enable is false, Facebook comments plugin is unavailable.</h1><p>facebook_comments_plugin:<br>  enable:       false<br>  num_of_posts: 10    # min posts num is 1<br>  width:        100%  # default width is 550px<br>  scheme:       light # default scheme is light (light or dark)</p><h1 id="VKontakte-API-Support"><a href="#VKontakte-API-Support" class="headerlink" title="VKontakte API Support."></a>VKontakte API Support.</h1><h1 id="To-get-your-AppID-visit-https-vk-com-editapp-act-create"><a href="#To-get-your-AppID-visit-https-vk-com-editapp-act-create" class="headerlink" title="To get your AppID visit https://vk.com/editapp?act=create"></a>To get your AppID visit <a href="https://vk.com/editapp?act=create" target="_blank" rel="noopener">https://vk.com/editapp?act=create</a></h1><p>vkontakte_api:<br>  enable:       false<br>  app_id:       #&lt;app_id&gt;<br>  like:         true<br>  comments:     true<br>  num_of_posts: 10</p><h1 id="Star-rating-support-to-each-article"><a href="#Star-rating-support-to-each-article" class="headerlink" title="Star rating support to each article."></a>Star rating support to each article.</h1><h1 id="To-get-your-ID-visit-https-widgetpack-com"><a href="#To-get-your-ID-visit-https-widgetpack-com" class="headerlink" title="To get your ID visit https://widgetpack.com"></a>To get your ID visit <a href="https://widgetpack.com" target="_blank" rel="noopener">https://widgetpack.com</a></h1><p>rating:<br>  enable: false<br>  id:     #&lt;app_id&gt;<br>  color:  fc6423</p><h1 id="—————————————————————-22"><a href="#—————————————————————-22" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Show-number-of-visitors-to-each-article"><a href="#Show-number-of-visitors-to-each-article" class="headerlink" title="Show number of visitors to each article."></a>Show number of visitors to each article.</h1><h1 id="You-can-visit-https-leancloud-cn-get-AppID-and-AppKey"><a href="#You-can-visit-https-leancloud-cn-get-AppID-and-AppKey" class="headerlink" title="You can visit https://leancloud.cn get AppID and AppKey."></a>You can visit <a href="https://leancloud.cn" target="_blank" rel="noopener">https://leancloud.cn</a> get AppID and AppKey.</h1><p>leancloud_visitors:<br>  enable: false<br>  app_id: #&lt;app_id&gt;<br>  app_key: #&lt;app_key&gt;</p><h1 id="Dependencies-https-github-com-theme-next-hexo-leancloud-counter-security"><a href="#Dependencies-https-github-com-theme-next-hexo-leancloud-counter-security" class="headerlink" title="Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security"></a>Dependencies: <a href="https://github.com/theme-next/hexo-leancloud-counter-security" target="_blank" rel="noopener">https://github.com/theme-next/hexo-leancloud-counter-security</a></h1><h1 id="If-you-don’t-care-about-security-in-lc-counter-and-just-want-to-use-it-directly"><a href="#If-you-don’t-care-about-security-in-lc-counter-and-just-want-to-use-it-directly" class="headerlink" title="If you don’t care about security in lc counter and just want to use it directly"></a>If you don’t care about security in lc counter and just want to use it directly</h1><h1 id="without-hexo-leancloud-counter-security-plugin-set-the-security-to-false"><a href="#without-hexo-leancloud-counter-security-plugin-set-the-security-to-false" class="headerlink" title="(without hexo-leancloud-counter-security plugin), set the security to false."></a>(without hexo-leancloud-counter-security plugin), set the <code>security</code> to <code>false</code>.</h1><p>  security: true<br>  betterPerformance: false</p><h1 id="Another-tool-to-show-number-of-visitors-to-each-article"><a href="#Another-tool-to-show-number-of-visitors-to-each-article" class="headerlink" title="Another tool to show number of visitors to each article."></a>Another tool to show number of visitors to each article.</h1><h1 id="visit-https-console-firebase-google-com-u-0-to-get-apiKey-and-projectId"><a href="#visit-https-console-firebase-google-com-u-0-to-get-apiKey-and-projectId" class="headerlink" title="visit https://console.firebase.google.com/u/0/ to get apiKey and projectId"></a>visit <a href="https://console.firebase.google.com/u/0/" target="_blank" rel="noopener">https://console.firebase.google.com/u/0/</a> to get apiKey and projectId</h1><h1 id="visit-https-firebase-google-com-docs-firestore-to-get-more-information-about-firestore"><a href="#visit-https-firebase-google-com-docs-firestore-to-get-more-information-about-firestore" class="headerlink" title="visit https://firebase.google.com/docs/firestore/ to get more information about firestore"></a>visit <a href="https://firebase.google.com/docs/firestore/" target="_blank" rel="noopener">https://firebase.google.com/docs/firestore/</a> to get more information about firestore</h1><p>firestore:<br>  enable: false<br>  collection: articles #required, a string collection name to access firestore database<br>  apiKey: #required<br>  projectId: #required<br>  bluebird: false #enable this if you want to include bluebird 3.5.1(core version) Promise polyfill</p><h1 id="Show-Views-Visitors-of-the-website-page-with-busuanzi"><a href="#Show-Views-Visitors-of-the-website-page-with-busuanzi" class="headerlink" title="Show Views/Visitors of the website/page with busuanzi."></a>Show Views/Visitors of the website/page with busuanzi.</h1><h1 id="Get-more-information-on-http-ibruce-info-2015-04-04-busuanzi"><a href="#Get-more-information-on-http-ibruce-info-2015-04-04-busuanzi" class="headerlink" title="Get more information on http://ibruce.info/2015/04/04/busuanzi/"></a>Get more information on <a href="http://ibruce.info/2015/04/04/busuanzi/" target="_blank" rel="noopener">http://ibruce.info/2015/04/04/busuanzi/</a></h1><p>busuanzi_count:<br>  enable: true<br>  site_uv: true<br>  site_header: <i class="fa fa-user"></i>访问人数<br>  site_footer:<br>  site_pv: true<br>  site_pv_header: <i class="fa fa-eye"></i>总访问量<br>  site_pv_footer: 次<br>  page_pv: true<br>  page_pv_header: <i class="fa fa-file-o"></i>浏览<br>  page_pv_footer: 次</p><h1 id="total-visitors-true"><a href="#total-visitors-true" class="headerlink" title="total_visitors: true"></a>total_visitors: true</h1><h1 id="total-visitors-icon-user"><a href="#total-visitors-icon-user" class="headerlink" title="total_visitors_icon: user"></a>total_visitors_icon: user</h1><h1 id="total-views-true"><a href="#total-views-true" class="headerlink" title="total_views: true"></a>total_views: true</h1><h1 id="total-views-icon-eye"><a href="#total-views-icon-eye" class="headerlink" title="total_views_icon: eye"></a>total_views_icon: eye</h1><h1 id="post-views-true"><a href="#post-views-true" class="headerlink" title="post_views: true"></a>post_views: true</h1><h1 id="post-views-icon-eye"><a href="#post-views-icon-eye" class="headerlink" title="post_views_icon: eye"></a>post_views_icon: eye</h1><h1 id="Tencent-analytics-ID"><a href="#Tencent-analytics-ID" class="headerlink" title="Tencent analytics ID"></a>Tencent analytics ID</h1><h1 id="tencent-analytics"><a href="#tencent-analytics" class="headerlink" title="tencent_analytics:"></a>tencent_analytics:</h1><h1 id="Tencent-MTA-ID"><a href="#Tencent-MTA-ID" class="headerlink" title="Tencent MTA ID"></a>Tencent MTA ID</h1><h1 id="tencent-mta"><a href="#tencent-mta" class="headerlink" title="tencent_mta:"></a>tencent_mta:</h1><h1 id="Enable-baidu-push-so-that-the-blog-will-push-the-url-to-baidu-automatically-which-is-very-helpful-for-SEO"><a href="#Enable-baidu-push-so-that-the-blog-will-push-the-url-to-baidu-automatically-which-is-very-helpful-for-SEO" class="headerlink" title="Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO"></a>Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO</h1><p>baidu_push: true</p><h1 id="Google-Calendar"><a href="#Google-Calendar" class="headerlink" title="Google Calendar"></a>Google Calendar</h1><h1 id="Share-your-recent-schedule-to-others-via-calendar-page"><a href="#Share-your-recent-schedule-to-others-via-calendar-page" class="headerlink" title="Share your recent schedule to others via calendar page"></a>Share your recent schedule to others via calendar page</h1><p>#</p><h1 id="API-Documentation"><a href="#API-Documentation" class="headerlink" title="API Documentation:"></a>API Documentation:</h1><h1 id="https-developers-google-com-google-apps-calendar-v3-reference-events-list"><a href="#https-developers-google-com-google-apps-calendar-v3-reference-events-list" class="headerlink" title="https://developers.google.com/google-apps/calendar/v3/reference/events/list"></a><a href="https://developers.google.com/google-apps/calendar/v3/reference/events/list" target="_blank" rel="noopener">https://developers.google.com/google-apps/calendar/v3/reference/events/list</a></h1><p>calendar:<br>  enable: false<br>  calendar_id: <required><br>  api_key: <required><br>  orderBy: startTime<br>  offsetMax: 24<br>  offsetMin: 4<br>  timeZone:<br>  showDeleted: false<br>  singleEvents: true<br>  maxResults: 250</required></required></p><h1 id="Algolia-Search"><a href="#Algolia-Search" class="headerlink" title="Algolia Search"></a>Algolia Search</h1><h1 id="See-https-github-com-theme-next-hexo-theme-next-blob-master-docs-ALGOLIA-SEARCH-md"><a href="#See-https-github-com-theme-next-hexo-theme-next-blob-master-docs-ALGOLIA-SEARCH-md" class="headerlink" title="See: https://github.com/theme-next/hexo-theme-next/blob/master/docs/ALGOLIA-SEARCH.md"></a>See: <a href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/ALGOLIA-SEARCH.md" target="_blank" rel="noopener">https://github.com/theme-next/hexo-theme-next/blob/master/docs/ALGOLIA-SEARCH.md</a></h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-algolia-instant-search"><a href="#Dependencies-https-github-com-theme-next-theme-next-algolia-instant-search" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-algolia-instant-search"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-algolia-instant-search" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-algolia-instant-search</a></h1><p>algolia_search:<br>  enable: false<br>  hits:<br>    per_page: 10<br>  labels:<br>    input_placeholder: Search for Posts<br>    hits_empty: “We didn’t find any results for the search: ${query}”<br>    hits_stats: “${hits} results found in ${time} ms”</p><h1 id="Local-search"><a href="#Local-search" class="headerlink" title="Local search"></a>Local search</h1><h1 id="Dependencies-https-github-com-theme-next-hexo-generator-searchdb"><a href="#Dependencies-https-github-com-theme-next-hexo-generator-searchdb" class="headerlink" title="Dependencies: https://github.com/theme-next/hexo-generator-searchdb"></a>Dependencies: <a href="https://github.com/theme-next/hexo-generator-searchdb" target="_blank" rel="noopener">https://github.com/theme-next/hexo-generator-searchdb</a></h1><p>local_search:<br>  enable: true</p><h1 id="if-auto-trigger-search-by-changing-input"><a href="#if-auto-trigger-search-by-changing-input" class="headerlink" title="if auto, trigger search by changing input"></a>if auto, trigger search by changing input</h1><h1 id="if-manual-trigger-search-by-pressing-enter-key-or-search-button"><a href="#if-manual-trigger-search-by-pressing-enter-key-or-search-button" class="headerlink" title="if manual, trigger search by pressing enter key or search button"></a>if manual, trigger search by pressing enter key or search button</h1><p>  trigger: auto</p><h1 id="show-top-n-results-per-article-show-all-results-by-setting-to-1"><a href="#show-top-n-results-per-article-show-all-results-by-setting-to-1" class="headerlink" title="show top n results per article, show all results by setting to -1"></a>show top n results per article, show all results by setting to -1</h1><p>  top_n_per_article: 1</p><h1 id="unescape-html-strings-to-the-readable-one"><a href="#unescape-html-strings-to-the-readable-one" class="headerlink" title="unescape html strings to the readable one"></a>unescape html strings to the readable one</h1><p>  unescape: false</p><h1 id="Bookmark-Support"><a href="#Bookmark-Support" class="headerlink" title="Bookmark Support"></a>Bookmark Support</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-bookmark"><a href="#Dependencies-https-github-com-theme-next-theme-next-bookmark" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-bookmark"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-bookmark" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-bookmark</a></h1><p>bookmark:<br>  enable: false</p><h1 id="if-auto"><a href="#if-auto" class="headerlink" title="if auto"></a>if auto</h1><h1 id="save-the-reading-position-when-closing-the-page"><a href="#save-the-reading-position-when-closing-the-page" class="headerlink" title="- save the reading position when closing the page"></a>- save the reading position when closing the page</h1><h1 id="or-clicking-the-bookmark-icon"><a href="#or-clicking-the-bookmark-icon" class="headerlink" title="- or clicking the bookmark-icon"></a>- or clicking the bookmark-icon</h1><h1 id="if-manual-only-save-it-by-clicking-the-bookmark-icon"><a href="#if-manual-only-save-it-by-clicking-the-bookmark-icon" class="headerlink" title="if manual, only save it by clicking the bookmark-icon"></a>if manual, only save it by clicking the bookmark-icon</h1><p>  save: auto</p><h1 id="—————————————————————-23"><a href="#—————————————————————-23" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="Tags-Settings"><a href="#Tags-Settings" class="headerlink" title="Tags Settings"></a>Tags Settings</h1><h1 id="—————————————————————-24"><a href="#—————————————————————-24" class="headerlink" title="—————————————————————"></a>—————————————————————</h1><h1 id="External-URL-with-BASE64-encrypt-amp-decrypt"><a href="#External-URL-with-BASE64-encrypt-amp-decrypt" class="headerlink" title="External URL with BASE64 encrypt &amp; decrypt."></a>External URL with BASE64 encrypt &amp; decrypt.</h1><h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage: "></a>Usage: <span class="exturl" title="title">text url title<i class="fa fa-external-link"></i></span></h1><h1 id="Alias"><a href="#Alias" class="headerlink" title="Alias: "></a>Alias: <span class="exturl" title="title">text url title<i class="fa fa-external-link"></i></span></h1><p>exturl: false</p><h1 id="Note-tag-bs-callout"><a href="#Note-tag-bs-callout" class="headerlink" title="Note tag (bs-callout)."></a>Note tag (bs-callout).</h1><p>note:</p><h1 id="Note-tag-style-values"><a href="#Note-tag-style-values" class="headerlink" title="Note tag style values:"></a>Note tag style values:</h1><h1 id="simple-bs-callout-old-alert-style-Default"><a href="#simple-bs-callout-old-alert-style-Default" class="headerlink" title="- simple    bs-callout old alert style. Default."></a>- simple    bs-callout old alert style. Default.</h1><h1 id="modern-bs-callout-new-v2-v3-alert-style"><a href="#modern-bs-callout-new-v2-v3-alert-style" class="headerlink" title="- modern    bs-callout new (v2-v3) alert style."></a>- modern    bs-callout new (v2-v3) alert style.</h1><h1 id="flat-flat-callout-style-with-background-like-on-Mozilla-or-StackOverflow"><a href="#flat-flat-callout-style-with-background-like-on-Mozilla-or-StackOverflow" class="headerlink" title="- flat      flat callout style with background, like on Mozilla or StackOverflow."></a>- flat      flat callout style with background, like on Mozilla or StackOverflow.</h1><h1 id="disabled-disable-all-CSS-styles-import-of-note-tag"><a href="#disabled-disable-all-CSS-styles-import-of-note-tag" class="headerlink" title="- disabled  disable all CSS styles import of note tag."></a>- disabled  disable all CSS styles import of note tag.</h1><p>  style: simple<br>  icons: false<br>  border_radius: 3</p><h1 id="Offset-lighter-of-background-in-for-modern-and-flat-styles-modern-12-12-flat-18-6"><a href="#Offset-lighter-of-background-in-for-modern-and-flat-styles-modern-12-12-flat-18-6" class="headerlink" title="Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6)."></a>Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</h1><h1 id="Offset-also-applied-to-label-tag-variables-This-option-can-work-with-disabled-note-tag"><a href="#Offset-also-applied-to-label-tag-variables-This-option-can-work-with-disabled-note-tag" class="headerlink" title="Offset also applied to label tag variables. This option can work with disabled note tag."></a>Offset also applied to label tag variables. This option can work with disabled note tag.</h1><p>  light_bg_offset: 0</p><h1 id="Label-tag"><a href="#Label-tag" class="headerlink" title="Label tag."></a>Label tag.</h1><p>label: true</p><h1 id="Tabs-tag"><a href="#Tabs-tag" class="headerlink" title="Tabs tag."></a>Tabs tag.</h1><p>tabs:<br>  enable: true<br>  transition:<br>    tabs: false<br>    labels: true<br>  border_radius: 0</p><h1 id="Reading-progress-bar"><a href="#Reading-progress-bar" class="headerlink" title="Reading progress bar"></a>Reading progress bar</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-reading-progress"><a href="#Dependencies-https-github-com-theme-next-theme-next-reading-progress" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-reading-progress"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-reading-progress" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-reading-progress</a></h1><p>reading_progress:<br>  enable: false<br>  color: “#37c6c0”<br>  height: 2px</p><p>#! —————————————————————</p><p>#! DO NOT EDIT THE FOLLOWING SETTINGS</p><p>#! UNLESS YOU KNOW WHAT YOU ARE DOING</p><p>#! —————————————————————</p><h1 id="Use-velocity-to-animate-everything"><a href="#Use-velocity-to-animate-everything" class="headerlink" title="Use velocity to animate everything."></a>Use velocity to animate everything.</h1><p>motion:<br>  enable: true<br>  async: false<br>  transition:</p><pre><code># Transition variants:# fadeIn | fadeOut | flipXIn | flipXOut | flipYIn | flipYOut | flipBounceXIn | flipBounceXOut | flipBounceYIn | flipBounceYOut# swoopIn | swoopOut | whirlIn | whirlOut | shrinkIn | shrinkOut | expandIn | expandOut# bounceIn | bounceOut | bounceUpIn | bounceUpOut | bounceDownIn | bounceDownOut | bounceLeftIn | bounceLeftOut | bounceRightIn | bounceRightOut# slideUpIn | slideUpOut | slideDownIn | slideDownOut | slideLeftIn | slideLeftOut | slideRightIn | slideRightOut# slideUpBigIn | slideUpBigOut | slideDownBigIn | slideDownBigOut | slideLeftBigIn | slideLeftBigOut | slideRightBigIn | slideRightBigOut# perspectiveUpIn | perspectiveUpOut | perspectiveDownIn | perspectiveDownOut | perspectiveLeftIn | perspectiveLeftOut | perspectiveRightIn | perspectiveRightOutpost_block: fadeInpost_header: slideDownInpost_body: slideDownIncoll_header: slideLeftIn# Only for Pisces | Gemini.sidebar: slideUpIn</code></pre><h1 id="Fancybox-There-is-support-for-old-version-2-and-new-version-3"><a href="#Fancybox-There-is-support-for-old-version-2-and-new-version-3" class="headerlink" title="Fancybox. There is support for old version 2 and new version 3."></a>Fancybox. There is support for old version 2 and new version 3.</h1><h1 id="Please-choose-only-any-one-variant-do-not-need-to-install-both"><a href="#Please-choose-only-any-one-variant-do-not-need-to-install-both" class="headerlink" title="Please, choose only any one variant, do not need to install both."></a>Please, choose only any one variant, do not need to install both.</h1><h1 id="For-install-2-x-https-github-com-theme-next-theme-next-fancybox"><a href="#For-install-2-x-https-github-com-theme-next-theme-next-fancybox" class="headerlink" title="For install 2.x: https://github.com/theme-next/theme-next-fancybox"></a>For install 2.x: <a href="https://github.com/theme-next/theme-next-fancybox" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-fancybox</a></h1><h1 id="For-install-3-x-https-github-com-theme-next-theme-next-fancybox3"><a href="#For-install-3-x-https-github-com-theme-next-theme-next-fancybox3" class="headerlink" title="For install 3.x: https://github.com/theme-next/theme-next-fancybox3"></a>For install 3.x: <a href="https://github.com/theme-next/theme-next-fancybox3" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-fancybox3</a></h1><p>fancybox: false</p><h1 id="Added-switch-option-for-separated-repo-in-6-0-0"><a href="#Added-switch-option-for-separated-repo-in-6-0-0" class="headerlink" title="Added switch option for separated repo in 6.0.0."></a>Added switch option for separated repo in 6.0.0.</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-fastclick"><a href="#Dependencies-https-github-com-theme-next-theme-next-fastclick" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-fastclick"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-fastclick" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-fastclick</a></h1><p>fastclick: false</p><h1 id="Added-switch-option-for-separated-repo-in-6-0-0-1"><a href="#Added-switch-option-for-separated-repo-in-6-0-0-1" class="headerlink" title="Added switch option for separated repo in 6.0.0."></a>Added switch option for separated repo in 6.0.0.</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-jquery-lazyload"><a href="#Dependencies-https-github-com-theme-next-theme-next-jquery-lazyload" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-jquery-lazyload"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-jquery-lazyload" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-jquery-lazyload</a></h1><p>lazyload: false</p><h1 id="Progress-bar-in-the-top-during-page-loading"><a href="#Progress-bar-in-the-top-during-page-loading" class="headerlink" title="Progress bar in the top during page loading."></a>Progress bar in the top during page loading.</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-pace"><a href="#Dependencies-https-github-com-theme-next-theme-next-pace" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-pace"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-pace" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-pace</a></h1><p>pace: false</p><h1 id="Themes-list"><a href="#Themes-list" class="headerlink" title="Themes list:"></a>Themes list:</h1><p>#pace-theme-big-counter</p><p>#pace-theme-bounce</p><p>#pace-theme-barber-shop</p><p>#pace-theme-center-atom</p><p>#pace-theme-center-circle</p><p>#pace-theme-center-radar</p><p>#pace-theme-center-simple</p><p>#pace-theme-corner-indicator</p><p>#pace-theme-fill-left</p><p>#pace-theme-flash</p><p>#pace-theme-loading-bar</p><p>#pace-theme-mac-osx</p><p>#pace-theme-minimal</p><h1 id="For-example"><a href="#For-example" class="headerlink" title="For example"></a>For example</h1><h1 id="pace-theme-pace-theme-center-simple"><a href="#pace-theme-pace-theme-center-simple" class="headerlink" title="pace_theme: pace-theme-center-simple"></a>pace_theme: pace-theme-center-simple</h1><p>pace_theme: pace-theme-minimal</p><h1 id="Canvas-nest"><a href="#Canvas-nest" class="headerlink" title="Canvas-nest"></a>Canvas-nest</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-canvas-nest"><a href="#Dependencies-https-github-com-theme-next-theme-next-canvas-nest" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-canvas-nest"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-canvas-nest" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-canvas-nest</a></h1><p>canvas_nest: true</p><h1 id="JavaScript-3D-library"><a href="#JavaScript-3D-library" class="headerlink" title="JavaScript 3D library."></a>JavaScript 3D library.</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-three"><a href="#Dependencies-https-github-com-theme-next-theme-next-three" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-three"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-three" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-three</a></h1><p>#</p><p>#three_waves</p><p>#three_waves: true</p><p>#canvas_lines</p><p>#canvas_lines: true</p><h1 id="canvas-sphere"><a href="#canvas-sphere" class="headerlink" title="canvas_sphere"></a>canvas_sphere</h1><p>#canvas_sphere: true</p><h1 id="Only-fit-scheme-Pisces"><a href="#Only-fit-scheme-Pisces" class="headerlink" title="Only fit scheme Pisces"></a>Only fit scheme Pisces</h1><h1 id="Dependencies-https-github-com-theme-next-theme-next-canvas-ribbon"><a href="#Dependencies-https-github-com-theme-next-theme-next-canvas-ribbon" class="headerlink" title="Dependencies: https://github.com/theme-next/theme-next-canvas-ribbon"></a>Dependencies: <a href="https://github.com/theme-next/theme-next-canvas-ribbon" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-canvas-ribbon</a></h1><h1 id="Canvas-ribbon"><a href="#Canvas-ribbon" class="headerlink" title="Canvas-ribbon"></a>Canvas-ribbon</h1><h1 id="size-The-width-of-the-ribbon"><a href="#size-The-width-of-the-ribbon" class="headerlink" title="size: The width of the ribbon."></a>size: The width of the ribbon.</h1><h1 id="alpha-The-transparency-of-the-ribbon"><a href="#alpha-The-transparency-of-the-ribbon" class="headerlink" title="alpha: The transparency of the ribbon."></a>alpha: The transparency of the ribbon.</h1><h1 id="zIndex-The-display-level-of-the-ribbon"><a href="#zIndex-The-display-level-of-the-ribbon" class="headerlink" title="zIndex: The display level of the ribbon."></a>zIndex: The display level of the ribbon.</h1><p>canvas_ribbon:<br>  enable: false<br>  size: 300<br>  alpha: 0.6<br>  zIndex: -1</p><h1 id="Script-Vendors"><a href="#Script-Vendors" class="headerlink" title="Script Vendors."></a>Script Vendors.</h1><h1 id="Set-a-CDN-address-for-the-vendor-you-want-to-customize"><a href="#Set-a-CDN-address-for-the-vendor-you-want-to-customize" class="headerlink" title="Set a CDN address for the vendor you want to customize."></a>Set a CDN address for the vendor you want to customize.</h1><h1 id="For-example-1"><a href="#For-example-1" class="headerlink" title="For example"></a>For example</h1><h1 id="jquery-https-ajax-googleapis-com-ajax-libs-jquery-2-2-0-jquery-min-js"><a href="#jquery-https-ajax-googleapis-com-ajax-libs-jquery-2-2-0-jquery-min-js" class="headerlink" title="jquery: https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></a>jquery: <a href="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" target="_blank" rel="noopener">https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js</a></h1><h1 id="Be-aware-that-you-should-use-the-same-version-as-internal-ones-to-avoid-potential-problems"><a href="#Be-aware-that-you-should-use-the-same-version-as-internal-ones-to-avoid-potential-problems" class="headerlink" title="Be aware that you should use the same version as internal ones to avoid potential problems."></a>Be aware that you should use the same version as internal ones to avoid potential problems.</h1><h1 id="Please-use-the-https-protocol-of-CDN-files-when-you-enable-https-on-your-site"><a href="#Please-use-the-https-protocol-of-CDN-files-when-you-enable-https-on-your-site" class="headerlink" title="Please use the https protocol of CDN files when you enable https on your site."></a>Please use the https protocol of CDN files when you enable https on your site.</h1><p>vendors:</p><h1 id="Internal-path-prefix-Please-do-not-edit-it"><a href="#Internal-path-prefix-Please-do-not-edit-it" class="headerlink" title="Internal path prefix. Please do not edit it."></a>Internal path prefix. Please do not edit it.</h1><p>  _internal: lib</p><h1 id="Internal-version-2-1-3"><a href="#Internal-version-2-1-3" class="headerlink" title="Internal version: 2.1.3"></a>Internal version: 2.1.3</h1><p>  jquery:</p><h1 id="Internal-version-2-1-5"><a href="#Internal-version-2-1-5" class="headerlink" title="Internal version: 2.1.5"></a>Internal version: 2.1.5</h1><h1 id="See-http-fancyapps-com-fancybox"><a href="#See-http-fancyapps-com-fancybox" class="headerlink" title="See: http://fancyapps.com/fancybox/"></a>See: <a href="http://fancyapps.com/fancybox/" target="_blank" rel="noopener">http://fancyapps.com/fancybox/</a></h1><p>  fancybox:<br>  fancybox_css:</p><h1 id="Internal-version-1-0-6"><a href="#Internal-version-1-0-6" class="headerlink" title="Internal version: 1.0.6"></a>Internal version: 1.0.6</h1><h1 id="See-https-github-com-ftlabs-fastclick"><a href="#See-https-github-com-ftlabs-fastclick" class="headerlink" title="See: https://github.com/ftlabs/fastclick"></a>See: <a href="https://github.com/ftlabs/fastclick" target="_blank" rel="noopener">https://github.com/ftlabs/fastclick</a></h1><p>  fastclick:</p><h1 id="Internal-version-1-9-7"><a href="#Internal-version-1-9-7" class="headerlink" title="Internal version: 1.9.7"></a>Internal version: 1.9.7</h1><h1 id="See-https-github-com-tuupola-jquery-lazyload"><a href="#See-https-github-com-tuupola-jquery-lazyload" class="headerlink" title="See: https://github.com/tuupola/jquery_lazyload"></a>See: <a href="https://github.com/tuupola/jquery_lazyload" target="_blank" rel="noopener">https://github.com/tuupola/jquery_lazyload</a></h1><p>  lazyload:</p><h1 id="Internal-version-1-2-1"><a href="#Internal-version-1-2-1" class="headerlink" title="Internal version: 1.2.1"></a>Internal version: 1.2.1</h1><h1 id="See-http-VelocityJS-org"><a href="#See-http-VelocityJS-org" class="headerlink" title="See: http://VelocityJS.org"></a>See: <a href="http://VelocityJS.org" target="_blank" rel="noopener">http://VelocityJS.org</a></h1><p>  velocity:</p><h1 id="Internal-version-1-2-1-1"><a href="#Internal-version-1-2-1-1" class="headerlink" title="Internal version: 1.2.1"></a>Internal version: 1.2.1</h1><h1 id="See-http-VelocityJS-org-1"><a href="#See-http-VelocityJS-org-1" class="headerlink" title="See: http://VelocityJS.org"></a>See: <a href="http://VelocityJS.org" target="_blank" rel="noopener">http://VelocityJS.org</a></h1><p>  velocity_ui:</p><h1 id="Internal-version-0-7-9"><a href="#Internal-version-0-7-9" class="headerlink" title="Internal version: 0.7.9"></a>Internal version: 0.7.9</h1><h1 id="See-https-faisalman-github-io-ua-parser-js"><a href="#See-https-faisalman-github-io-ua-parser-js" class="headerlink" title="See: https://faisalman.github.io/ua-parser-js/"></a>See: <a href="https://faisalman.github.io/ua-parser-js/" target="_blank" rel="noopener">https://faisalman.github.io/ua-parser-js/</a></h1><p>  ua_parser:</p><h1 id="Internal-version-4-6-2"><a href="#Internal-version-4-6-2" class="headerlink" title="Internal version: 4.6.2"></a>Internal version: 4.6.2</h1><h1 id="See-http-fontawesome-io"><a href="#See-http-fontawesome-io" class="headerlink" title="See: http://fontawesome.io/"></a>See: <a href="http://fontawesome.io/" target="_blank" rel="noopener">http://fontawesome.io/</a></h1><p>  fontawesome:</p><h1 id="Internal-version-1"><a href="#Internal-version-1" class="headerlink" title="Internal version: 1"></a>Internal version: 1</h1><h1 id="https-www-algolia-com"><a href="#https-www-algolia-com" class="headerlink" title="https://www.algolia.com"></a><a href="https://www.algolia.com" target="_blank" rel="noopener">https://www.algolia.com</a></h1><p>  algolia_instant_js:<br>  algolia_instant_css:</p><h1 id="Internal-version-1-0-2"><a href="#Internal-version-1-0-2" class="headerlink" title="Internal version: 1.0.2"></a>Internal version: 1.0.2</h1><h1 id="See-https-github-com-HubSpot-pace"><a href="#See-https-github-com-HubSpot-pace" class="headerlink" title="See: https://github.com/HubSpot/pace"></a>See: <a href="https://github.com/HubSpot/pace" target="_blank" rel="noopener">https://github.com/HubSpot/pace</a></h1><h1 id="Or-use-direct-links-below"><a href="#Or-use-direct-links-below" class="headerlink" title="Or use direct links below:"></a>Or use direct links below:</h1><h1 id="pace-cdn-bootcss-com-pace-1-0-2-pace-min-js"><a href="#pace-cdn-bootcss-com-pace-1-0-2-pace-min-js" class="headerlink" title="pace: //cdn.bootcss.com/pace/1.0.2/pace.min.js"></a>pace: //cdn.bootcss.com/pace/1.0.2/pace.min.js</h1><h1 id="pace-css-cdn-bootcss-com-pace-1-0-2-themes-blue-pace-theme-flash-min-css"><a href="#pace-css-cdn-bootcss-com-pace-1-0-2-themes-blue-pace-theme-flash-min-css" class="headerlink" title="pace_css: //cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-flash.min.css"></a>pace_css: //cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-flash.min.css</h1><p>  pace:<br>  pace_css:</p><h1 id="Internal-version-1-0-0"><a href="#Internal-version-1-0-0" class="headerlink" title="Internal version: 1.0.0"></a>Internal version: 1.0.0</h1><h1 id="https-github-com-hustcc-canvas-nest-js"><a href="#https-github-com-hustcc-canvas-nest-js" class="headerlink" title="https://github.com/hustcc/canvas-nest.js"></a><a href="https://github.com/hustcc/canvas-nest.js" target="_blank" rel="noopener">https://github.com/hustcc/canvas-nest.js</a></h1><p>  canvas_nest:</p><h1 id="Internal-version-1-0-0-1"><a href="#Internal-version-1-0-0-1" class="headerlink" title="Internal version: 1.0.0"></a>Internal version: 1.0.0</h1><h1 id="See-https-github-com-theme-next-theme-next-three"><a href="#See-https-github-com-theme-next-theme-next-three" class="headerlink" title="See: https://github.com/theme-next/theme-next-three"></a>See: <a href="https://github.com/theme-next/theme-next-three" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-three</a></h1><h1 id="three-cdn-jsdelivr-net-gh-theme-next-theme-next-three-1-0-0-three-min-js"><a href="#three-cdn-jsdelivr-net-gh-theme-next-theme-next-three-1-0-0-three-min-js" class="headerlink" title="three: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0/three.min.js"></a>three: <a href="mailto://cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0" target="_blank" rel="noopener">//cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0</a>/three.min.js</h1><h1 id="three-waves-cdn-jsdelivr-net-gh-theme-next-theme-next-three-1-0-0-three-waves-min-js"><a href="#three-waves-cdn-jsdelivr-net-gh-theme-next-theme-next-three-1-0-0-three-waves-min-js" class="headerlink" title="three_waves: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0/three-waves.min.js"></a>three_waves: <a href="mailto://cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0" target="_blank" rel="noopener">//cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0</a>/three-waves.min.js</h1><h1 id="canvas-lines-cdn-jsdelivr-net-gh-theme-next-theme-next-three-1-0-0-canvas-lines-min-js"><a href="#canvas-lines-cdn-jsdelivr-net-gh-theme-next-theme-next-three-1-0-0-canvas-lines-min-js" class="headerlink" title="canvas_lines: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0/canvas_lines.min.js"></a>canvas_lines: <a href="mailto://cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0" target="_blank" rel="noopener">//cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0</a>/canvas_lines.min.js</h1><h1 id="canvas-sphere-cdn-jsdelivr-net-gh-theme-next-theme-next-three-1-0-0-canvas-sphere-min-js"><a href="#canvas-sphere-cdn-jsdelivr-net-gh-theme-next-theme-next-three-1-0-0-canvas-sphere-min-js" class="headerlink" title="canvas_sphere: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0/canvas_sphere.min.js"></a>canvas_sphere: <a href="mailto://cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0" target="_blank" rel="noopener">//cdn.jsdelivr.net/gh/theme-next/theme-next-three@1.0.0</a>/canvas_sphere.min.js</h1><p>  three:<br>  three_waves:<br>  canvas_lines:<br>  canvas_sphere:</p><h1 id="Internal-version-1-0-0-2"><a href="#Internal-version-1-0-0-2" class="headerlink" title="Internal version: 1.0.0"></a>Internal version: 1.0.0</h1><h1 id="https-github-com-zproo-canvas-ribbon"><a href="#https-github-com-zproo-canvas-ribbon" class="headerlink" title="https://github.com/zproo/canvas-ribbon"></a><a href="https://github.com/zproo/canvas-ribbon" target="_blank" rel="noopener">https://github.com/zproo/canvas-ribbon</a></h1><p>  canvas_ribbon:</p><h1 id="Internal-version-3-3-0"><a href="#Internal-version-3-3-0" class="headerlink" title="Internal version: 3.3.0"></a>Internal version: 3.3.0</h1><h1 id="https-github-com-ethantw-Han"><a href="#https-github-com-ethantw-Han" class="headerlink" title="https://github.com/ethantw/Han"></a><a href="https://github.com/ethantw/Han" target="_blank" rel="noopener">https://github.com/ethantw/Han</a></h1><p>  Han:</p><h1 id="Internal-version-3-3-0-1"><a href="#Internal-version-3-3-0-1" class="headerlink" title="Internal version: 3.3.0"></a>Internal version: 3.3.0</h1><h1 id="https-github-com-vinta-pangu-js"><a href="#https-github-com-vinta-pangu-js" class="headerlink" title="https://github.com/vinta/pangu.js"></a><a href="https://github.com/vinta/pangu.js" target="_blank" rel="noopener">https://github.com/vinta/pangu.js</a></h1><p>  pangu:</p><h1 id="needMoreShare2"><a href="#needMoreShare2" class="headerlink" title="needMoreShare2"></a>needMoreShare2</h1><h1 id="https-github-com-revir-need-more-share2"><a href="#https-github-com-revir-need-more-share2" class="headerlink" title="https://github.com/revir/need-more-share2"></a><a href="https://github.com/revir/need-more-share2" target="_blank" rel="noopener">https://github.com/revir/need-more-share2</a></h1><p>  needmoreshare2_js:<br>  needmoreshare2_css:</p><h1 id="bookmark"><a href="#bookmark" class="headerlink" title="bookmark"></a>bookmark</h1><h1 id="Internal-version-1-0-0-3"><a href="#Internal-version-1-0-0-3" class="headerlink" title="Internal version: 1.0.0"></a>Internal version: 1.0.0</h1><h1 id="https-github-com-theme-next-theme-next-bookmark"><a href="#https-github-com-theme-next-theme-next-bookmark" class="headerlink" title="https://github.com/theme-next/theme-next-bookmark"></a><a href="https://github.com/theme-next/theme-next-bookmark" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-bookmark</a></h1><p>  bookmark:</p><h1 id="reading-progress"><a href="#reading-progress" class="headerlink" title="reading_progress"></a>reading_progress</h1><h1 id="Internal-version-1-0"><a href="#Internal-version-1-0" class="headerlink" title="Internal version: 1.0"></a>Internal version: 1.0</h1><h1 id="https-github-com-theme-next-theme-next-reading-progress"><a href="#https-github-com-theme-next-theme-next-reading-progress" class="headerlink" title="https://github.com/theme-next/theme-next-reading-progress"></a><a href="https://github.com/theme-next/theme-next-reading-progress" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-reading-progress</a></h1><h1 id="Example-https-cdn-jsdelivr-net-gh-theme-next-theme-next-reading-progress-1-1-reading-progress-min-js"><a href="#Example-https-cdn-jsdelivr-net-gh-theme-next-theme-next-reading-progress-1-1-reading-progress-min-js" class="headerlink" title="Example: https://cdn.jsdelivr.net/gh/theme-next/theme-next-reading-progress@1.1/reading_progress.min.js"></a>Example: <a href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-reading-progress@1.1/reading_progress.min.js" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/theme-next/theme-next-reading-progress@1.1/reading_progress.min.js</a></h1><p>  reading_progress:</p><h1 id="valine-comment"><a href="#valine-comment" class="headerlink" title="valine comment"></a>valine comment</h1><h1 id="Example-https-cdn-jsdelivr-net-npm-valine-1-1-8-dist-Valine-min-js"><a href="#Example-https-cdn-jsdelivr-net-npm-valine-1-1-8-dist-Valine-min-js" class="headerlink" title="Example: https://cdn.jsdelivr.net/npm/valine@1.1.8/dist/Valine.min.js"></a>Example: <a href="https://cdn.jsdelivr.net/npm/valine@1.1.8/dist/Valine.min.js" target="_blank" rel="noopener">https://cdn.jsdelivr.net/npm/valine@1.1.8/dist/Valine.min.js</a></h1><p>  valine:</p><h1 id="Assets"><a href="#Assets" class="headerlink" title="Assets"></a>Assets</h1><p>css: css<br>js: js<br>images: images</p><h1 id="文章末尾添加“本文结束”标记"><a href="#文章末尾添加“本文结束”标记" class="headerlink" title="文章末尾添加“本文结束”标记"></a>文章末尾添加“本文结束”标记</h1><p>passage_end_tag:<br>enabled: true</p><h1 id="Post-wordcount-display-settings-2"><a href="#Post-wordcount-display-settings-2" class="headerlink" title="Post wordcount display settings"></a>Post wordcount display settings</h1><h1 id="Dependencies-https-github-com-willin-hexo-wordcount-1"><a href="#Dependencies-https-github-com-willin-hexo-wordcount-1" class="headerlink" title="# Dependencies: https://github.com/willin/hexo-wordcount"></a># Dependencies: <a href="https://github.com/willin/hexo-wordcount" target="_blank" rel="noopener">https://github.com/willin/hexo-wordcount</a></h1><p>#</p><p>#post_wordcount: </p><h1 id="item-text-true"><a href="#item-text-true" class="headerlink" title="item_text: true"></a>item_text: true</h1><h1 id="wordcount-true"><a href="#wordcount-true" class="headerlink" title="wordcount: true"></a>wordcount: true</h1><h1 id="min2read-true"><a href="#min2read-true" class="headerlink" title="min2read: true"></a>min2read: true</h1><h1 id="totalcount-false"><a href="#totalcount-false" class="headerlink" title="totalcount: false"></a>totalcount: false</h1><h1 id="separated-meta-true"><a href="#separated-meta-true" class="headerlink" title="separated_meta: true"></a>separated_meta: true</h1><h1 id="Online-contact"><a href="#Online-contact" class="headerlink" title="Online contact"></a>Online contact</h1><p>daovoice: true<br>daovoice_app_id: 7309f5ba</p><p>xvideos:<br>  width: 100% (default)<br>  height: 100% (default)</p>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>Python2.7_Update_3.7</title>
      <link href="/2018/10/29/Python2-7-Update-3-7/"/>
      <url>/2018/10/29/Python2-7-Update-3-7/</url>
      
        <content type="html"><![CDATA[<p>Python2.x版本预计在2020年4月12日退出历史舞台，将由Python3代替Python2继续引领新的时代。<br><a id="more"></a></p><p></p><h3>系统环境：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS      :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel: :3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure><p></p><p></p><h3>安装依赖环境<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh  <span class="symbol">https:</span>/<span class="regexp">/soliton.net.cn/download</span><span class="regexp">/linux/epel</span>-release-<span class="number">7</span>-<span class="number">11</span>.noarch.rpm</span><br><span class="line">yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel libffi-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel</span><br></pre></td></tr></table></figure><p></p><p></p><h3>下载Python3.7<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget http<span class="variable">s:</span>//www.<span class="keyword">python</span>.org/ftp/<span class="keyword">python</span>/<span class="number">3.7</span>.<span class="number">0</span>/Python-<span class="number">3.7</span>.<span class="number">0</span>.tgz</span><br><span class="line"></span><br><span class="line">wget http<span class="variable">s:</span>//soliton.net.<span class="keyword">cn</span>/download/linux/Python-<span class="number">3.7</span>.<span class="number">0</span>.tgz</span><br><span class="line"></span><br><span class="line">+以上二选一</span><br></pre></td></tr></table></figure><p></p><p></p><h3>解压，编译<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tar zxf Python<span class="number">-3.7</span><span class="number">.0</span>.tgz</span><br><span class="line"></span><br><span class="line">cd Python<span class="number">-3.7</span></span><br><span class="line"></span><br><span class="line">./configure --prefix=/usr/local/python3</span><br><span class="line"></span><br><span class="line">make -j <span class="number">4</span> &amp;&amp; make install</span><br></pre></td></tr></table></figure><p></p><p></p><h3>配置环境变量<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export PATH=<span class="variable">$PATH</span><span class="symbol">:/usr/local/python3/bin</span>          <span class="comment">#临时</span></span><br><span class="line"></span><br><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line">+ 翻到最后面追加：</span><br><span class="line"></span><br><span class="line">PATH=<span class="variable">$PATH</span><span class="symbol">:/usr/local/python3/bin</span></span><br></pre></td></tr></table></figure><p></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">python</span>             <span class="selector-tag">python2</span><span class="selector-class">.7</span>          <span class="selector-tag">python3</span><span class="selector-class">.7</span>          <span class="selector-tag">python3</span><span class="selector-class">.7m</span>         <span class="selector-tag">python3-config</span>     </span><br><span class="line"><span class="selector-tag">python2</span>            <span class="selector-tag">python3</span>            <span class="selector-tag">python3</span><span class="selector-class">.7-config</span>   <span class="selector-tag">python3</span><span class="selector-class">.7m-config</span>  </span><br><span class="line"><span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span> <span class="selector-tag">-</span></span><br><span class="line"><span class="selector-tag">pip</span>      <span class="selector-tag">pip-2</span><span class="selector-class">.7</span>  <span class="selector-tag">pip3</span>     <span class="selector-tag">pip3</span><span class="selector-class">.7</span></span><br></pre></td></tr></table></figure><p></p><h3>以上即是Python3升级，保留Python2<p></p></h3></h3></h3></h3></h3></h3>]]></content>
      
      
      <categories>
          
          <category> Update </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python_Update </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Centos_install_Vsftpd</title>
      <link href="/2018/10/17/centos-install-vsftpd/"/>
      <url>/2018/10/17/centos-install-vsftpd/</url>
      
        <content type="html"><![CDATA[<p>Liunx外部文件的传输，避免不了使用FTP服务，所以现在就整理下，CentOS7环境下，FTP服务的搭建。FTP服务器需要安装vsftp服务端软件。我们知道，在建立vsftpd用户时，我们一般是在linux下建立用户useradd的方式来访问ftp，但有时我们只想提供ftp服务，而避免用户用ftp的帐号去登录linux，采用一般的方式只能是限制该用户的访问权限，但还是避免不了用户登录进linux系统，所以比较好的方法是用vsftpd的虚拟用户（virtual users）。<br><a id="more"></a></p><p></p><h3>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure><p></p><p></p><h3>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure><p></p><p></p><h3>安装vsftpd<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep vsftpd <span class="comment">#查询vsftpd是否安装</span></span><br><span class="line"></span><br><span class="line">yum <span class="keyword">install</span> -y vsftpd <span class="comment">#安装vsftpd</span></span><br><span class="line"></span><br><span class="line">yum <span class="keyword">install</span> -y psmisc net-tools systemd-devel libdb-devel perl-DBI  <span class="comment">#安装vsftpd虚拟用户配置依赖包</span></span><br><span class="line"></span><br><span class="line">systemctl start vsftpd.service <span class="comment">#启动</span></span><br><span class="line"></span><br><span class="line">systemctl enable vsftpd.service <span class="comment">#设置vsftpd开机启动</span></span><br></pre></td></tr></table></figure><p></p><p></p><h3>新建系统用户vsftpd<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd vsftpd -d <span class="regexp">/home/</span>wwwroot -s <span class="regexp">/bin/</span><span class="keyword">false</span> #用户目录为<span class="regexp">/home/</span>wwwroot, 用户登录终端设为<span class="regexp">/bin/</span><span class="keyword">false</span>(即使之不能登录系统)</span><br><span class="line"></span><br><span class="line">chown vsftpd:vsftpd <span class="regexp">/home/</span>wwwroot -R</span><br></pre></td></tr></table></figure><p></p><p></p><h3>建立虚拟用户个人Vsftp的配置文件和子账号FTP权限<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/vsftpd/vconf</span><br><span class="line"></span><br><span class="line">cd /etc/vsftpd/vconf</span><br><span class="line"></span><br><span class="line">touch web1  <span class="comment">#这里创建虚拟用户配置文件</span></span><br><span class="line"></span><br><span class="line">mkdir -p /home/wwwroot/web1/http/mydic</span><br><span class="line"></span><br><span class="line">设置FTP上传文件新增权限，最新的vsftpd要求对主目录不能有写的权限所以ftp为755，主目录下面的子目录再设置777权限  </span><br><span class="line"></span><br><span class="line">chmod -R 755 /home/wwwroot/web1/http</span><br><span class="line">chmod R 777 /home/wwwroot/web1/http/mydic</span><br><span class="line"></span><br><span class="line">vi web1 <span class="comment">#编辑用户web1配置文件，其他的跟这个配置文件类似，输入下面内容</span></span><br><span class="line"></span><br><span class="line">local_root=/home/wwwroot/web1/http/　　<span class="comment">#设置FTP账号根目录</span></span><br><span class="line">write_enable=YES</span><br><span class="line">anon_world_readable_only=NO</span><br><span class="line">anon_upload_enable=YES</span><br><span class="line">anon_mkdir_write_enable=YES</span><br><span class="line">anon_other_write_enable=YES</span><br></pre></td></tr></table></figure><p></p><p></p><h3>配置vsftp服务器<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="regexp">/etc/</span>vsftpd<span class="regexp">/vsftpd.conf /</span>etc<span class="regexp">/vsftpd/</span>vsftpd.conf-bak <span class="comment">#备份默认配置文件</span></span><br></pre></td></tr></table></figure><p></p><p></p><h3>修改vsftpd主配置文件<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">"s/anonymous_enable=YES/anonymous_enable=NO/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">"s/<span class="subst">#anon_upload_enable</span>=YES/anon_upload_enable=NO/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">"s/<span class="subst">#anon_mkdir_write_enable</span>=YES/anon_mkdir_write_enable=YES/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">"s/<span class="subst">#chown_uploads</span>=YES/chown_uploads=NO/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">"s/<span class="subst">#async_abor_enable</span>=YES/async_abor_enable=YES/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">"s/<span class="subst">#ascii_upload_enable</span>=YES/ascii_upload_enable=YES/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">"s/<span class="subst">#ascii_download_enable</span>=YES/ascii_download_enable=YES/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">"s/<span class="subst">#ftpd_banner</span>=Welcome to blah FTP service./ftpd_banner=Welcome to FTP service./g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line"></span><br><span class="line">echo -e <span class="string">"use_localtime=YES\nlisten_port=21\nchroot_local_user=YES\nidle_session_timeout=300</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">\ndata_connection_timeout=1\nguest_enable=YES\nguest_username=vsftpd  #此处要和刚刚创建的用户名一直</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">\nuser_config_dir=/etc/vsftpd/vconf\nvirtual_use_local_privs=YES</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">\npasv_min_port=10060\npasv_max_port=10090</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">\naccept_timeout=5\nconnect_timeout=1"</span> &gt;&gt; /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure><p></p><p></p><h3>配置文件说明：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">anonymous_enable</span>=<span class="literal">NO</span>  //设定不允许匿名访问</span><br><span class="line"><span class="attr">local_enable</span>=<span class="literal">YES</span>    //设定本地用户可以访问。注：如使用虚拟宿主用户，在该项目设定为<span class="literal">NO</span>的情况下所有虚拟用户将无法访问</span><br><span class="line"><span class="attr">chroot_list_enable</span>=<span class="literal">YES</span>       //使用户不能离开主目录</span><br><span class="line"><span class="attr">ascii_upload_enable</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">ascii_download_enable</span>=<span class="literal">YES</span> //设定支持ASCII模式的上传和下载功能</span><br><span class="line"><span class="attr">pam_service_name</span>=vsftpd   //PAM认证文件名。PAM将根据/etc/pam.d/vsftpd进行认证</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#以下这些是关于vsftpd虚拟用户支持的重要配置项，默认vsftpd.conf中不包含这些设定项目，需要自己手动添加</span></span><br><span class="line"></span><br><span class="line"><span class="attr">guest_enable</span>=<span class="literal">YES</span> //设定启用虚拟用户功能</span><br><span class="line"><span class="attr">guest_username</span>=vsftpd //指定虚拟用户的宿主用户，CentOS中已经有内置的ftp用户了,通过映射到vsftpd</span><br><span class="line"><span class="attr">user_config_dir</span>=/etc/vsftpd/vuser_conf //设定虚拟用户个人vsftp的CentOS FTP服务文件存放路径。存放虚拟用户个性的CentOS FTP服务文件(配置文件名=虚拟用户名)</span><br></pre></td></tr></table></figure><p></p><p></p><h3>建立虚拟用户名单文件<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim  /etc/vsftpd/virtusers</span><br><span class="line"></span><br><span class="line"><span class="addition">+编辑虚拟用户名单文件：（第一行账号，第二行密码，注意：不能使用root做用户名，系统保留）</span></span><br><span class="line"></span><br><span class="line">ceshi</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p></p><p></p><h3>生成虚拟用户数据文件<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db_load -T -t hash -f <span class="regexp">/etc/</span>vsftpd<span class="regexp">/virtusers /</span>etc<span class="regexp">/vsftpd/</span>virtusers.db</span><br><span class="line">chmod <span class="number">600</span> <span class="regexp">/etc/</span>vsftpd<span class="regexp">/virtusers.db #设定PAM验证文件，并指定对虚拟用户数据库文件进行读取</span></span><br></pre></td></tr></table></figure><p></p><p></p><h3>在/etc/pam.d/vsftpd的文件头部加入以下信息（在后面加入无效）<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="meta-keyword">/etc/</span>pam.d/vsftpd <span class="meta-keyword">/etc/</span>pam.d/vsftpdbak<span class="meta">#备份</span></span><br><span class="line"></span><br><span class="line">vi <span class="meta-keyword">/etc/</span>pam.d/vsftpd</span><br><span class="line"></span><br><span class="line">auth    sufficient <span class="meta-keyword">/lib64/</span>security/pam_userdb.so db=<span class="meta-keyword">/etc/</span>vsftpd/virtusers</span><br><span class="line">account sufficient <span class="meta-keyword">/lib64/</span>security/pam_userdb.so db=<span class="meta-keyword">/etc/</span>vsftpd/virtusers</span><br></pre></td></tr></table></figure><p></p><p><code>如果系统为32位，上面改为lib，否则配置失败</code></p><p></p><h3>重启vsftpd服务用创建的虚拟用户登录<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart vsftpd</span><br><span class="line"></span><br><span class="line">ftp localhost</span><br><span class="line"><span class="symbol">username:</span> ceshi</span><br><span class="line"><span class="symbol">password:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure><p></p><p><code>可通过  tail -f /var/log/secure 指令，查看服务器安全日志，便于分析错误问题，设置操作效果一定要仔细.....</code></p></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3>]]></content>
      
      
      <categories>
          
          <category> FTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service_vsftpd </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Centos_install_shadowsocks</title>
      <link href="/2018/10/16/Centos-install-Shadowsocks/"/>
      <url>/2018/10/16/Centos-install-Shadowsocks/</url>
      
        <content type="html"><![CDATA[<p>在国内是访问不了 <code>谷歌搜索引擎</code>,我们可以买一台云服务器，只要不是国内大陆即可，通过VPN技术进行翻墙。<br><a id="more"></a></p><p></p><h3>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure><p></p><p></p><h3>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure><p></p><p></p><h3>下载安装shadowsocks脚本并安装<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget --<span class="keyword">no</span>-check-certificate  http<span class="variable">s:</span>//soliton.net.<span class="keyword">cn</span>/download/linux/shadowsocks.<span class="keyword">sh</span> </span><br><span class="line"></span><br><span class="line">chmod +<span class="keyword">x</span> shadowsocks.<span class="keyword">sh</span></span><br><span class="line"></span><br><span class="line">./shadowsocks.<span class="keyword">sh</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> | tee shadowsocks.<span class="built_in">log</span></span><br></pre></td></tr></table></figure><p></p><p></p><h3>安装过程<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">1.请输入密码，默认密码：teddysun.com</span><br><span class="line"><span class="addition">+ Please enter password for shadowsocks-python</span></span><br><span class="line"><span class="addition">+ (Default password: teddysun.com):123456</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">- password = 123456</span></span><br><span class="line"></span><br><span class="line">2.请输入端口，默认端口17100</span><br><span class="line"><span class="addition">+ Please enter a port for shadowsocks-python [1-65535]</span></span><br><span class="line"><span class="addition">+ (Default port: 17100)::4456</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">- port = 4456</span></span><br><span class="line"></span><br><span class="line">3.选择加密方式：默认(aes-256-gcm)</span><br><span class="line"><span class="addition">+ Please select stream cipher for shadowsocks-python:</span></span><br><span class="line"><span class="addition">+ aes-256-gcm</span></span><br><span class="line"><span class="addition">+ aes-192-gcm</span></span><br><span class="line"><span class="addition">+ aes-128-gcm</span></span><br><span class="line"><span class="addition">+ aes-256-ctr</span></span><br><span class="line"><span class="addition">+ aes-192-ctr</span></span><br><span class="line"><span class="addition">+ aes-128-ctr</span></span><br><span class="line"><span class="addition">+ aes-256-cfb</span></span><br><span class="line"><span class="addition">+ aes-192-cfb</span></span><br><span class="line"><span class="addition">+ aes-128-cfb</span></span><br><span class="line"><span class="addition">+ camellia-128-cfb</span></span><br><span class="line"><span class="addition">+ camellia-192-cfb</span></span><br><span class="line"><span class="addition">+ camellia-256-cfb</span></span><br><span class="line"><span class="addition">+ chacha20-ietf-poly1305</span></span><br><span class="line"><span class="addition">+ chacha20-ietf</span></span><br><span class="line"><span class="addition">+ chacha20</span></span><br><span class="line"><span class="addition">+ rc4-md5</span></span><br><span class="line"><span class="addition">+Which cipher you'd select(Default: aes-256-gcm):7这里填数字</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">- cipher = aes-256-cfb</span></span><br><span class="line"></span><br><span class="line">4.按 Enter键进行安装 </span><br><span class="line"><span class="addition">+ Press any key to start...or Press Ctrl+C to cancel  ----&gt;Enter</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">- Loaded plugins: fastestmirror, ovl</span></span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.aliyun.com</span><br><span class="line"> * extras: mirrors.huaweicloud.com</span><br><span class="line"> * updates: mirrors.163.com</span><br><span class="line">Package python-2.7.5-69.el7_5.x86_64 already installed and latest version</span><br><span class="line">Package curl-7.29.0-46.el7.x86_64 already installed and latest version</span><br><span class="line">Package wget-1.14-15.el7_4.1.x86_64 already installed and latest version</span><br><span class="line">Resolving Dependencies</span><br><span class="line"><span class="deletion">--&gt; Running transaction check</span></span><br><span class="line">…………</span><br></pre></td></tr></table></figure><p></p><p></p><h3>安装完成，脚本提示：<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Congratulations, Shadowsocks-python server install completed!</span><br><span class="line">./shadowsocks.sh: line <span class="number">136</span>: ip: command <span class="keyword">not</span> found</span><br><span class="line">Your Server IP        :  xxx.xxx.xxx.xxx</span><br><span class="line">Your Server Port      :  <span class="number">4456</span></span><br><span class="line">Your Password         :  <span class="number">123456</span></span><br><span class="line">Your Encryption <span class="function"><span class="keyword">Method</span>:</span>  aes-<span class="number">256</span>-cfb</span><br><span class="line"></span><br><span class="line">Welcome <span class="keyword">to</span> visit:https:<span class="comment">//teddysun.com/342.html</span></span><br><span class="line">Enjoy it!</span><br></pre></td></tr></table></figure><p></p><p></p><h3>安装完成后的配置文件路径：/etc/shadowsocks.json<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>shadowsocks.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"server"</span>:<span class="string">"0.0.0.0"</span>,</span><br><span class="line">    <span class="string">"server_port"</span>:<span class="number">8520</span>,</span><br><span class="line">    <span class="string">"local_address"</span>:<span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="string">"local_port"</span>:<span class="number">4456</span>,</span><br><span class="line">    <span class="string">"password"</span>:<span class="string">"123456"</span>,</span><br><span class="line">    <span class="string">"timeout"</span>:<span class="number">300</span>,</span><br><span class="line">    <span class="string">"method"</span>:<span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="string">"fast_open"</span>:<span class="keyword">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">如果想多用户就添加：</span><br><span class="line"></span><br><span class="line"><span class="string">"password"</span>:<span class="string">"1234567"</span>,</span><br></pre></td></tr></table></figure><p></p><p></p><h3>启动shadowsocks<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">卸载 <span class="string">./shadowsocks.sh</span> uninstall </span><br><span class="line">启动：<span class="string">/etc/init.d/shadowsocks</span> start </span><br><span class="line">停止：<span class="string">/etc/init.d/shadowsocks</span> stop </span><br><span class="line">重启：<span class="string">/etc/init.d/shadowsocks</span> restart </span><br><span class="line">状态：<span class="string">/etc/init.d/shadowsocks</span> status</span><br></pre></td></tr></table></figure><p></p><p></p><h3>客户端连接<br><a href="https://soliton.net.cn/download/windwos/Shadowsocks.exe" target="_blank" rel="noopener">Shadowsocks 下载（windwos）</a><br><a href="https://soliton.net.cn/download/apk/ssr-3.4.0.6.apk" target="_blank" rel="noopener">Shadowsocks 下载（Android）</a><br><a href="https://soliton.net.cn/download/mac/ShadowsocksX-NG-R8.dmg" target="_blank" rel="noopener">Shadowsocks 下载（MAC）</a><br><img src="https://soliton.net.cn/soliton.images/shadowsocks_client.png"><p></p></h3></h3></h3></h3></h3></h3></h3></h3>]]></content>
      
      
      <categories>
          
          <category> VPN </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos </tag>
            
            <tag> Shadowsocks </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Centos7 Add a hard disk</title>
      <link href="/2018/10/09/Centos-add-a-hard-disk/"/>
      <url>/2018/10/09/Centos-add-a-hard-disk/</url>
      
        <content type="html"><![CDATA[<p>主机新增一个2G硬盘，如何在不重启的情况下格式并开机挂载！<br><a id="more"></a></p><p></p><h3>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure><p></p><p></p><h3>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure><p></p><p></p><h3>添加前操作<p></p><p><li>查看磁盘信息<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br><span class="line"></span><br><span class="line">磁盘 /dev/sda：<span class="number">85.9</span> GB, <span class="number">85899345920</span> 字节，<span class="number">167772160</span> 个扇区</span><br><span class="line">Units = 扇区 of <span class="number">1</span> * <span class="number">512</span> = <span class="number">512</span> bytes</span><br><span class="line">扇区大小(逻辑/物理)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">I/O 大小(最小/最佳)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：<span class="number">0x000946de</span></span><br><span class="line"></span><br><span class="line">   设备 Boot      Start       End       Blocks    Id  System</span><br><span class="line">/dev/sda1   *        <span class="number">2048</span>      <span class="number">411647</span>      <span class="number">204800</span>   <span class="number">83</span>  Linux</span><br><span class="line">/dev/sda2          <span class="number">411648</span>    <span class="number">33972223</span>    <span class="number">16780288</span>   <span class="number">8</span>e  Linux LVM</span><br><span class="line">/dev/sda3        <span class="number">33972224</span>   <span class="number">167772159</span>    <span class="number">66899968</span>   <span class="number">83</span>  Linux</span><br><span class="line">………………</span><br></pre></td></tr></table></figure></li></p><p></p><h3>添加一块2G硬盘<p></p><p></p><h5><code>添加后也是查看不到刚刚添加的硬盘</code><p></p><p><li>查看主机总线号并写脚本进行刷新<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ls /sys/class/scsi_host/</span><br><span class="line"></span><br><span class="line">information:</span><br><span class="line">host0  host10  host12  host14  host16  host18  host2   host21  host23  host25  host27  host29  host30  host32  host5  host7  host9</span><br><span class="line">host1  host11  host13  host15  host17  host19  host20  host22  host24  host26  host28  host3   host31  host4   host6  host8</span><br><span class="line"></span><br><span class="line">ls /sys/class/scsi_host/ | wc -l</span><br><span class="line"></span><br><span class="line">information：</span><br><span class="line">注：从0开始循环到32</span><br><span class="line">vim scsi_host.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 0 32`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"- - -"</span> &gt; /sys/class/scsi_host/host<span class="variable">$i</span>/scan</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li></p><p></p><h3>再重新来查看磁盘信息<br><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br><span class="line"></span><br><span class="line">information:</span><br><span class="line"></span><br><span class="line">磁盘 /dev/sda：85.9 GB,<span class="number"> 85899345920 </span>字节，167772160 个扇区</span><br><span class="line">Units = 扇区 of<span class="number"> 1 </span>*<span class="number"> 512 </span>=<span class="number"> 512 </span>bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 /<span class="number"> 512 </span>字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 /<span class="number"> 512 </span>字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：0x000946de</span><br><span class="line"></span><br><span class="line">   设备 Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *       <span class="number"> 2048 </span>    <span class="number"> 411647 </span>    <span class="number"> 204800 </span> <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/sda2         <span class="number"> 411648 </span>  <span class="number"> 33972223 </span>  <span class="number"> 16780288 </span>  8e  Linux LVM</span><br><span class="line">/dev/sda3       <span class="number"> 33972224 </span> <span class="number"> 167772159 </span>  <span class="number"> 66899968 </span> <span class="number"> 83 </span> Linux</span><br><span class="line"></span><br><span class="line">…………</span><br><span class="line">磁盘 /dev/sdb：2147 MB,<span class="number"> 2147483648 </span>字节，4194304 个扇区</span><br><span class="line">Units = 扇区 of<span class="number"> 1 </span>*<span class="number"> 512 </span>=<span class="number"> 512 </span>bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 /<span class="number"> 512 </span>字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 /<span class="number"> 512 </span>字节</span><br><span class="line"></span><br><span class="line">这就是刚刚添加的2G硬盘</span><br><span class="line"></span><br><span class="line">执行dmseg命令也可以查看新添加的硬盘</span><br><span class="line">dmseg | grep sdb</span><br></pre></td></tr></table></figure><p></p><p></p><h3>格式化并挂载<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sdb</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">分区号 (1-4，默认 1)：</span><br><span class="line">起始 扇区 (2048-4194303，默认为 2048)：</span><br><span class="line">将使用默认值 2048</span><br><span class="line">Last 扇区, +扇区 <span class="keyword">or</span> +size&#123;K,M,G&#125; (2048-4194303，默认为 4194303)：+2040M</span><br><span class="line">分区 1 已设置为 Linux 类型，大小设为 2 GiB</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl</span><br><span class="line"></span><br><span class="line">_________________________________________________________________________</span><br><span class="line">mkfs.ext4 /dev/sdb</span><br><span class="line">information:</span><br><span class="line">/dev/sdb1: <span class="attribute">UUID</span>=<span class="string">"d3f57d6d-3820-489a-a82e-eb573249b99e"</span> <span class="attribute">TYPE</span>=<span class="string">"ext4"</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir /zabbix</span><br><span class="line">vim /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="attribute">UUID</span>=d3f57d6d-3820-489a-a82e-eb573249b99e  /zabbix  ext4 defaults 0 0</span><br><span class="line"><span class="attribute">UUID</span>=sdb1分区， /<span class="attribute">zabbix</span>=挂载目录， <span class="attribute">ext4</span>=分区格式  <span class="attribute">defualts</span>=使用文件系统的默认挂载参数    <span class="attribute">0</span>=忽略检查  <span class="attribute">0</span>=不检查</span><br><span class="line"></span><br><span class="line">mount -a #挂载</span><br></pre></td></tr></table></figure><p></p><p></p><h3>查看挂载<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df -h </span><br><span class="line">/dev/sda3               <span class="number">63</span>G  <span class="number">4.9</span>G   <span class="number">55</span>G    <span class="number">9</span>% /</span><br><span class="line">devtmpfs               <span class="number">1.9</span>G     <span class="number">0</span>  <span class="number">1.9</span>G    <span class="number">0</span>% /dev</span><br><span class="line">tmpfs                  <span class="number">1.9</span>G  <span class="number">140</span>K  <span class="number">1.9</span>G    <span class="number">1</span>% /dev/shm</span><br><span class="line">tmpfs                  <span class="number">1.9</span>G  <span class="number">9.0</span>M  <span class="number">1.9</span>G    <span class="number">1</span>% /run</span><br><span class="line">tmpfs                  <span class="number">1.9</span>G     <span class="number">0</span>  <span class="number">1.9</span>G    <span class="number">0</span>% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/rhel-home   <span class="number">10</span>G   <span class="number">33</span>M   <span class="number">10</span>G    <span class="number">1</span>% /home</span><br><span class="line">/dev/sda1              <span class="number">197</span>M  <span class="number">147</span>M   <span class="number">51</span>M   <span class="number">75</span>% /boot</span><br><span class="line">tmpfs                  <span class="number">378</span>M   <span class="number">36</span>K  <span class="number">378</span>M    <span class="number">1</span>% /run/user/<span class="number">0</span></span><br><span class="line">/dev/sr0               <span class="number">3.8</span>G  <span class="number">3.8</span>G     <span class="number">0</span>  <span class="number">100</span>% /mnt</span><br><span class="line">/dev/sdb1              <span class="number">2.0</span>G  <span class="number">6.0</span>M  <span class="number">1.9</span>G    <span class="number">1</span>% /zabbix</span><br></pre></td></tr></table></figure><p></p></h3></h3></h3></h5></h3></h3></h3></h3>]]></content>
      
      
      <categories>
          
          <category> Disk </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos7 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sphinx+coreseek</title>
      <link href="/2018/10/09/sphinx-coreseek/"/>
      <url>/2018/10/09/sphinx-coreseek/</url>
      
        <content type="html"><![CDATA[<p>sphinx是国外的一款搜索软件,coreseek是在sphinx的基础上，增加了中文分词功能，换句话说，就是支持了中文。<br><a id="more"></a></p><p></p><h3>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure><p></p><p></p><h3>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure><p></p><p></p><h3>创建软件目录<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">mkdir</span> -p /<span class="class"><span class="keyword">data</span>/soft</span></span><br><span class="line"><span class="title">cd</span> /<span class="class"><span class="keyword">data</span>/soft</span></span><br></pre></td></tr></table></figure><p></p><p></p><h3>安装服务和依赖包并启动服务设置开机自启<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> httpd php php-devel php-rpm php-mysql mysql  mysql-<span class="keyword">server</span> mysql-devel libtool make gcc gcc-c++ lrzsz</span><br><span class="line"></span><br><span class="line">systemctl <span class="keyword">start</span> httpd</span><br><span class="line">systemctl <span class="keyword">enable</span>  httpd</span><br><span class="line">systemctl <span class="keyword">start</span> mysqld </span><br><span class="line">systemctl <span class="keyword">start</span> mariadb</span><br><span class="line">systemctl <span class="keyword">enable</span> mariadb</span><br><span class="line">systemctl <span class="keyword">start</span> php-fpm</span><br><span class="line">systemctl <span class="keyword">enable</span> php-fpm</span><br></pre></td></tr></table></figure><p></p><p></p><h3>下载 coreseek ， sphinx 编译安装包<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="regexp">//</span>files.opstool.com<span class="regexp">/man/</span>coreseek-<span class="number">4.1</span>-beta.tar.gz</span><br><span class="line">wget http:<span class="regexp">//</span>pecl.php.net<span class="regexp">/get/</span>sphinx-<span class="number">1.3</span>.<span class="number">0</span>.tgz</span><br></pre></td></tr></table></figure><p></p><p></p><h3>开始搭建coreseek+sphinx<p></p><p><li>安装mmseg3<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf coreseek<span class="number">-4.1</span>-beta.tar.gz</span><br><span class="line">cd coreseek<span class="number">-4.1</span>-beta/</span><br><span class="line">cd coreseek<span class="number">-4.1</span>-beta/mmseg<span class="number">-3.2</span><span class="number">.14</span></span><br><span class="line">cd mmseg<span class="number">-3.2</span><span class="number">.14</span>/</span><br><span class="line">./bootstrap </span><br><span class="line">./configure --prefix=/usr/local/mmseg3 </span><br><span class="line">make </span><br><span class="line">make install</span><br></pre></td></tr></table></figure></li></p><p></p><h3>安装coreseek<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">yum -y install expat-devel</span><br><span class="line"><span class="built_in">cd</span> ../csft-4.1/</span><br><span class="line">vim src/sphinxexpr.cpp</span><br><span class="line"> </span><br><span class="line">将文件中的T val = ExprEval ( this-&gt;m_pArg, tMatch ) </span><br><span class="line">都修改为    T val = this-&gt;ExprEval ( this-&gt;m_pArg, tMatch ),总共有三处</span><br><span class="line"></span><br><span class="line">vim buildconf.sh </span><br><span class="line">在&amp;&amp; aclocal \   下添加一行 </span><br><span class="line">&amp;&amp; automake --add-missing \</span><br><span class="line"></span><br><span class="line">配置文件：</span><br><span class="line"><span class="meta">#! /bin/sh</span></span><br><span class="line">autoheader \</span><br><span class="line">&amp;&amp; aclocal \</span><br><span class="line">&amp;&amp; automake --add-missing \</span><br><span class="line">&amp;&amp; automake --foreign \</span><br><span class="line">&amp;&amp; autoconf</span><br><span class="line"></span><br><span class="line">vim ./configure.ac </span><br><span class="line"></span><br><span class="line">找到    ：AM_INIT_AUTOMAKE([-Wall -Werror foreign])</span><br><span class="line">修改为: AM_INIT_AUTOMAKE([-Wall foreign])</span><br></pre></td></tr></table></figure><p></p><p></p><h3>生成configure 文件并开始编译安装<br><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sh buildconf.sh </span><br><span class="line">./configure --prefix=/usr/<span class="keyword">local</span>/coreseek --without-unixodbc --<span class="keyword">with</span>-mmseg --<span class="keyword">with</span>-mmseg-includes=/usr/<span class="keyword">local</span>/mmseg3/<span class="keyword">include</span>/mmseg/ --<span class="keyword">with</span>-mmseg-libs=/usr/<span class="keyword">local</span>/mmseg3/lib/ --<span class="keyword">with</span>-mysql</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p></p><p></p><h3>#如果在编译过程中遇到了报错：error: cannot find input file: src/Makefile.in<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">解决办法：</span><br><span class="line">aclocal</span><br><span class="line">libtoolize --force</span><br><span class="line">automake --<span class="keyword">add</span><span class="bash">-missing</span></span><br><span class="line"><span class="bash">autoconf</span></span><br><span class="line"><span class="bash">autoheader</span></span><br><span class="line"><span class="bash">make clean</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">以上每行为一条命令，执行后即可重新编译。</span></span><br></pre></td></tr></table></figure><p></p><p></p><h3>命令行执行mmseg分词<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">cd ../testpack/</span><br><span class="line">cat var/test/test.xml </span><br><span class="line"></span><br><span class="line">information:</span><br><span class="line">  返回的都是中英文结合。</span><br><span class="line">  </span><br><span class="line">/usr/<span class="built_in">local</span>/mmseg3/bin/mmseg -d /usr/<span class="built_in">local</span>/mmseg3/etc/</span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/coreseek/bin/indexer -c etc/csft.conf <span class="comment">--all</span></span><br><span class="line">information：</span><br><span class="line">Coreseek Fulltext <span class="number">4.1</span> [ Sphinx <span class="number">2.0</span><span class="number">.2</span>-dev (r2922)]</span><br><span class="line">Copyright (c) <span class="number">2007</span><span class="number">-2011</span>,</span><br><span class="line">Beijing Choice Software Technologies Inc (<span class="keyword">http</span>://www.coreseek.com)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">using</span> config <span class="built_in">file</span> <span class="string">'etc/csft.conf'</span>...</span><br><span class="line">indexing index <span class="string">'xml'</span>...</span><br><span class="line">collected <span class="number">3</span> docs, <span class="number">0.0</span> MB</span><br><span class="line">sorted <span class="number">0.0</span> Mhits, <span class="number">100.0</span>% done</span><br><span class="line">total <span class="number">3</span> docs, <span class="number">7585</span> <span class="keyword">bytes</span></span><br><span class="line">total <span class="number">0.004</span> <span class="built_in">sec</span>, <span class="number">1860436</span> <span class="keyword">bytes</span>/<span class="built_in">sec</span>, <span class="number">735.83</span> docs/<span class="built_in">sec</span></span><br><span class="line">total <span class="number">3</span> reads, <span class="number">0.000</span> <span class="built_in">sec</span>, <span class="number">2.8</span> kb/call <span class="built_in">avg</span>, <span class="number">0.0</span> msec/call <span class="built_in">avg</span></span><br><span class="line">total <span class="number">9</span> writes, <span class="number">0.000</span> <span class="built_in">sec</span>, <span class="number">2.2</span> kb/call <span class="built_in">avg</span>, <span class="number">0.0</span> msec/call <span class="built_in">avg</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/coreseek/bin/search -c etc/csft.conf  网络搜索</span><br><span class="line">information:</span><br><span class="line">Coreseek Fulltext <span class="number">4.1</span> [ Sphinx <span class="number">2.0</span><span class="number">.2</span>-dev (r2922)]</span><br><span class="line">Copyright (c) <span class="number">2007</span><span class="number">-2011</span>,</span><br><span class="line">Beijing Choice Software Technologies Inc (<span class="keyword">http</span>://www.coreseek.com)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">using</span> config <span class="built_in">file</span> <span class="string">'etc/csft.conf'</span>...</span><br><span class="line">index <span class="string">'xml'</span>: query <span class="string">'网络搜索 '</span>: returned <span class="number">1</span> matches <span class="keyword">of</span> <span class="number">1</span> total <span class="keyword">in</span> <span class="number">0.000</span> <span class="built_in">sec</span></span><br><span class="line"></span><br><span class="line">displaying matches:</span><br><span class="line"><span class="number">1.</span> document=<span class="number">1</span>, weight=<span class="number">1590</span>, published=Thu Apr  <span class="number">1</span> <span class="number">22</span>:<span class="number">20</span>:<span class="number">07</span> <span class="number">2010</span>, author_id=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">words</span>:</span><br><span class="line"><span class="number">1.</span> <span class="string">'网络'</span>: <span class="number">1</span> documents, <span class="number">1</span> hits</span><br><span class="line"><span class="number">2.</span> <span class="string">'搜索'</span>: <span class="number">2</span> documents, <span class="number">5</span> hits</span><br></pre></td></tr></table></figure><p></p><p></p><h3>sphinx扩展安装<p></p><p><li>安装libsphinxclient<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">cd ..<span class="regexp">/csft-4.1/</span>api<span class="regexp">/libsphinxclient/</span></span><br><span class="line">.<span class="regexp">/configure --prefix=/</span>usr<span class="regexp">/local/</span>sphinxclient</span><br><span class="line">-报错：</span><br><span class="line">config.<span class="string">status:</span> <span class="string">error:</span> cannot find input <span class="string">file:</span> Makefile.<span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">+解决方案：</span><br><span class="line">aclocal</span><br><span class="line">libtoolize --force</span><br><span class="line">automake --add-missing</span><br><span class="line">autoconf</span><br><span class="line">autoheader</span><br><span class="line">make clean</span><br><span class="line"></span><br><span class="line">重新执行：</span><br><span class="line">.<span class="regexp">/configure --prefix=/</span>usr<span class="regexp">/local/</span>sphinxclient</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></li></p><p></p><h3>安装sphinx的PHP的扩展<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/data/</span>soft</span><br><span class="line">tar -zxvf sphinx<span class="number">-1.3</span><span class="number">.0</span>.tgz</span><br><span class="line">cd sphinx<span class="number">-1.3</span><span class="number">.0</span></span><br><span class="line">phpize</span><br><span class="line">.<span class="regexp">/configure --with-php-config=/</span>usr<span class="regexp">/bin/</span>php-config --with-sphinx=<span class="regexp">/usr/</span>local/sphinxclient</span><br><span class="line">make </span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="string">information:</span></span><br><span class="line">Installing shared <span class="string">extensions:</span>     <span class="regexp">/usr/</span>lib64<span class="regexp">/php/</span>modules/</span><br></pre></td></tr></table></figure><p></p><p></p><h3>修改php.ini添加扩展<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">直接写入到最后即可：</span><br><span class="line"></span><br><span class="line">[Extension]</span><br><span class="line">Extension_dir = <span class="string">"/usr/lib64/php/modules/"</span></span><br><span class="line">Extension = sphinx.so</span><br></pre></td></tr></table></figure><p></p><p></p><h3>查看sphinx扩展是否添加成功<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">重启php-fpm 服务</span><br><span class="line">systemctl restart php-fpm</span><br><span class="line"></span><br><span class="line">php -m <span class="string">| grep sphinx</span></span><br></pre></td></tr></table></figure><p></p><p></p><h3>创建库并导入表(上传sql表)<br><code>需要sql表的私聊我QQ即可,记得打上备注。</code><br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">cd /root/</span><br><span class="line"></span><br><span class="line">由于第一次登陆需要修改密码：</span><br><span class="line">mysqladmin -uroot -h127.0.0.1 password <span class="string">"W@k$!%hz"</span></span><br><span class="line"></span><br><span class="line">mysql -uroot -h127.0.0.1 -p'W<span class="meta">@k$!%hz'</span></span><br><span class="line">mariadb&gt; create database sphinx;</span><br><span class="line">mariadb&gt; use sphinx;</span><br><span class="line">mariadb&gt; source jt_news.sql;</span><br><span class="line">mariadb&gt; desc jt_news;</span><br><span class="line">+-------------+-----------------------+------+-----+---------+----------------+</span><br><span class="line">|<span class="string"> Field       </span>|<span class="string"> Type                  </span>|<span class="string"> Null </span>|<span class="string"> Key </span>|<span class="string"> Default </span>|<span class="string"> Extra          </span>|</span><br><span class="line">+-------------+-----------------------+------+-----+---------+----------------+</span><br><span class="line">|<span class="string"> id          </span>|<span class="string"> mediumint(8) unsigned </span>|<span class="string"> NO   </span>|<span class="string"> PRI </span>|<span class="string"> NULL    </span>|<span class="string"> auto_increment </span>|</span><br><span class="line">|<span class="string"> moid        </span>|<span class="string"> tinyint(2) unsigned   </span>|<span class="string"> NO   </span>|<span class="string"> MUL </span>|<span class="string"> 0       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> cat_id      </span>|<span class="string"> smallint(5) unsigned  </span>|<span class="string"> NO   </span>|<span class="string"> MUL </span>|<span class="string"> 0       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> title       </span>|<span class="string"> varchar(80)           </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string">         </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> author      </span>|<span class="string"> varchar(255)          </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string"> NULL    </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> source      </span>|<span class="string"> varchar(255)          </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string"> NULL    </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> img_arr     </span>|<span class="string"> varchar(500)          </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string"> NULL    </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> titlepic    </span>|<span class="string"> varchar(500)          </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string">         </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> is_good     </span>|<span class="string"> tinyint(1) unsigned   </span>|<span class="string"> NO   </span>|<span class="string"> MUL </span>|<span class="string"> 0       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> is_first    </span>|<span class="string"> tinyint(1) unsigned   </span>|<span class="string"> NO   </span>|<span class="string"> MUL </span>|<span class="string"> 0       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> is_top      </span>|<span class="string"> tinyint(1) unsigned   </span>|<span class="string"> NO   </span>|<span class="string"> MUL </span>|<span class="string"> 0       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> keywords    </span>|<span class="string"> char(40)              </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string">         </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> smalltext   </span>|<span class="string"> varchar(256)          </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string"> NULL    </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> is_link     </span>|<span class="string"> varchar(255)          </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string">         </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> username    </span>|<span class="string"> char(20)              </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string">         </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> add_time    </span>|<span class="string"> int(10) unsigned      </span>|<span class="string"> NO   </span>|<span class="string"> MUL </span>|<span class="string"> 0       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> update_time </span>|<span class="string"> int(10) unsigned      </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string"> 0       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> onclick     </span>|<span class="string"> int(10) unsigned      </span>|<span class="string"> NO   </span>|<span class="string"> MUL </span>|<span class="string"> 0       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> comment_num </span>|<span class="string"> int(10)               </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string"> NULL    </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> is_check    </span>|<span class="string"> tinyint(2) unsigned   </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string"> 1       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> is_push     </span>|<span class="string"> tinyint(1)            </span>|<span class="string"> NO   </span>|<span class="string"> MUL </span>|<span class="string"> 0       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> video_type  </span>|<span class="string"> varchar(20)           </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string">         </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> video_vid   </span>|<span class="string"> varchar(255)          </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string">         </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string"> video_url   </span>|<span class="string"> varchar(255)          </span>|<span class="string"> NO   </span>|<span class="string">     </span>|<span class="string">         </span>|<span class="string">                </span>|</span><br><span class="line">+-------------+-----------------------+------+-----+---------+----------------+</span><br></pre></td></tr></table></figure><p></p><p></p><h3>创建实例配置文件<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/coreseek/etc/sphinx.conf</span><br><span class="line">source zt<span class="comment">#数据源</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">type</span>                    = mysql<span class="comment">#数据库类型</span></span><br><span class="line">    <span class="attr">sql_host</span>                = <span class="number">127.0</span>.<span class="number">0.1</span><span class="comment">#登陆主机</span></span><br><span class="line">    <span class="attr">sql_user</span>                = root<span class="comment">#登陆用户</span></span><br><span class="line">    <span class="attr">sql_pass</span>                = W@k$!%hz<span class="comment">#登陆密码</span></span><br><span class="line">    <span class="attr">sql_db</span>                  = sphinx<span class="comment">#查询的库</span></span><br><span class="line">    <span class="attr">sql_port</span>                = <span class="number">3306</span><span class="comment">#数据库端口</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">sql_query_pre</span>           = SET NAMES utf8</span><br><span class="line"><span class="attr">sql_query</span>               = SELECT id,moid,is_good,smalltext,video_url,title,video_vid,keywords,update_time FROM jt_news</span><br><span class="line"></span><br><span class="line">    <span class="attr">sql_attr_uint</span>           = id</span><br><span class="line">    <span class="attr">sql_field_string</span>        = moid</span><br><span class="line">    <span class="attr">sql_field_string</span>        = is_good</span><br><span class="line">    <span class="attr">sql_attr_string</span>         = smalltext</span><br><span class="line">    <span class="attr">sql_attr_string</span>         = video_url</span><br><span class="line">    <span class="attr">sql_field_string</span>        = title</span><br><span class="line">    <span class="attr">sql_field_string</span>        = video_vid</span><br><span class="line">    <span class="attr">sql_field_string</span>        = keywords</span><br><span class="line">    <span class="attr">sql_attr_bigint</span>         = update_time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#命令行展示</span></span><br><span class="line">    <span class="attr">sql_query_info_pre</span>      = SET NAMES utf8                             </span><br><span class="line">    <span class="attr">sql_query_info</span>          = SELECT * FROM jt_news WHERE <span class="attr">id=$id</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#索引源</span></span><br><span class="line">index zt</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">source</span>                  = zt</span><br><span class="line">    <span class="attr">path</span>                    = /usr/local/coreseek/var/data/zt</span><br><span class="line">    <span class="attr">docinfo</span>                 = extern</span><br><span class="line">    <span class="attr">mlock</span>                   = <span class="number">0</span></span><br><span class="line">    <span class="attr">morphology</span>              = none</span><br><span class="line">    <span class="attr">min_word_len</span>            = <span class="number">1</span></span><br><span class="line">    <span class="attr">html_strip</span>              = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">charset_dictpath</span>        = /usr/local/mmseg3/etc/</span><br><span class="line">    <span class="attr">charset_type</span>            = zh_cn.utf-<span class="number">8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#全局index定义</span></span><br><span class="line">indexer</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">mem_limit</span>         = <span class="number">512</span>M</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#searchd服务定义</span></span><br><span class="line">searchd</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">listen</span>            = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">9312</span></span><br><span class="line">    <span class="attr">read_timeout</span>      = <span class="number">5</span></span><br><span class="line">    <span class="attr">max_children</span>      = <span class="number">30</span></span><br><span class="line">    <span class="attr">max_matches</span>       = <span class="number">1000</span></span><br><span class="line">    <span class="attr">seamless_rotate</span>   = <span class="number">0</span></span><br><span class="line">    <span class="attr">preopen_indexes</span>   = <span class="number">0</span></span><br><span class="line">    <span class="attr">unlink_old</span>        = <span class="number">1</span></span><br><span class="line">    <span class="attr">pid_file</span>          = /usr/local/coreseek/var/log/searchd_mysql.pid </span><br><span class="line">    <span class="attr">log</span>           = /usr/local/coreseek/var/log/searchd_mysql.log        </span><br><span class="line">    <span class="attr">query_log</span>         = /usr/local/coreseek/var/log/query_mysql.log </span><br><span class="line">    <span class="attr">compat_sphinxql_magics</span> = <span class="number">0</span>                              </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><h3>建立索引<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/coreseek/bin/indexer -c /usr/<span class="built_in">local</span>/coreseek/etc/sphinx.conf <span class="comment">--all</span></span><br><span class="line"></span><br><span class="line">information:</span><br><span class="line"></span><br><span class="line">Coreseek Fulltext <span class="number">4.1</span> [ Sphinx <span class="number">2.0</span><span class="number">.2</span>-dev (r2922)]</span><br><span class="line">Copyright (c) <span class="number">2007</span><span class="number">-2011</span>,</span><br><span class="line">Beijing Choice Software Technologies Inc (<span class="keyword">http</span>://www.coreseek.com)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">using</span> config <span class="built_in">file</span> <span class="string">'/usr/local/coreseek/etc/sphinx.conf'</span>...</span><br><span class="line">indexing index <span class="string">'zt'</span>...</span><br><span class="line">WARNING: attribute <span class="string">'id'</span> <span class="keyword">not</span> found - IGNORING</span><br><span class="line">collected <span class="number">142022</span> docs, <span class="number">12.7</span> MB</span><br><span class="line">sorted <span class="number">3.0</span> Mhits, <span class="number">100.0</span>% done</span><br><span class="line">total <span class="number">142022</span> docs, <span class="number">12652631</span> <span class="keyword">bytes</span></span><br><span class="line">total <span class="number">4.540</span> <span class="built_in">sec</span>, <span class="number">2786362</span> <span class="keyword">bytes</span>/<span class="built_in">sec</span>, <span class="number">31276.08</span> docs/<span class="built_in">sec</span></span><br><span class="line">total <span class="number">3</span> reads, <span class="number">0.006</span> <span class="built_in">sec</span>, <span class="number">7813.4</span> kb/call <span class="built_in">avg</span>, <span class="number">2.0</span> msec/call <span class="built_in">avg</span></span><br><span class="line">total <span class="number">372</span> writes, <span class="number">0.111</span> <span class="built_in">sec</span>, <span class="number">348.0</span> kb/call <span class="built_in">avg</span>, <span class="number">0.2</span> msec/call <span class="built_in">avg</span></span><br></pre></td></tr></table></figure><p></p><p></p><h3>搜索<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">打印出前<span class="number">10</span>行：</span><br><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/coreseek/</span>bin<span class="regexp">/search -c /</span>usr<span class="regexp">/local/</span>coreseek<span class="regexp">/etc/</span>sphinx.conf 美国  | head <span class="number">-10</span></span><br><span class="line"></span><br><span class="line">information：</span><br><span class="line">Coreseek Fulltext <span class="number">4.1</span> [ Sphinx <span class="number">2.0</span><span class="number">.2</span>-dev (r2922)]</span><br><span class="line">Copyright (c) <span class="number">2007</span><span class="number">-2011</span>,</span><br><span class="line">Beijing Choice Software Technologies Inc (<span class="string">http:</span><span class="comment">//www.coreseek.com)</span></span><br><span class="line"></span><br><span class="line"> using config file <span class="string">'/usr/local/coreseek/etc/sphinx.conf'</span>...</span><br><span class="line">index <span class="string">'zt'</span>: query <span class="string">'美国 '</span>: returned <span class="number">1000</span> matches of <span class="number">2362</span> total <span class="keyword">in</span> <span class="number">0.000</span> sec</span><br><span class="line"></span><br><span class="line">displaying <span class="string">matches:</span></span><br><span class="line"><span class="number">1.</span> document=<span class="number">998030</span>, weight=<span class="number">2632</span>, moid=<span class="number">0</span>, is_good=<span class="number">0</span>, smalltext=          海外网<span class="number">2</span>月<span class="number">9</span>日电 据美联社报道，美国参议院将在午夜前休会，目前未就短期支出法案进行投票，美国政府将确定停摆。此前据路透社消息，当地时间<span class="number">8</span>日，美国行政管理和预算局（OMB）表示，如果在午夜之间没有通过拨款法案，美国政府恐将再次关门。另据美国《世界日报》早前消息，美国国会参议院<span class="number">7</span>日达成两党预算协议，并将于<span class="number">8</span>日表决。若能通过，不仅联邦政府<span class="number">9</span>日起不会再度关门，未来一年多还不必担心政府债务违约。, video_url=, title=一个月内第二次！美国联邦政府再次陷入停摆, video_vid=, keywords=美国政府,美国国会参议院,美国联邦政府, update_time=<span class="number">0</span></span><br><span class="line">id=<span class="number">998030</span></span><br></pre></td></tr></table></figure><p></p><p></p><h3>添加计划任务<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/var/</span>spool<span class="regexp">/cron/</span>root</span><br><span class="line"></span><br><span class="line"><span class="number">00</span> <span class="number">03</span><span class="regexp">/* * * * /u</span>sr<span class="regexp">/local/</span>coreseek<span class="regexp">/bin/i</span>ndexer -c <span class="regexp">/usr/</span>local<span class="regexp">/coreseek/</span>etc<span class="regexp">/sphinx.conf --all –rotate</span></span><br></pre></td></tr></table></figure><p></p></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3></h3>]]></content>
      
      
      <categories>
          
          <category> sphinx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sphinx </tag>
            
            <tag> coreseek </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker-command</title>
      <link href="/2018/10/08/docker-command/"/>
      <url>/2018/10/08/docker-command/</url>
      
        <content type="html"><![CDATA[<p>Docker 非常适合开发使用想要环境基本直接拉取即可，快捷方便。<br><a id="more"></a></p><p>我用的是windwos安装的Docker。(DockerToolbox 安装包)</p><p><a href="https://soliton.net.cn/download/windwos/Docker.exe" target="_blank" rel="noopener">docker for windwos 下载</a><br><a href="https://soliton.net.cn/download/windwos/DockerToolbox.exe" target="_blank" rel="noopener">DockerToolbox 下载</a></p><p>windwos toolbox  更换镜像源：<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker-machine ssh default<span class="comment">#进入docker 虚拟机</span></span><br><span class="line">vi /var/<span class="class"><span class="keyword">lib</span>/<span class="title">boot2docker</span>/<span class="title">profile</span><span class="comment">#添加国内源 </span></span></span><br><span class="line">--registry-mirror <span class="symbol">https:</span>/<span class="regexp">/docker.mirrors.ustc.edu.cn    #在--label provider=virtualbox的下一行添加并保存退出</span></span><br><span class="line"><span class="regexp">/etc</span><span class="regexp">/init.d/docker</span> restart<span class="comment">#重启docker 服务</span></span><br><span class="line">docker info<span class="comment">#返回的最后面会显示刚刚添加的国内源</span></span><br></pre></td></tr></table></figure></p><p>docker for windows：<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">设置（settings）<span class="comment">---</span></span><br><span class="line">Daemon<span class="comment">---</span></span><br><span class="line">Registry mirrors：（添加docker源 ）</span><br><span class="line"><span class="keyword">https</span>://docker.mirrors.ustc.edu.cn  </span><br><span class="line"><span class="comment">-- Apply(保存)  等待重启即可</span></span><br></pre></td></tr></table></figure></p><p>查看docekr 信息 ：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> <span class="literal">info</span></span><br></pre></td></tr></table></figure></p><p>查看docker虚拟机状态/虚拟机：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker-machine ls</span></span><br></pre></td></tr></table></figure></p><p>登陆docker 虚拟机:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-machine ssh <span class="built_in"> default</span>#docker用户的默认密码是   “tcuser”</span><br><span class="line">sudo -i #进入root 用户</span><br></pre></td></tr></table></figure><p>查看docker虚拟机变量：<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">docker</span>-machine env <span class="keyword">default</span></span><br></pre></td></tr></table></figure></p><p>查看docker虚拟机里的镜像:<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images/  docker <span class="keyword">image</span> <span class="keyword">ls</span></span><br></pre></td></tr></table></figure></p><p>查看当前有哪些容器：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker ps -a</span></span><br></pre></td></tr></table></figure></p><p>获取镜像：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">pull</span> <span class="selector-tag">centos</span> (获取centos 镜像)</span><br><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">search</span> <span class="selector-tag">centos</span><span class="selector-pseudo">:6.5</span>(搜索centos6.<span class="number">5</span>镜像 )</span><br><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">pull</span> <span class="selector-attr">[选项]</span> <span class="selector-attr">[Docker Registry 地址[:端口号]</span>/]仓库名<span class="selector-attr">[:标签]</span></span><br></pre></td></tr></table></figure></p><p>查看镜像、容器、数据卷所占用的空间：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker<span class="built_in"> system </span>df</span><br></pre></td></tr></table></figure></p><p>删除docker本地镜像:<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image rm [镜像<span class="number">1</span>、镜像<span class="number">2</span>]   镜像可以是长ID 和短ID，镜像名都可以</span><br></pre></td></tr></table></figure></p><p>删除所有仓库名为 centos 的镜像：<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">image</span> rm $(docker <span class="keyword">image</span> <span class="keyword">ls</span> -q centos)</span><br></pre></td></tr></table></figure></p><p>删除所有在 mongo:3.2 之前的镜像：<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">image</span> rm $(docker <span class="keyword">image</span> <span class="keyword">ls</span> -q -f before=mongo:<span class="number">3.2</span>)</span><br></pre></td></tr></table></figure></p><p>启动docker容器<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker   <span class="built_in">run</span> -<span class="keyword">it</span> <span class="comment">--name WebServer  -p 80:80  -p81:81centos /bin/bash</span></span><br><span class="line">给启动的容器起名   映射端口<span class="number">80</span>和<span class="number">81</span>centos 是镜像名解释器</span><br></pre></td></tr></table></figure></p><p>查看容器存储层改动：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker diff WebServer</span></span><br></pre></td></tr></table></figure></p><p>进入容器：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -<span class="keyword">it</span> WebServer /bin/bash</span><br></pre></td></tr></table></figure></p><p>利用容器存储层提交并生成新的镜像：<br><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">docker </span> <span class="string">commit </span> <span class="built_in">--author</span> <span class="string">"作者名"</span>  <span class="built_in">--message</span> “修改的内容” <span class="string">WebServer </span>（运行的镜像）  <span class="string">WebServer:v2 </span>（提交后的镜像名）</span><br></pre></td></tr></table></figure></p><p>上传提交OK的镜像到自己的仓库（例如你账号用户名是 dockerimages   那么的你的镜像应该是   dockerimages/xxxxx  不然上传不了）<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">docker login<span class="meta">#登陆docker账号</span></span><br><span class="line">username：dockerimages<span class="meta">#输入用户名</span></span><br><span class="line"><span class="symbol">password:</span><span class="meta">#输入密码（不显示也不会有光标移动）</span></span><br><span class="line">Login Succeeded<span class="meta">#返回信息</span></span><br><span class="line"></span><br><span class="line">docker <span class="keyword">push</span> centos<span class="meta">#上传镜像这样的会返回认证</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">errors:</span></span><br><span class="line"><span class="symbol">denied:</span> requested access to the resource is denied</span><br><span class="line"><span class="symbol">unauthorized:</span> authentication required</span><br><span class="line"></span><br><span class="line">docker <span class="keyword">push</span> dockerimages/centos <span class="meta">#这样才行（前面是用户名）</span></span><br><span class="line"></span><br><span class="line">注：在上传过程中失败可以继续上传，上传失败是正常的。</span><br></pre></td></tr></table></figure></p><p>查看镜像的历史纪录:<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">docker</span> history WebServer:<span class="built_in">v2</span></span><br></pre></td></tr></table></figure></p><p>批量删除容器:<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> ps -a | awk <span class="string">'&#123;print <span class="variable">$1</span>&#125;'</span> | xargs docker rm</span><br></pre></td></tr></table></figure></p><p>删除停止的容器:<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm $(docker ps --<span class="built_in">all</span> -q -f <span class="keyword">status</span>=exited)</span><br></pre></td></tr></table></figure></p><p>批量启动容器:<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -<span class="keyword">a</span> | awk <span class="string">'&#123;print $1&#125;'</span> | xargs docker <span class="built_in">start</span></span><br></pre></td></tr></table></figure></p><p>批量关闭容器:<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -<span class="keyword">a</span> | awk <span class="string">'&#123;print $1&#125;'</span> | xargs docker <span class="built_in">stop</span></span><br></pre></td></tr></table></figure></p><p>批量删除镜像:<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> images | awk <span class="string">'&#123;print <span class="variable">$3</span>&#125;'</span> | xargs docker rm</span><br></pre></td></tr></table></figure></p><p>删除所有未运行 Docker 容器:<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm $<span class="comment">(docker ps -a -q)</span></span><br></pre></td></tr></table></figure></p><p>挂载目录：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">docker</span> run -<span class="keyword">it </span>-v /e/docker:/<span class="meta">data</span> -p <span class="number">80</span>:<span class="number">80</span> centos <span class="keyword">bash</span></span><br><span class="line"><span class="keyword">-v </span>指定宿主机的共享目录 ，/<span class="meta">data</span> 是启动容器的时候会创建/<span class="meta">data</span> 并挂载宿主机的/e/docker目录。</span><br></pre></td></tr></table></figure></p><p>把文件系统打包tar    :文件系统:test01<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="builtin-name">export</span> test01 &gt; test01.tar</span><br></pre></td></tr></table></figure></p><p>导入文件系统：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">import</span> <span class="selector-tag">test01</span><span class="selector-class">.tar</span> <span class="selector-tag">centos</span><span class="selector-pseudo">:latest</span></span><br></pre></td></tr></table></figure></p><p>导出完整的容器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">save</span> <span class="selector-tag">mysql</span> &gt; <span class="selector-tag">mysql</span><span class="selector-class">.tar</span></span><br></pre></td></tr></table></figure></p><p>导入完整的容器<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -<span class="selector-tag">i</span>  mysql.tar</span><br></pre></td></tr></table></figure></p><h3>以上仅供参考</h3>]]></content>
      
      
      <categories>
          
          <category> Docker-常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -Docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>zabbix_monitor_Mysql</title>
      <link href="/2018/09/21/zabbix-monitor-Mysql/"/>
      <url>/2018/09/21/zabbix-monitor-Mysql/</url>
      
        <content type="html"><![CDATA[<p>利用Zabbix 监控服务利用Percona 插件监控Mysql 数据库</p><a id="more"></a><p>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure></p><p>Zabbix 利用Percona插件监控MySQL</p><p><li>被监控部署路径是:/usr/local/Zabbix</li></p><p><li>被监控主机Mysql路径：/usr/local/mysql<br>确保被监控主机没有安装percona 相关软件，有则卸载<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -<span class="keyword">qa</span> | <span class="keyword">grep</span> percona</span><br></pre></td></tr></table></figure></li></p><p>下载rpm插件：<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>soliton.net.cn<span class="regexp">/download/</span>linux<span class="regexp">/percona-zabbix-templates-1.1.6-1.noarch.rpm</span></span><br></pre></td></tr></table></figure></p><p>安装插件：<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh percona-zabbix-templates-<span class="number">1.1</span>.<span class="number">6</span>-<span class="number">1</span>.noarch.rpm</span><br><span class="line"></span><br><span class="line">Scripts are installed to /var/<span class="class"><span class="keyword">lib</span>/<span class="title">zabbix</span>/<span class="title">percona</span>/<span class="title">scripts</span></span></span><br><span class="line">Templates are installed to /var/<span class="class"><span class="keyword">lib</span>/<span class="title">zabbix</span>/<span class="title">percona</span>/<span class="title">templates</span></span></span><br></pre></td></tr></table></figure></p><p>将percona的两个脚本放到被监控的/usr/local/zabbix目录下<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /var/<span class="class"><span class="keyword">lib</span>/<span class="title">zabbix</span>/<span class="title">percona</span>/<span class="title">scripts</span>/* /<span class="title">usr</span>/<span class="title">local</span>/<span class="title">zabbix</span>/</span></span><br></pre></td></tr></table></figure></p><p>在被监控机器上将userparameter_percona_mysql.conf拷贝到zabbix_agent的对应配置目录下<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp /var/<span class="class"><span class="keyword">lib</span>/<span class="title">zabbix</span>/<span class="title">percona</span>/<span class="title">templates</span>/<span class="title">userparameter_percona_mysql</span>.<span class="title">conf</span> /<span class="title">usr</span>/<span class="title">local</span>/<span class="title">zabbix</span>/<span class="title">etc</span>/<span class="title">zabbix_agentd</span>.<span class="title">conf</span>.<span class="title">d</span>/</span></span><br><span class="line">sed -i <span class="string">'s#/var/lib/zabbix/percona/scripts/#/usr/local/zabbix/#g'</span> /usr/local/zabbix/etc/zabbix_agentd.conf.d/userparameter_percona_mysql.conf</span><br></pre></td></tr></table></figure></p><p>注意修改客户端机器的zabbix_agentd.conf文件,增加Include 把userparameter_percona_mysql.conf 所在的目录增加进去：<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cat</span> /usr/<span class="keyword">local</span>/zabbix/etc/zabbix_agentd.<span class="keyword">conf</span>|grep <span class="keyword">Include</span></span><br><span class="line"><span class="keyword">Include</span>=/usr/<span class="keyword">local</span>/zabbix/etc/zabbix_agentd.<span class="keyword">conf</span>.<span class="keyword">d</span>/</span><br></pre></td></tr></table></figure></p><p>修改mysql执行命令路径（如下脚本，可以监控到mysql的主从同步状态）<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/usr/</span>local<span class="regexp">/zabbix/</span>get_mysql_stats_wrapper.sh</span><br><span class="line">RES=`HOME=~zabbix mysql -e <span class="string">'SHOW SLAVE STATUS\G'</span> | egrep <span class="string">'(Slave_IO_Running|Slave_SQL_Running):'</span> | awk -<span class="string">F:</span> <span class="string">'&#123;print $2&#125;'</span> | tr <span class="string">'\n'</span> <span class="string">','</span>`</span><br><span class="line"></span><br><span class="line">换成：</span><br><span class="line">RES=`<span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>bin/mysql -p123456 -e <span class="string">'SHOW SLAVE STATUS\G'</span> | egrep <span class="string">'(Slave_IO_Running|Slave_SQL_Running):'</span> | awk -<span class="string">F:</span> <span class="string">'&#123;print $2&#125;'</span> | tr <span class="string">'\n'</span> <span class="string">','</span>`</span><br></pre></td></tr></table></figure></p><p>然后修改/usr/local/zabbix/ss_get_mysql_stats.php脚本，这里主要修改用户名密码：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">mysql_user = <span class="string">'mysqlz'</span>;</span></span><br><span class="line"><span class="meta">$</span><span class="bash">mysql_pass = <span class="string">'mysql@12345678'</span>;</span></span><br><span class="line"><span class="meta">$</span><span class="bash">mysql_port = 3306;</span></span><br></pre></td></tr></table></figure></p><p>授权MySQL用户<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, PROCESS, SUPER, <span class="keyword">REPLICATION</span> <span class="keyword">CLIENT</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'mysqlz'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">"mysql@12345678"</span>;</span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br></pre></td></tr></table></figure></p><p>修改被监控主机的zabbix权限，并重启zabbix_agent服务最后记得重启下zabbix_agent(重启前要保证zabbix的配置文件和监控脚本的权限正确，否则就会采集不到监控数据)<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">chown</span> -R zabbix.zabbix  /usr/<span class="keyword">local</span>/zabbix</span><br><span class="line"><span class="keyword">chmod</span> -R <span class="number">755</span> /usr/<span class="keyword">local</span>/zabbix/get*</span><br><span class="line"><span class="keyword">chmod</span> -R <span class="number">755</span> /usr/<span class="keyword">local</span>/zabbix/ss*</span><br></pre></td></tr></table></figure></p><p>另外，要添加zabbix的sudo权限<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="meta-keyword">/etc/</span>sudoers</span><br><span class="line">zabbix ALL=(ALL) NOPASSWD: <span class="meta-keyword">/sbin/</span>blockdev</span><br><span class="line"><span class="meta">#Defaults requiretty   <span class="comment">//如果有这个配置项，那么就注释掉这个。没有的话就忽略</span></span></span><br></pre></td></tr></table></figure></p><p>重启服务<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">restart</span> zabbix_agentd</span><br></pre></td></tr></table></figure></p><p>在服务器zabbix-server测试下（127.0.0.1是被服务端主机的ip地址,也可以写客户端的IP）：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/zabbix/bin/zabbix_get -s <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>  -p <span class="number">10050</span> -k <span class="string">"MySQL.Threads-connected"</span></span><br></pre></td></tr></table></figure></p><p>然后再服务端网页上把模板上传&lt;zabbix_agent_template_percona_mysql_server_ht_2.0.9-sver1.1.6.xml&gt;<br><a href="https://soliton.net.cn/download/linux/zabbix_agent_template_percona_mysql_server_ht_2.0.9-sver1.1.6.xml" target="_blank" rel="noopener">下载模板</a><br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget  https://soliton.net.cn/download/linux/zabbix_agent_template_percona_mysql_server_ht_2<span class="meta">.0</span><span class="meta">.9</span>-sver1<span class="meta">.1</span><span class="meta">.6</span>.xml</span><br></pre></td></tr></table></figure></p><p>把被监控主机添加监控MySQL模板</p><h3>利用Percona 插件监控Mysql数据库结束</h3>]]></content>
      
      
      <categories>
          
          <category> ZABBIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Monitor </tag>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>zabbix_wechat_Give an alarm</title>
      <link href="/2018/09/21/zabbix-wechat-Give-an-alarm/"/>
      <url>/2018/09/21/zabbix-wechat-Give-an-alarm/</url>
      
        <content type="html"><![CDATA[<p>zabbix配置微信告警，配置监控模板的触发器进行微信告警<br><a id="more"></a></p><h3><a href="https://www.soliton.wang/2018/09/20/Service-ZABBIX-3-4-8-install/#more">点击我查看zabbix监控服务搭建</a></h3><p>配置微信监控之前需要注册企业微信，注册也不麻烦，几分钟的事情</p><p>微信企业号申请</p><p><ul><a href="https://work.weixin.qq.com/" target="_blank" rel="noopener">微信企业号申请</a></ul><br><code>注</code>:在设置告警的时候我们需要用到 <code>CorpID</code>（企业信息），自己创建的应用（<code>AgentID，Secret</code>），还有设置哪个部门能够接受告警信息的到部门的（<code>ID</code>）号、部门的哪个成员 成员的名称，记住这五个就行了。<br><img src="https://soliton.net.cn/soliton.images/zabbixwx1.png"><br><img src="https://soliton.net.cn/soliton.images/zabbixwx2.jpg"><br><img src="https://soliton.net.cn/soliton.images/zabbixwx3.png"><br><img src="https://soliton.net.cn/soliton.images/zabbixwx4.png"></p><p>确认zabbix存放脚本目录<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> alertscripts <span class="regexp">/usr/</span>local<span class="regexp">/zabbix/</span>zabbix_server.conf</span><br><span class="line"></span><br><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/zabbix/</span>alertscripts</span><br></pre></td></tr></table></figure></p><p>下载脚本<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/usr/</span>local<span class="regexp">/zabbix/</span>alertscripts</span><br><span class="line">wget https:<span class="regexp">//</span>soliton.net.cn<span class="regexp">/download/</span>linux<span class="regexp">/wechat</span></span><br></pre></td></tr></table></figure></p><p>赋予wechat脚本权限以及更改属主属组<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">chmod</span>   <span class="number">755</span> wechat</span><br><span class="line"><span class="keyword">chown</span>  zabbix:zabbix wechat</span><br></pre></td></tr></table></figure></p><p>执行脚本测试<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">./wechat <span class="attribute">--corpid</span>=企业ID  <span class="attribute">--corpsecret</span>=Secret_ID <span class="attribute">-msg</span>=<span class="string">"发送的内容"</span> <span class="attribute">-user</span>=用户账号  <span class="attribute">-agentid</span>=1000002</span><br><span class="line"></span><br><span class="line">提示 &#123;<span class="string">"errcode"</span>:0,<span class="string">"errmsg"</span>:<span class="string">"ok"</span>,<span class="string">"invaliduser"</span>:<span class="string">""</span>&#125; ，说明成功，手机微信回收告警</span><br><span class="line">--corpid= 我们企业里面的id</span><br><span class="line">--corpsecret= 这里就是我们Secret里面的id</span><br><span class="line">-msg= 内容</span><br><span class="line"><span class="attribute">-user</span>=我们邀请用户的账号</span><br><span class="line">因为脚本是编译过的，无法进行编辑，我们可以使用./wechat -h <span class="keyword">or</span> --help 查看</span><br></pre></td></tr></table></figure></p><p>zabbix网页配置微信告警</p><p><ul>创建报警媒介</ul><br><img src="https://soliton.net.cn/soliton.images/zabbixwxpt1.png"><br><img src="https://soliton.net.cn/soliton.images/zabbixwxpt2.png"><br>创建告警用户<br><img src="https://soliton.net.cn/soliton.images/zabbixwxpt3.png"><br><img src="https://soliton.net.cn/soliton.images/zabbixwxpt4.png"><br><img src="https://soliton.net.cn/soliton.images/zabbixwxpt5.png"><br>创建告警动作<br><img src="https://soliton.net.cn/soliton.images/zabbixwxpt6.png"><br><img src="https://soliton.net.cn/soliton.images/zabbixwxpt7.png"><br><img src="https://soliton.net.cn/soliton.images/zabbixwx8.png"></p><p>测试告警服务</p><p>可以在一台电脑上关闭服务。前提是要监控关闭的服务才可行。</p><p>&lt;微信告警服务配置完成&gt;</p>]]></content>
      
      
      <categories>
          
          <category> ZABBIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Monitor </tag>
            
            <tag> WeChat </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>zabbix_agentd_install</title>
      <link href="/2018/09/21/zabbix-agentd-install/"/>
      <url>/2018/09/21/zabbix-agentd-install/</url>
      
        <content type="html"><![CDATA[<p>搭建zabbix客户端，是zabbix服务端能够监控到客户端的资源</p><a id="more"></a><p>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure></p><p>下载<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>soliton.net.cn<span class="regexp">/download/</span>linux<span class="regexp">/zabbix-3.4.8.tar.gz</span></span><br></pre></td></tr></table></figure></p><p>创建zabbix用户和组<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd zabbix</span><br><span class="line">useradd zabbix -s <span class="regexp">/sbin/</span>nologin -M -g zabbix</span><br></pre></td></tr></table></figure></p><p>解压<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-xf</span> <span class="selector-tag">zabbix-3</span><span class="selector-class">.4</span><span class="selector-class">.8</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"><span class="selector-tag">cd</span> <span class="selector-tag">zabbix-3</span><span class="selector-class">.4</span><span class="selector-class">.8</span></span><br></pre></td></tr></table></figure></p><p>安装编译工具<br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">yum</span> <span class="literal">-</span><span class="comment">y</span> <span class="comment">install</span> <span class="comment">gcc</span> <span class="comment">gcc</span><span class="literal">-</span><span class="comment">c</span><span class="literal">+</span><span class="literal">+</span> <span class="comment">make</span></span><br></pre></td></tr></table></figure></p><p>编译安装<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/<span class="keyword">local</span>/zabbix   --<span class="keyword">enable</span>-agent &amp;&amp; <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure></p><p>修改配置文件指定zabbix服务端的IP和端口<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/zabbix/</span>etc/zabbix_agentd.conf</span><br><span class="line"></span><br><span class="line">Server=<span class="number">10.10</span><span class="number">.1</span><span class="number">.100</span>                  <span class="comment">//91行</span></span><br><span class="line">ServerActive=<span class="number">10.10</span><span class="number">.1</span><span class="number">.100</span>:<span class="number">10051</span>      <span class="comment">//132行</span></span><br></pre></td></tr></table></figure></p><p>复制启动文件到  /etc/init.d/<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp misc<span class="regexp">/init.d/</span>fedora<span class="regexp">/core/</span>zabbix_agentd  <span class="regexp">/etc/i</span>nit.d<span class="regexp">/</span></span><br></pre></td></tr></table></figure></p><p>赋予启动文件权限并修改zabbix安装目录路径<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod +x <span class="meta-keyword">/etc/</span>init.d/zabbix_agentd</span><br><span class="line"></span><br><span class="line">vim <span class="meta-keyword">/etc/</span>init.d/zabbix_agentd</span><br><span class="line"></span><br><span class="line">BASEDIR=<span class="meta-keyword">/usr/</span>local/zabbix       <span class="comment">//22行</span></span><br></pre></td></tr></table></figure></p><p>将 zabbix_agentd 添加到系统服务管理<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --<span class="keyword">add</span><span class="bash"> zabbix_agentd</span></span><br></pre></td></tr></table></figure></p><p>启动服务,查看服务状态和端口<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="keyword">start</span> zabbix_agentd</span><br><span class="line">systemctl <span class="keyword">status</span> zabbix_agentd</span><br><span class="line">netstat -antpu | grep zabbix_agentd</span><br></pre></td></tr></table></figure></p><h3>zabbix_agentd客户端配置完成</h3>]]></content>
      
      
      <categories>
          
          <category> ZABBIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Monitor </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>zabbix_monitor_Oracle</title>
      <link href="/2018/09/21/zabbix-monitor-Oracle/"/>
      <url>/2018/09/21/zabbix-monitor-Oracle/</url>
      
        <content type="html"><![CDATA[<p>利用orabbix插件 监控oracle数据库<br><a id="more"></a><br>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure></p><p>安装orabbix插件</p><p><li>下载orabbix插件</li></p><p><li>安装java</li><br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="string">/ora</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">/ora</span></span><br><span class="line">wget https:<span class="string">//soliton.net.cn/download/linux/orabbix-1.2.3.zip</span></span><br><span class="line">yum -y install java</span><br></pre></td></tr></table></figure></p><p>解压orabbix文件包完就可以删除掉<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">unzip</span> <span class="selector-tag">orabbix-1</span><span class="selector-class">.2</span><span class="selector-class">.3</span><span class="selector-class">.zip</span></span><br><span class="line"><span class="selector-tag">rm</span> <span class="selector-tag">-rf</span> <span class="selector-tag">orabbix-1</span><span class="selector-class">.2</span><span class="selector-class">.3</span><span class="selector-class">.zip</span></span><br></pre></td></tr></table></figure></p><p>复制/ora/conf/config.props.sample 到当前目录改成/ora/conf/config.props<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp  <span class="regexp">/ora/</span>conf<span class="regexp">/config.props.sample /</span>ora<span class="regexp">/conf/</span>config.props</span><br></pre></td></tr></table></figure></p><p>修改配置文件：DatabaseList=oracledb  （这里和数据库服务一样）</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vim /ora/conf/config.props</span><br><span class="line"></span><br><span class="line"><span class="attr">ZabbixServerList=ZabbixServer1</span></span><br><span class="line">ZabbixServer1.<span class="attr">Address=10.10.1.100</span>     zabbix服务端<span class="number">1</span>的IP</span><br><span class="line">ZabbixServer1.<span class="attr">Port=10051</span>              zabbix服务端<span class="number">1</span>的端口</span><br><span class="line">OrabbixDaemon.<span class="attr">PidFile=./logs/orabbix.pid</span></span><br><span class="line">OrabbixDaemon.<span class="attr">Sleep=300</span></span><br><span class="line">OrabbixDaemon.<span class="attr">MaxThreadNumber=100</span></span><br><span class="line"><span class="attr">DatabaseList=oracledb</span>                     // 这里可以随意改，但下面的oracledb也要改成和这个一样的</span><br><span class="line">DatabaseList.<span class="attr">MaxActive=10</span></span><br><span class="line">DatabaseList.<span class="attr">MaxWait=100</span></span><br><span class="line">DatabaseList.<span class="attr">MaxIdle=1</span></span><br><span class="line">oracledb.<span class="attr">Url=jdbc:oracle:thin:@10.10.1.100:1521:orcl</span>        oracle服务IP和端口实例</span><br><span class="line">oracledb.<span class="attr">User=zabbix</span>                                        监控授权用户</span><br><span class="line">oracledb.<span class="attr">Password=123456</span>                                    监控授权密码</span><br><span class="line">oracledb.<span class="attr">MaxActive=10</span></span><br><span class="line">oracledb.<span class="attr">MaxWait=100</span></span><br><span class="line">oracledb.<span class="attr">MaxIdle=1</span></span><br><span class="line">oracledb.<span class="attr">QueryListFile=./conf/query.props</span></span><br></pre></td></tr></table></figure><p>登录oracle创建并授权<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">su - oracle</span><br><span class="line">sqlplus / as sysdba</span><br><span class="line">CREATE<span class="built_in"> USER </span> zabbix IDENTIFIED BY 123456<span class="built_in"> DEFAULT </span>TABLESPACE<span class="built_in"> SYSTEM </span>TEMPORARY TABLESPACE TEMP<span class="built_in"> PROFILE DEFAULT </span>ACCOUNT UNLOCK;</span><br><span class="line">GRANT CONNECT <span class="keyword">TO</span> zabbix;</span><br><span class="line">GRANT<span class="built_in"> RESOURCE </span><span class="keyword">TO</span>  zabbix;</span><br><span class="line">ALTER<span class="built_in"> USER </span> zabbix<span class="built_in"> DEFAULT </span>ROLE ALL;</span><br><span class="line">GRANT SELECT ANY TABLE <span class="keyword">TO</span> zabbix;</span><br><span class="line">GRANT CREATE SESSION <span class="keyword">TO</span>  zabbix;</span><br><span class="line">GRANT SELECT ANY DICTIONARY <span class="keyword">TO</span>  zabbix;</span><br><span class="line">GRANT UNLIMITED TABLESPACE <span class="keyword">TO</span>  zabbix;</span><br><span class="line">GRANT SELECT ANY DICTIONARY <span class="keyword">TO</span>  zabbix;</span><br><span class="line">GRANT SELECT ON V_<span class="variable">$SESSION</span> <span class="keyword">TO</span> zabbix;</span><br><span class="line">GRANT SELECT ON V_<span class="variable">$SYSTEM_EVENT</span> <span class="keyword">TO</span>  zabbix;</span><br><span class="line">GRANT SELECT ON V_<span class="variable">$EVENT_NAME</span> <span class="keyword">TO</span>  zabbix;</span><br><span class="line">GRANT SELECT ON V_<span class="variable">$RECOVERY_FILE_DEST</span> <span class="keyword">TO</span>  zabbix;</span><br></pre></td></tr></table></figure></p><p>将启动orabbix脚本拷贝到/etc/init.d/目录下，并赋予执行权限<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="regexp">/ora/i</span>nit.d<span class="regexp">/orabbix  /</span>etc<span class="regexp">/init.d/</span></span><br><span class="line">chmod +x <span class="regexp">/etc/i</span>nit.d<span class="regexp">/orabbix /</span>ora<span class="regexp">/run.sh</span></span><br></pre></td></tr></table></figure></p><p>修改启动文件路径<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="string">/etc/init.d/orabbix</span></span><br><span class="line"></span><br><span class="line">orabbix=<span class="string">/ora</span>          <span class="string">//</span> orabbix解压目录</span><br></pre></td></tr></table></figure></p><p>将orabbix添加系统服务器管理<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig  --<span class="keyword">add</span><span class="bash"> orabbix</span></span><br></pre></td></tr></table></figure></p><p>启动orabbix服务，查看服务状态，另起终端并观察orabbix日志。<br><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">systemctl start orabbix</span><br><span class="line"></span><br><span class="line">启动时出现如下警告：</span><br><span class="line">Warning: orabbix.service changed on disk. Run <span class="string">'systemctl daemon-reload'</span> <span class="keyword">to</span> <span class="built_in">reload</span> <span class="built_in">units</span>.</span><br><span class="line"></span><br><span class="line">执行：</span><br><span class="line">systemctl daemon-<span class="built_in">reload</span></span><br><span class="line"></span><br><span class="line">重新执行启动即可</span><br><span class="line"></span><br><span class="line">另起终端观察orabbix日志</span><br><span class="line">tail -f /ora/logs/orabbix.<span class="built_in">log</span>     <span class="comment">//实时</span></span><br></pre></td></tr></table></figure></p><p>登录zabbix 网页 导入模板</p><p><li>如果直接导入肯定会报错  首先要把Templates 这个群组名改掉,随意改</li><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">orabbix的模板位置：/ora/<span class="keyword">template</span>/Orabbix_export_full.xml</span><br></pre></td></tr></table></figure></p><p>接着：点击 配置—模板—-导入—选择—Orabbix_export_full.xml–导入<br>然后在oracle 主机<br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">点击配置</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">主机</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">创建主机</span><span class="literal">-</span><span class="literal">-</span><span class="comment">名称都写</span>  <span class="comment">（oracledb）</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">IP地址：10</span><span class="string">.</span><span class="comment">10</span><span class="string">.</span><span class="comment">1</span><span class="string">.</span><span class="comment">100</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">点击添加</span> <span class="comment">OK</span></span><br><span class="line"><span class="comment">再把oracle</span> <span class="comment">主机添加orabbix模板链接，然后等时间刷新就OK</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> ZABBIX  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Monitor </tag>
            
            <tag> Oracle_Orabbix </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Oracle_11g_install_Graphing</title>
      <link href="/2018/09/20/Oracle-11g-install-Graphing/"/>
      <url>/2018/09/20/Oracle-11g-install-Graphing/</url>
      
        <content type="html"><![CDATA[<p>Red Hat  7.2  静默安装oracle 11g<br><a id="more"></a><br>下载需要工具：<a href="https://soliton.net.cn/download/windwos/Xmanager5.zip" target="_blank" rel="noopener">Xmanager5</a><br>xmanager5序列号：101210-450789-147200</p><p>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>Oracle 安装包<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">linux<span class="selector-class">.x64_11gR2_database_1of2</span><span class="selector-class">.zip</span></span><br><span class="line">linux<span class="selector-class">.x64_11gR2_database_2of2</span><span class="selector-class">.zip</span></span><br></pre></td></tr></table></figure></p><p>硬件需求<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">物理内存：至少<span class="number">1</span>G</span><br><span class="line">虚拟内存：物理内存的<span class="number">2</span>倍&lt;swap&gt;</span><br><span class="line">硬盘空间：全部安装需要<span class="number">5.1</span>G</span><br><span class="line">显示器是配色：<span class="number">256</span>色</span><br><span class="line">处理器：主频最少<span class="number">550</span>MHZ</span><br></pre></td></tr></table></figure></p><p>修改主机名<br><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hostname </span> <span class="string">oracledb </span>   （临时修改主机名，重启无效）</span><br><span class="line"><span class="string">hostnamectl </span><span class="built_in">set-hostname</span> <span class="string">oracledb</span>（永久修改）</span><br></pre></td></tr></table></figure></p><p>添加主机名和IP对应<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br><span class="line"></span><br><span class="line"><span class="number">172.16</span><span class="number">.1</span><span class="number">.230</span>   oracledb</span><br></pre></td></tr></table></figure></p><p>安装Oracle前环境</p><p><li>创建用户和组</li><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">groupadd -g <span class="number">200</span> oinstall</span><br><span class="line">groupadd -g <span class="number">201</span> dba</span><br><span class="line">useradd -u <span class="number">440</span> -g oinstall -G dba oracle</span><br><span class="line">echo <span class="number">123456</span> | passwd --stdin oracle</span><br></pre></td></tr></table></figure></p><p>修改内核参数<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vi/etc/sysctl<span class="selector-class">.conf</span>    #末尾添加如下</span><br><span class="line"></span><br><span class="line">net<span class="selector-class">.ipv4</span><span class="selector-class">.ip_local_port_range</span>= <span class="number">9000</span> <span class="number">65500</span></span><br><span class="line">fs<span class="selector-class">.file-max</span> = <span class="number">6815744</span></span><br><span class="line">kernel<span class="selector-class">.shmall</span> = <span class="number">10523004</span></span><br><span class="line">kernel<span class="selector-class">.shmmax</span> = <span class="number">6465333657</span></span><br><span class="line">kernel<span class="selector-class">.shmmni</span> = <span class="number">4096</span></span><br><span class="line">kernel<span class="selector-class">.sem</span> = <span class="number">250</span> <span class="number">32000</span> <span class="number">100128</span></span><br><span class="line">net<span class="selector-class">.core</span><span class="selector-class">.rmem_default</span>=<span class="number">262144</span></span><br><span class="line">net<span class="selector-class">.core</span><span class="selector-class">.wmem_default</span>=<span class="number">262144</span></span><br><span class="line">net<span class="selector-class">.core</span><span class="selector-class">.rmem_max</span>=<span class="number">4194304</span></span><br><span class="line">net<span class="selector-class">.core</span><span class="selector-class">.wmem_max</span>=<span class="number">1048576</span></span><br><span class="line">fs<span class="selector-class">.aio-max-nr</span> = <span class="number">1048576</span></span><br><span class="line"></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure></p><p>修改系统资源限制<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/security/limits.conf</span><br><span class="line"></span><br><span class="line">oracle  soft  nproc  <span class="number">2047</span></span><br><span class="line">oracle  hard  nproc  <span class="number">16384</span></span><br><span class="line">oracle  soft  nofile  <span class="number">1024</span></span><br><span class="line">oracle  hard  nofile  <span class="number">65536</span></span><br></pre></td></tr></table></figure></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/pam.d/login</span><br><span class="line"></span><br><span class="line">Sessionrequiredpam_namespace<span class="selector-class">.so</span>  #下面添加一条pam_limits.so</span><br><span class="line">sessionrequiredpam_limits.so</span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vi/etc/profile</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$USER</span> =<span class="string">"oracle"</span> ]; then</span><br><span class="line">      <span class="keyword">if</span> [ <span class="variable">$SHELL</span> = <span class="string">"/bin/ksh"</span> ];then</span><br><span class="line">          ulimit -p 16384</span><br><span class="line">          ulimit -n 65536</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">          ulimit -u 16384 -n 65536</span><br><span class="line">      fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>创建安装目录及设置权限<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p  <span class="meta-keyword">/opt/</span>oracle<span class="meta-keyword">/app/</span></span><br><span class="line">mkdir <span class="meta-keyword">/opt/</span>oracle<span class="meta-keyword">/oradata/</span></span><br><span class="line">chmod <span class="number">755</span> <span class="meta-keyword">/opt/</span>oracle/</span><br><span class="line">chmod <span class="number">775</span> <span class="meta-keyword">/opt/</span>oracle<span class="meta-keyword">/app/</span></span><br><span class="line">chown oracle.oinstall -R <span class="meta-keyword">/opt/</span>oracle/</span><br></pre></td></tr></table></figure></p><p>设置oracle 用户的环境变量<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">su - root</span><br><span class="line"></span><br><span class="line">vim .bash_profile （最后添加）</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_BASE</span>=/opt/oracle/app</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_HOME</span>=<span class="variable">$ORACLE_BASE</span>/product/11.2.0/dbhome_1</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$ORACLE_HOME/bin</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_SID</span>=orcl</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_PID</span>=orcl</span><br><span class="line"></span><br><span class="line">source .bash_profile （立即生效）</span><br></pre></td></tr></table></figure></p><h3>上传 oracle 11G_R2 两个zip文件</h3><p>解压两个文件<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unzip /opt/linux<span class="selector-class">.x64_11gR2_database_1of2</span><span class="selector-class">.zip</span></span><br><span class="line">unzip /opt/linux<span class="selector-class">.x64_11gR2_database_2of2</span><span class="selector-class">.zip</span></span><br><span class="line">mv database  /opt/</span><br></pre></td></tr></table></figure></p><p>使所有用户都能访问图形桌面<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@oracledb</span>~]<span class="meta">#xhost +</span></span><br></pre></td></tr></table></figure></p><p>切换到oracle用户安装<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@oracledb~]<span class="comment">#su - oracle</span></span><br><span class="line">[oracle@oracledb~]$ cd <span class="regexp">/opt/database/</span></span><br></pre></td></tr></table></figure></p><p>如果安装界面出现乱码则执行(没有乱码这一步跳过)<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">LANG</span>=en_US</span><br></pre></td></tr></table></figure></p><p>不用输入Email地址，直接next<br><img src="https://soliton.net.cn/soliton.images/oracle1.png"><br>选择安装数据库软件并创建数据，也可以选择第二项仅安装数据库软件，然后next<br><img src="https://soliton.net.cn/soliton.images/oracle2.png"><br>选择服务器版本，如图，点击next<br><img src="https://soliton.net.cn/soliton.images/oracle3.png"><br>单例数据库安装，如图，点击Next<br><img src="https://soliton.net.cn/soliton.images/oracle4.png"><br>高级模式安装，如图，点击next<br><img src="https://soliton.net.cn/soliton.images/oracle5.png"><br>添加支持的语言，如图，点击next<br><img src="https://soliton.net.cn/soliton.images/oracle6.png"><br>选择要安装企业版，如图，点击next<br><img src="https://soliton.net.cn/soliton.images/oracle7png.png"><br>安装数据库目录，如图，点击next<br><img src="https://soliton.net.cn/soliton.images/oracle8.png"><br>创建详细目录，如图，点击next<br><img src="https://soliton.net.cn/soliton.images/oracle9.png"><br>选择配置类型<br><img src="https://soliton.net.cn/soliton.images/oracle10.png"><br>数据库与服务名<br><img src="https://soliton.net.cn/soliton.images/oracle11.png"><br>开启自动内存管理（如果512m太大，会出现提示，减少一些就可以），然后先不要点击next，而是点击Memory旁边的Charactor sets选项<br><img src="https://soliton.net.cn/soliton.images/oracle12.png"><br>设置默认编码为UTF8<br><img src="https://soliton.net.cn/soliton.images/oracle13.png"><br>启用oracle企业管理控制台OEM<br><img src="https://soliton.net.cn/soliton.images/oracle14.png"><br>选择数据库文件目录<br><img src="https://soliton.net.cn/soliton.images/oracle15.png"><br>自动备份设置<br><img src="https://soliton.net.cn/soliton.images/oracle16.png"><br>设置数据库用户名和密码，他是有一个密码建议的，否则会提示错误，密码建议是包含大写和小写字母，总长度不能低于8位。(1qQ.1qQ.)<br><img src="https://soliton.net.cn/soliton.images/oracle17.png"><br>授权的组<br><img src="https://soliton.net.cn/soliton.images/oracle18.png"><br>检查oracle一些安装要求，包都已经安装，直接忽略(没有可以装一下)<br><img src="https://soliton.net.cn/soliton.images/oracle19.png"><br>开始安装<br><img src="https://soliton.net.cn/soliton.images/oracle20.png"><br>安装中<br><img src="https://soliton.net.cn/soliton.images/oracle21.png"><br>数据库安装信息，点击OK<br><img src="https://soliton.net.cn/soliton.images/oracle22.png"></p><p>点击OK之后，弹出一个窗口，不要点击新出来窗口的OK，用oracle 用户执行那两条命令<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/opt/</span>oracle<span class="regexp">/oraInventory/</span>orainstRoot.sh</span><br><span class="line"><span class="regexp">/opt/</span>oracle<span class="regexp">/app/</span>product<span class="regexp">/11/</span><span class="number">2</span><span class="regexp">/0/</span>dbhome_1<span class="regexp">/root.sh</span></span><br></pre></td></tr></table></figure></p><p><code>注</code>:如果在输入命令开启数据库的时候，提示bash:XXX command not found的时候很有可能是你没有在oracle用户下输入命令行，这时候用su oracle试一下，<br>如果还是不行可以到/opt/oracle/app/product/11.2.0/dbhome_1/bin目录下，确认一下此命令是否存在！！！<br>如果开启过程出现ERROR:ORA-12162:TNS:net service name is incorrectly specified这种语句的时候，很有可能是环境变量没有配置好<br>建议到oracle用户中的.bash_profile文件里查看一下，如何找到.bash_profile</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">su - oracle</span><br><span class="line">lsnrctl start</span><br><span class="line">sqlplus  /  as  sysdba</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> startup</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> shutdown immediate  关闭数据库实例</span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash">select * from tab;   <span class="comment">#查看所有表</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash">select name from v<span class="variable">$datafile</span> <span class="comment">#查看数据库存放目录</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> show parameter service   <span class="comment">#查看服务名</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * from v<span class="variable">$instance</span>;<span class="comment">#查看实例名</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select name from v<span class="variable">$database</span>;<span class="comment">#查看数据库名</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * fromdba_users;<span class="comment">#查看所有用户信息</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select username,password from dba_users; <span class="comment">#只查询用户和密码</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * fromv<span class="variable">$pwfile_users</span>; <span class="comment">#查看具有sysdba权限的用户</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * fromdba_ustats; <span class="comment">#查看当前用户信息</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * fromuser_sys_privs <span class="comment">#查看当前用户系统权限</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * fromuser_role_privs <span class="comment">#查看当前用户角色</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * fromdba_sys_privs <span class="comment">#查看指定用户所具有的系统权限</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * fromv<span class="variable">$version</span> <span class="comment">#查看oracle版本</span></span></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * fromuser_views <span class="comment">#查看视图信息</span></span></span><br></pre></td></tr></table></figure><h3>RHEL7 图形化安装oracle结束</h3>]]></content>
      
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Oracle </tag>
            
            <tag> Xmanager5下载 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>zabbix_monitor_huawei server</title>
      <link href="/2018/09/20/zabbix-monitor-huawei-server/"/>
      <url>/2018/09/20/zabbix-monitor-huawei-server/</url>
      
        <content type="html"><![CDATA[<p>zabbix监控华为服务器的硬件是通过iBMC，iBMC系统默认支持V3版本的SNMP服务，SNMP V1和SNMP V2C由于自身机制存在安全隐患，<br>默认是不开启的。如果使用SNMP V1和SNMP V2C需要配置团体名，而用V3只需知道用户名密码及加密算法即可。<br><a id="more"></a><br>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure></p><p>我们可以现在zabbix server上安装snmpwalk，然后进行如下测试：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">snmpwalk -v <span class="number">3</span> -u root -a sha -A 'Huawei12#$' -x AES -X 'Huawei12#$'  -l authPriv  <span class="number">172.16</span><span class="number">.1</span><span class="number">.34</span> system</span><br><span class="line"></span><br><span class="line">上面一条执行不行的话执行下一条</span><br><span class="line"></span><br><span class="line">snmpwalk -v <span class="number">3</span> -c root <span class="number">172.16</span><span class="number">.1</span><span class="number">.34</span> system</span><br></pre></td></tr></table></figure></p><p>返回值：<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SNMPv2-<span class="keyword">SMI</span>::enterprises<span class="meta">.2011</span><span class="meta">.2</span><span class="meta">.235</span><span class="meta">.1</span><span class="meta">.1</span><span class="meta">.1</span><span class="meta">.1</span><span class="meta">.0</span> = INTEGER: <span class="number">1</span></span><br><span class="line">…………</span><br></pre></td></tr></table></figure></p><p>PS：snmpwalk会遍历OID下面的所有的值，所以会很多，我这里只是测试下可以连上服务器并能获取到值</p><p>在zabbix上添加要监控的主机，可以从网上下载相应的模板，进行添加。然后根据不同设备情况对item和trigger进行适度调整。</p><p>配置zabbix</p><p><ul>下载模板<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http<span class="variable">s:</span>//soliton.net.<span class="keyword">cn</span>/download/linux/huawei-<span class="keyword">pc</span>-server</span><br></pre></td></tr></table></figure></ul></p><p>导入模板</p><p><ul> 在 模板-导入，按顺序先导入valuemaps.xml、再导入templates.xml<br><img src="https://soliton.net.cn/soliton.images/zabbixhwmb1.png"><br>我们可以模板中的各监控项中根据实际情况修改SNMP OID、验证口令及私钥。<br>由于我们使用的是SNMP V3,因此我们保证验证口令及私钥正确即可；触发器及自动发现规则也是按此方式修改<br><img src="https://soliton.net.cn/soliton.images/zabbixhwmb2.png"><br>创建主机,在 模板 中，添加  Template_Huawei_PCServer  模板链接即可。<br><img src="https://soliton.net.cn/soliton.images/zabbixhwmb3.png"><br>监控最新数据<br><img src="https://soliton.net.cn/soliton.images/zabbixhwmb4.png"></ul></p><p></p><h3>监控华为服务器硬件状态结束<p></p></h3>]]></content>
      
      
      <categories>
          
          <category> ZABBIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Monitor </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>remotely_install_system</title>
      <link href="/2018/09/20/remotely-install-system/"/>
      <url>/2018/09/20/remotely-install-system/</url>
      
        <content type="html"><![CDATA[<p>HP远程安装操作系统<br><a id="more"></a><br>当初写的时候转换成PDF:<br><div class="row">    <embed src="https://soliton.net.cn/soliton.images/远程.pdf" width="100%" height="550" type="application/pdf"></div></p>]]></content>
      
      
      <categories>
          
          <category> HP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HP </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>zabbix_monitor_agentd</title>
      <link href="/2018/09/20/zabbix-monitor-agentd/"/>
      <url>/2018/09/20/zabbix-monitor-agentd/</url>
      
        <content type="html"><![CDATA[<p>利用Zabbix 监控服务监控zabbix_agentd客户端</p><a id="more"></a><p>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure></p><p>之前写过编译安装，编译安装也加了 –with-agentd参数在这里就不重新编译了<br><a href="https://www.soliton.wang/2018/09/20/Service-ZABBIX-3-4-8-install/#more">查看zabbix服务编译</a><br>复制zabbix_agentd 启动文件到/etc/init.d/<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp misc<span class="regexp">/init.d/</span>fedora<span class="regexp">/core/</span>zabbix_agentd  <span class="regexp">/etc/i</span>nit.d<span class="regexp">/</span></span><br></pre></td></tr></table></figure></p><p>赋予权限并修改zabbix编译安装路径<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod +x <span class="meta-keyword">/etc/</span>init.d/zabbix_agentd</span><br><span class="line">vim <span class="meta-keyword">/etc/</span>init.d/zabbix_agentd</span><br><span class="line"></span><br><span class="line">BASEDIR=<span class="meta-keyword">/usr/</span>local/zabbix       <span class="comment">//22行</span></span><br></pre></td></tr></table></figure></p><p>修改zabbix_agentd.conf 配置文件<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/zabbix/etc/zabbix_agentd.conf</span><br><span class="line"></span><br><span class="line">Server=127.0.0.1             // 如果不是本机就写zabbix_server 的IP</span><br><span class="line">ServerActive=127.0.0.1:10051</span><br><span class="line">Hostname=Zabbix server</span><br></pre></td></tr></table></figure></p><p>将zabbix_agentd添加系统管理服务并启动服务<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --<span class="keyword">add</span><span class="bash"> zabbix_agentd</span></span><br><span class="line"><span class="bash">systemctl start zabbix_agentd</span></span><br></pre></td></tr></table></figure></p><p>查看zabbix_agentd端口和服务状态<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">netstat</span> <span class="selector-tag">-antpu</span> | <span class="selector-tag">grep</span> <span class="selector-tag">zabbix_agentd</span></span><br><span class="line"><span class="selector-tag">tcp</span>        <span class="selector-tag">0</span>      <span class="selector-tag">0</span> <span class="selector-tag">0</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-pseudo">:10050</span>           <span class="selector-tag">0</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0</span>:*               <span class="selector-tag">LISTEN</span>      <span class="selector-tag">7833</span>/<span class="selector-tag">zabbix_agentd</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">systemctl</span> <span class="selector-tag">status</span>  <span class="selector-tag">zabbix_agentd</span></span><br><span class="line">状态  ：  <span class="selector-tag">active</span>(running)  启动成功</span><br><span class="line"></span><br><span class="line">状态有共有三种：</span><br><span class="line"><span class="selector-tag">1</span>.  <span class="selector-tag">active</span>(running)   运行正常</span><br><span class="line"><span class="selector-tag">2</span>.  <span class="selector-tag">active</span>(exited)    运行退出</span><br><span class="line"><span class="selector-tag">3</span>.  <span class="selector-tag">inactive</span> (dead)   停止服务</span><br></pre></td></tr></table></figure></p><p>登录zabbix网页管理平台</p><p><ul>点击  配置—-主机—-将zabbix server前面的方框 √ —-点击启用按钮<br><img src="https://soliton.net.cn/soliton.images/zabbixpt1.png"></ul></p><p>选择监控模板</p><p><ul>    Template App HTTP Service</ul></p><p><ul>    Template App SSH Service</ul></p><p><ul>    Template App Zabbix Server<br><img src="https://soliton.net.cn/soliton.images/zabbixpt2.png"><br><img src="https://soliton.net.cn/soliton.images/zabbixpt3.png"><br>找到上面的三个模板 √ —–翻到最下面点击选择<br><img src="https://soliton.net.cn/soliton.images/zabbixpt4.png"><br>点击  替换—更新<br><img src="https://soliton.net.cn/soliton.images/zabbixpt5.png"><br>查看监控的最新数据<br><img src="https://soliton.net.cn/soliton.images/zabbixpt6.png"><br>选择监控群组—点击选择<br><img src="https://soliton.net.cn/soliton.images/zabbixpt7.png"><br>点击应用即可查看最新数据<br><img src="https://soliton.net.cn/soliton.images/zabbixpt8.png"></ul></p><p></p><h3>zabbix服务监控客户端结束<p></p></h3>]]></content>
      
      
      <categories>
          
          <category> ZABBIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Monitor </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Service_ZABBIX_3.4.8_install</title>
      <link href="/2018/09/20/Service-ZABBIX-3-4-8-install/"/>
      <url>/2018/09/20/Service-ZABBIX-3-4-8-install/</url>
      
        <content type="html"><![CDATA[<p>利用ZABBIX监控服务监控系统服务的状态，硬件状态等多种监控方式…………</p><a id="more"></a><p>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure></p><p>软件环境</p><p><li>nginx/1.12.2：<a href="https://www.soliton.wang/2018/09/03/Service-Nginx-1-12-2-install/#more">nginx 1.12.2编译安装</a></li></p><p><li>Mysql/5.7.20：<a href="https://www.soliton.wang/2018/09/19/mysql-5-7-20-install/#more">Mysql 5.7.20编译</a></li></p><p><li>PHP/5.6.32：<a href="https://www.soliton.wang/2018/09/18/PHP-7-2-1-install/#more">PHP 7.2.1编译安装</a></li><li><br>下载zabbix压缩包<br><a href="https://soliton.net.cn/download/linux/zabbix-3.4.8.tar.gz" target="_blank" rel="noopener">zabbix-3.4.8.tar.gz</a><br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>soliton.net.cn<span class="regexp">/download/</span>linux<span class="regexp">/zabbix-3.4.8.tar.gz</span></span><br></pre></td></tr></table></figure></li></p><p>解压缩<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-zxvf</span> <span class="selector-tag">zabbix-3</span><span class="selector-class">.4</span><span class="selector-class">.8</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"><span class="selector-tag">cd</span> <span class="selector-tag">zabbix-3</span><span class="selector-class">.4</span><span class="selector-class">.8</span></span><br></pre></td></tr></table></figure></p><p>安装zabbix参数依赖<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum -y install net-snmp net-snmp-devel</span><br><span class="line">下载libevent-<span class="number">2.0</span>.<span class="number">10</span>-stable<span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line">wget http:<span class="comment">//www.monkey.org/~provos/libevent-2.0.10-stable.tar.gz</span></span><br><span class="line">tar zxvf libevent-<span class="number">2.0</span>.<span class="number">10</span>-stable<span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line">cd libevent-<span class="number">2.0</span>.<span class="number">10</span>-stable</span><br><span class="line">./configure -prefix=/usr &amp;&amp; make -j <span class="number">4</span> &amp;&amp; make install</span><br></pre></td></tr></table></figure></p><p>编译zabbix,编译安装<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">..</span></span><br><span class="line"><span class="string">./configure</span> <span class="params">--prefix=/usr/local/zabbix/</span> <span class="params">--enable-server</span> <span class="params">--enable-agent</span> <span class="params">--with-mysql</span> <span class="params">--with-net-snmp</span> <span class="params">--with-libcurl</span> <span class="params">--with-libxml2</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>创建zabbix用户和组<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd zabbix</span><br><span class="line">useradd zabbix -s <span class="regexp">/sbin/</span>nologin -M -g zabbix</span><br></pre></td></tr></table></figure></p><p>登录mysql 创建和库以及zabbix用户授权,测试zabbix用户是否可以登录<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> zabbixdb;</span><br><span class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> zabbixdb.* <span class="keyword">to</span> zabbix@<span class="string">"%"</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">"123456"</span>;</span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br><span class="line"></span><br><span class="line">mysql -uroot -hlocalhost -p123456</span><br></pre></td></tr></table></figure></p><p>将zabbix的苦导入到zabbixdb 库里<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br><span class="line">/data/zabbix-3.4.8</span><br><span class="line"><span class="built_in">cd</span> database/mysql/</span><br><span class="line">mysql -uzabbix -hlocahost -p123456</span><br><span class="line">use zabbixdb;</span><br><span class="line"><span class="built_in">source</span> schema.sql</span><br><span class="line"><span class="built_in">source</span>  images.sql</span><br><span class="line"><span class="built_in">source</span>  data.sql</span><br></pre></td></tr></table></figure></p><p>创建web项目目录,和zabbix web配置文件:<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mkdir</span> /zabbix</span><br><span class="line">vim /usr/local/nginx/conf/vhost/zabbix.conf</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">168</span>;</span><br><span class="line"><span class="attribute">server_name</span> localhost <span class="number">10.10.1.100</span>;</span><br><span class="line"><span class="attribute">index</span> index.html index.php index.html;</span><br><span class="line"><span class="attribute">root</span> /zabbix;</span><br><span class="line"><span class="attribute">location</span> /&#123;</span><br><span class="line">       <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php?<span class="variable">$args</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ ^(.+.php)(.*)$</span> &#123;</span><br><span class="line"></span><br><span class="line">       <span class="attribute">fastcgi_split_path_info</span><span class="regexp"> ^(.+.php)(.*)$</span>;</span><br><span class="line">       <span class="attribute">include</span> fastcgi.conf;</span><br><span class="line">       <span class="attribute">fastcgi_pass</span> <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">       <span class="attribute">fastcgi_index</span> index.php;</span><br><span class="line">       <span class="attribute">fastcgi_param</span> PATH_INFO <span class="variable">$fastcgi_path_info</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><a href="https://soliton.net.cn/2018/09/01/nginx-conf/" target="_blank" rel="noopener">查看nginx.conf</a></p><p>编辑zabbix_server.conf文件<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/zabbix/etc/zabbix_server.conf</span><br><span class="line"></span><br><span class="line">LogFile=/tmp/zabbix_server.log</span><br><span class="line">PidFile=/tmp/zabbix_server.pid</span><br><span class="line">DBHost=localhost</span><br><span class="line">DBName=zabbixdb</span><br><span class="line">DBUser=zabbix</span><br><span class="line">DBPassword=123456</span><br></pre></td></tr></table></figure></p><p>复制启动配置文件到  /etc/init.d/<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp misc<span class="regexp">/init.d/</span>fedora<span class="regexp">/core/</span>zabbix_server <span class="regexp">/etc/i</span>nit.d<span class="regexp">/</span></span><br></pre></td></tr></table></figure></p><p>赋予启动文件权限并修改启动文件<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod +x <span class="meta-keyword">/etc/</span>init.d/zabbix_server</span><br><span class="line">vim <span class="meta-keyword">/etc/</span>init.d/zabbix_server</span><br><span class="line"></span><br><span class="line">BASEDIR=<span class="meta-keyword">/usr/</span>local/zabbix       <span class="comment">//22行</span></span><br></pre></td></tr></table></figure></p><p>启动服务  nginx 、 php-fpm 、mysql 、zabbix<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">start</span> nginx</span><br><span class="line">systemctl <span class="built_in">start</span> php-fpm</span><br><span class="line">systemctl <span class="built_in">start</span> mysqld</span><br><span class="line"></span><br><span class="line">将zabbix_server添加到系统管理访问并启动</span><br><span class="line"></span><br><span class="line">chkconfig <span class="comment">--add zabbix_server</span></span><br><span class="line">systemctl <span class="built_in">start</span> zabbix_server</span><br></pre></td></tr></table></figure></p><p>启动报错<br><img src="https://soliton.net.cn/soliton.images/zabbixbc.png"><br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">解决办法：</span><br><span class="line"> ln -s /usr/local/mysql/<span class="class"><span class="keyword">lib</span>/<span class="title">libmysqlclient</span>.<span class="title">so</span>.18 /<span class="title">usr</span>/<span class="title">lib64</span>/</span></span><br><span class="line"></span><br><span class="line">重启zabbix_server服务</span><br><span class="line">systemctl restart zabbix_server</span><br></pre></td></tr></table></figure></p><p>重启报错<br><img src="https://soliton.net.cn/soliton.images/zabbixbc1.png"><br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">libevent</span>-2.0.<span class="title">so</span>.5  /<span class="title">usr</span>/<span class="title">lib64</span>/</span></span><br></pre></td></tr></table></figure></p><p>重启服务正常</p><p>查看服务端口<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">netstat -antpu <span class="string">| grep nginx</span></span><br><span class="line">netstat -antpu <span class="string">| grep php-fpm</span></span><br><span class="line">netstat -antpu <span class="string">| grep mysqld</span></span><br><span class="line">netstat -antpu <span class="string">| grep zabbix_server</span></span><br></pre></td></tr></table></figure></p><p>网页配置</p><p><li>访问网页— 10.10.1.100:168 — Next<br><img src="https://soliton.net.cn/soliton.images/zabbixwy1.png"></li></p><p><li>PHP选项报错,根据报错修改php.ini配置文件<br><img src="https://soliton.net.cn/soliton.images/zabbixwy2.png"><br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/php/etc/php.ini</span><br><span class="line"></span><br><span class="line">post_max_size = 16M</span><br><span class="line">max_execution_time = 300</span><br><span class="line">max_input_time = 300</span><br><span class="line">date.timezone = Asia/ShangHai</span><br><span class="line">always_popliate_raw_post_data = -1</span><br></pre></td></tr></table></figure></li></p><p>重启php-fpm服务<br><img src="https://soliton.net.cn/soliton.images/zabbixwy3.png"><br>配置数据库连接</p><p><li>注：如果连接不上把localhost 改成127.0.0.1<br><img src="https://soliton.net.cn/soliton.images/zabbixwy4.png"><br>填写zabbix server details<br><img src="https://soliton.net.cn/soliton.images/zabbixwy5.png"><br>确认填写信息<br><img src="https://soliton.net.cn/soliton.images/zabbixwy6.png"><br>安装<br><img src="https://soliton.net.cn/soliton.images/zabbixwy7.png"><br>报错不能创建文件，有两钟解决办法</li></p><p>解决办法一：<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="number">777</span> <span class="regexp">/zabbix/</span>conf</span><br><span class="line"></span><br><span class="line">刷新网页即可</span><br></pre></td></tr></table></figure></p><p>解决办法二：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Download the configuration  file   点击下载</span><br><span class="line"></span><br><span class="line">find 查找  zabbix<span class="selector-class">.conf</span><span class="selector-class">.php</span>  然后移动到 zabbix web目录下   例如在root目录下</span><br><span class="line">mv /root/zabbix<span class="selector-class">.conf</span><span class="selector-class">.php</span>   /zabbix/conf/</span><br></pre></td></tr></table></figure></p><p>点击Finish 登录进入zabbix 管理控制台<br><img src="https://soliton.net.cn/soliton.images/zabbixwy8.png"><br>默认Username：admin ，Password：zabbix<br><img src="https://soliton.net.cn/soliton.images/zabbixwy9.png"><br>修改网页编码为中文<br><img src="https://soliton.net.cn/soliton.images/zabbixwy10.png"><br>选择Language—-Chinese(zh_CN)—点击Update更新<br><img src="https://soliton.net.cn/soliton.images/zabbixwy11.png"></p>]]></content>
      
      
      <categories>
          
          <category> ZABBIX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Monitor </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Mysql-5.7.20_install</title>
      <link href="/2018/09/19/Service_Mysql-5-7-20_install/"/>
      <url>/2018/09/19/Service_Mysql-5-7-20_install/</url>
      
        <content type="html"><![CDATA[<p>Mysql 5.7.20编译安装教程<br><a id="more"></a><br>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>关闭防火墙和SELINUX<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Selinux：</span><br><span class="line">setenforce <span class="number">0</span>  宽松模式</span><br><span class="line">sed -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/selinux   <span class="meta">#永久关闭</span></span><br><span class="line"></span><br><span class="line">Firewalld：</span><br><span class="line">systemctl <span class="keyword">stop</span> firewalld</span><br><span class="line">systemctl <span class="keyword">disable</span> firewalld</span><br></pre></td></tr></table></figure></p><h3>下载安装包：</h3><br><li>下载1：<a href="https://soliton.net.cn/download/linux/mysql-5.7.20.tar.gz" target="_blank" rel="noopener">Mysql-5.7.20.tar.gz</a><br></li><li>下载2：<a href="https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.20.tar.gz" target="_blank" rel="noopener">Mysql-5.7.20.tar.gz</a><br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">下载<span class="number">1</span>：wget http<span class="variable">s:</span>//soliton.net.<span class="keyword">cn</span>/download/linux/mysql-<span class="number">5.7</span>.<span class="number">20</span>.tar.gz</span><br><span class="line">下载<span class="number">2</span>：wget http<span class="variable">s:</span>//dev.mysql.<span class="keyword">com</span>/<span class="built_in">get</span>/Downloads/MySQL-<span class="number">5.7</span>/mysql-<span class="number">5.7</span>.<span class="number">20</span>.tar.gz</span><br></pre></td></tr></table></figure><br><br>这个版本的MySQL最低要求boost的版本是1.59<br></li><li>下载1：<a href="https://nchc.dl.sourceforge.net/project/boost/boost/1.59.0/boost_1_59_0.tar.gz" target="_blank" rel="noopener">Boost-1.59</a><br></li><li>下载2：<a href="https://soliton.net.cn/download/linux/boost_1_59_0.tar.gz" target="_blank" rel="noopener">Boost-1.59</a><br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">下载<span class="number">1</span>：wget <span class="symbol">https:</span>/<span class="regexp">/nchc.dl.sourceforge.net/project</span><span class="regexp">/boost/boost</span><span class="regexp">/1.59.0/boost</span>_1_59_0.tar.gz</span><br><span class="line">下载<span class="number">2</span>：wget <span class="symbol">https:</span>/<span class="regexp">/soliton.net.cn/download</span><span class="regexp">/linux/boost</span>_1_59_0.tar.gz</span><br></pre></td></tr></table></figure><br><br>安装Mysql编译安装必要依赖<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install </span>-y cmake <span class="keyword">bison </span><span class="keyword">bison-devel </span>libaio-devel gcc gcc-c++ git ncurses-devel</span><br></pre></td></tr></table></figure><br><br>解压Mysql源文件<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf mysql-<span class="number">5.7</span>.<span class="number">20</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"></span><br><span class="line">将boost的压缩包移动至解压后的源文件目录内:</span><br><span class="line">mv boost_1_59_0<span class="selector-class">.tar</span><span class="selector-class">.gz</span> mysql-<span class="number">5.7</span>.<span class="number">20</span>/</span><br></pre></td></tr></table></figure><br><br>进入MySQL源文件目录，新建configure做为编译目录，并进入该目录:<br><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> mysql-<span class="number">5</span>.<span class="number">7</span>.<span class="number">20</span></span><br><span class="line"><span class="built_in">mkdir</span> configure</span><br><span class="line"><span class="built_in">cd</span> configure</span><br></pre></td></tr></table></figure><br><br>使用cmake进行生成编译环境：<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cmake .. -DBUILD_CONFIG=mysql_release \</span><br><span class="line">-<span class="ruby">DINSTALL_LAYOUT=STANDALONE \</span></span><br><span class="line"><span class="ruby">-DCMAKE_BUILD_TYPE=RelWithDebInfo \</span></span><br><span class="line"><span class="ruby">-DENABLE_DTRACE=OFF \</span></span><br><span class="line"><span class="ruby">-DWITH_EMBEDDED_SERVER=OFF \</span></span><br><span class="line"><span class="ruby">-DWITH_INNODB_MEMCACHED=ON \</span></span><br><span class="line"><span class="ruby">-DWITH_SSL=bundled \</span></span><br><span class="line"><span class="ruby">-DWITH_ZLIB=system \</span></span><br><span class="line"><span class="ruby">-DWITH_PAM=ON \</span></span><br><span class="line"><span class="ruby">-DCMAKE_INSTALL_PREFIX=<span class="regexp">/usr/local</span><span class="regexp">/mysql \</span></span></span><br><span class="line"><span class="ruby">-DMYSQL_DATADIR=<span class="regexp">/usr/local</span><span class="regexp">/mysql/data</span> \</span></span><br><span class="line"><span class="ruby">-DMYSQL_UNIX_ADDR=<span class="regexp">/usr/local</span><span class="regexp">/mysql/tmp</span><span class="regexp">/mysql.sock \</span></span></span><br><span class="line"><span class="ruby">-DDEFAULT_CHARSET=utf8 \</span></span><br><span class="line"><span class="ruby">-DDEFAULT_COLLATION=utf8_general_ci \</span></span><br><span class="line"><span class="ruby">-DWITH_EDITLINE=bundled \</span></span><br><span class="line"><span class="ruby">-DFEATURE_SET=community \</span></span><br><span class="line"><span class="ruby">-DCOMPILATION_COMMENT=<span class="string">"MySQL Server (GPL)"</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_DEBUG=OFF \</span></span><br><span class="line"><span class="ruby">-DWITH_BOOST=..</span></span><br></pre></td></tr></table></figure><br><br>如果编译出现错误，请先删除CMakeCache.txt后，再重新编译：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">rm</span> <span class="selector-tag">-rf</span> <span class="selector-tag">CMakeCache</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><br><br>如果出现下面的提示就表示成功生成了编译环境：<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">- Configuring done</span></span><br><span class="line"><span class="ruby">-- Generating done</span></span><br></pre></td></tr></table></figure><br><br>编译安装Mysql：<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span> &amp;&amp; <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure><br><br>创建mysql用户<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -s <span class="regexp">/sbin/</span>nologin mysql</span><br></pre></td></tr></table></figure><br><br>新建数据库文件夹及日志文件夹，并更改用户为mysql:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>data</span><br><span class="line">mkdir <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>tmp</span><br><span class="line">mkdir -p <span class="regexp">/var/</span>mysql/log</span><br><span class="line">chown -R <span class="string">mysql:</span>mysql <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>data</span><br><span class="line">chown -R <span class="string">mysql:</span>mysql <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>tmp</span><br><span class="line">chown -R <span class="string">mysql:</span>mysql <span class="regexp">/var/</span>mysql/log</span><br></pre></td></tr></table></figure><br><br>修改配置文件:<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">port=3306</span><br><span class="line">datadir=/usr/local/mysql/data</span><br><span class="line">socket=/usr/local/mysql/tmp/mysql.sock</span><br><span class="line">log_error=/var/mysql/log/error.log</span><br><span class="line">basedir=/usr/local/mysql</span><br></pre></td></tr></table></figure><br><br>初始化数据库:<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>bin<span class="regexp">/mysqld --initialize --basedir=/u</span>sr<span class="regexp">/local/my</span>sql<span class="regexp">/ --datadir=/u</span>sr<span class="regexp">/local/my</span>sql<span class="regexp">/data --user=mysql</span></span><br></pre></td></tr></table></figure><br><br>查看数据文件是否生成:<br><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ll /usr/local/mysql/data/</span><br><span class="line"></span><br><span class="line">总用量 110628</span><br><span class="line">-rw-r-----.<span class="number"> 1 </span>mysql mysql<span class="number"> 56 </span>8月<span class="number"> 14 </span>16:09 auto.cnf</span><br><span class="line">-rw-r-----.<span class="number"> 1 </span>mysql mysql<span class="number"> 419 </span>8月<span class="number"> 14 </span>16:09 ib_buffer_pool</span><br><span class="line">-rw-r-----.<span class="number"> 1 </span>mysql mysql<span class="number"> 12582912 </span>8月<span class="number"> 14 </span>16:09 ibdata1</span><br><span class="line">-rw-r-----.<span class="number"> 1 </span>mysql mysql<span class="number"> 50331648 </span>8月<span class="number"> 14 </span>16:09 ib_logfile0</span><br><span class="line">-rw-r-----.<span class="number"> 1 </span>mysql mysql<span class="number"> 50331648 </span>8月<span class="number"> 14 </span>16:09 ib_logfile1</span><br><span class="line">drwxr-x---.<span class="number"> 2 </span>mysql mysql<span class="number"> 4096 </span>8月<span class="number"> 14 </span>16:09 mysql</span><br><span class="line">drwxr-x---.<span class="number"> 2 </span>mysql mysql<span class="number"> 8192 </span>8月<span class="number"> 14 </span>16:09 performance_schema</span><br><span class="line">drwxr-x---.<span class="number"> 2 </span>mysql mysql<span class="number"> 8192 </span>8月<span class="number"> 14 </span>16:09 sys</span><br><span class="line"></span><br><span class="line">查看日志文件是否生成：</span><br><span class="line"></span><br><span class="line">ll /var/mysql/log/</span><br><span class="line"></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r-----.<span class="number"> 1 </span>mysql mysql<span class="number"> 802 </span>8月<span class="number"> 14 </span>16:09 error.log</span><br></pre></td></tr></table></figure><br><br>配置启动文件及环境变更并启动:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">从模板文件中复制启动文件：</span><br><span class="line"></span><br><span class="line">cp <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>support-files<span class="regexp">/mysql.server /</span>etc<span class="regexp">/init.d/</span>mysqld</span><br><span class="line"></span><br><span class="line">修改启动文件：</span><br><span class="line">vim <span class="regexp">/etc/</span>init.d/mysqld</span><br><span class="line">找到如下二行：</span><br><span class="line"></span><br><span class="line">basedir=</span><br><span class="line">datadir=</span><br><span class="line">修改为：</span><br><span class="line">basedir=<span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span></span><br><span class="line">datadir=<span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>data/</span><br></pre></td></tr></table></figure><br><br>给安装的mysql目录修改属主、属组<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R <span class="string">mysql:</span>mysql <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span></span><br></pre></td></tr></table></figure><br><br>启动mysql:<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/etc/i</span>nit.d<span class="regexp">/mysqld start</span></span><br></pre></td></tr></table></figure><br><br>配置MySQL环境变量：<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">'PATH=/usr/local/mysql/bin/:$PATH'</span> &gt;&gt;/etc/<span class="keyword">profile</span></span><br><span class="line"><span class="keyword">source</span> /etc/<span class="keyword">profile</span></span><br></pre></td></tr></table></figure><br><br>修改root的初始密码:<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">查看root的初始密码</span><br><span class="line">MySQL从5.7开始不支持安装后使用空密码进行登录，因此在这里需要先查询程序生成的临时密码：</span><br><span class="line"><span class="keyword">cat</span> /<span class="keyword">var</span>/mysql/<span class="keyword">log</span>/<span class="keyword">error</span>.<span class="keyword">log</span> |grep 'A temporary password'</span><br><span class="line"></span><br><span class="line">2018-09-19T07:57:04.818931Z 1 [<span class="keyword">Note</span>] A temporary password is generated <span class="keyword">for</span> root@localhost: u3rh5T1=<span class="keyword">iR</span>+b</span><br><span class="line">初始密码：u3rh5T1=<span class="keyword">iR</span>+b</span><br></pre></td></tr></table></figure><br><br>登录MySQL并修改初始密码：<br>使用初始密码登录MySQL:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> idall <span class="keyword">privileges</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> root@<span class="string">"%"</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'123456'</span> <span class="keyword">with</span> <span class="keyword">grant</span> <span class="keyword">option</span>;     //赋予root所有权限</span><br><span class="line"></span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br></pre></td></tr></table></figure><br><br><code>如果登录进来不管执行什么都是报错那就执行以下命令</code><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> = <span class="keyword">PASSWORD</span>(<span class="string">'your new password'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> <span class="keyword">PASSWORD</span> <span class="keyword">EXPIRE</span> <span class="keyword">NEVER</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br><span class="line"></span><br><span class="line">完成以上三步退出再登，使用新设置的密码就行了，以上除了红色的自己修改成新密码外，其他原样输入即可</span><br></pre></td></tr></table></figure><br><br><h3>Mysql-5.7.20编译安装教程结束</h3></li>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service_Mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Oracle_11g_Silence_install</title>
      <link href="/2018/09/19/Oracle-11g-Silence-install/"/>
      <url>/2018/09/19/Oracle-11g-Silence-install/</url>
      
        <content type="html"><![CDATA[<p>Red Hat  7.2  静默安装oracle 11g<br><a id="more"></a><br>下载需要工具：<a href="https://soliton.net.cn/download/windwos/Xmanager5.zip" target="_blank" rel="noopener">Xmanager5</a><br>xmanager5序列号：101210-450789-147200</p><p>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>Oracle 安装包<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">linux<span class="selector-class">.x64_11gR2_database_1of2</span><span class="selector-class">.zip</span></span><br><span class="line">linux<span class="selector-class">.x64_11gR2_database_2of2</span><span class="selector-class">.zip</span></span><br></pre></td></tr></table></figure></p><p>硬件需求<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">物理内存：至少<span class="number">1</span>G</span><br><span class="line">虚拟内存：物理内存的<span class="number">2</span>倍&lt;swap&gt;</span><br><span class="line">硬盘空间：全部安装需要<span class="number">5.1</span>G</span><br><span class="line">显示器是配色：<span class="number">256</span>色</span><br><span class="line">处理器：主频最少<span class="number">550</span>MHZ</span><br></pre></td></tr></table></figure></p><p>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure></p><p>安装依赖包<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install binutils compat-libstdc++-<span class="number">33</span> compat-libstdc++-<span class="number">33</span><span class="selector-class">.i686</span> elfutils-libelf elfutils-libelf-devel gcc gcc-c++ glibc glibc<span class="selector-class">.i686</span> glibc-common glibc-devel glibc-devel<span class="selector-class">.i686</span> glibc-headers ksh libaio libaio<span class="selector-class">.i686</span> libaio-devel libaio-devel<span class="selector-class">.i686libgcc</span> libgcc<span class="selector-class">.i686</span> libstdc++ libstdc++<span class="selector-class">.i686</span> libstdc++-devel make sysstat unixODBC unixODBC-devel</span><br></pre></td></tr></table></figure></p><p>设定SWAP分区<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">在<span class="regexp">/home/</span>下生成swap文件 设定大小<span class="number">2</span>GB</span><br><span class="line"></span><br><span class="line">dd <span class="keyword">if</span>=<span class="regexp">/dev/</span>zero of=<span class="regexp">/home/</span>swapfile bs=<span class="number">1</span>M <span class="keyword">count</span>=<span class="number">2048</span></span><br><span class="line"></span><br><span class="line">设定使用<span class="regexp">/home/</span>swapfile交换文件</span><br><span class="line"></span><br><span class="line">mkswap <span class="regexp">/home/</span>swapfile</span><br><span class="line"></span><br><span class="line">启用交换分区</span><br><span class="line"></span><br><span class="line">swapon <span class="regexp">/home/</span>swapfile</span><br><span class="line"></span><br><span class="line">编辑文件<span class="regexp">/ect/</span>fstab</span><br><span class="line">vi <span class="regexp">/etc/</span>fstab</span><br><span class="line"></span><br><span class="line">以便引导系统时启用交换文件，文件最下方插入</span><br><span class="line"></span><br><span class="line"><span class="regexp">/home/</span>swapfile swap swap defaults <span class="number">0</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></p><p>添加Oracle 用户<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">创建oinstall、dba组 将<span class="keyword">oracle用户加入组 </span>修改并设定<span class="keyword">oracle用户密码</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">groupadd </span>oinstall</span><br><span class="line">groupadd dba</span><br><span class="line">useradd -g oinstall -G dba <span class="keyword">oracle</span></span><br><span class="line"><span class="keyword">echo </span><span class="number">123456</span> <span class="title">| passwd --stdin oracle</span></span><br></pre></td></tr></table></figure></p><p>修改内核参数<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">编辑文件/etc/sysctl<span class="selector-class">.conf</span>　　</span><br><span class="line"></span><br><span class="line">vi /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">配置文件内加入 修改以下参数。如果没有可以自己添加，如果默认值比参考值大，则不需要修改。</span><br><span class="line"></span><br><span class="line">fs<span class="selector-class">.aio-max-nr</span> = <span class="number">1048576</span></span><br><span class="line">fs<span class="selector-class">.file-max</span> = <span class="number">6815744</span></span><br><span class="line">kernel<span class="selector-class">.shmall</span> = <span class="number">2097152</span></span><br><span class="line">kernel<span class="selector-class">.shmmax</span> = <span class="number">536870912</span></span><br><span class="line">kernel<span class="selector-class">.shmmni</span> = <span class="number">4096</span></span><br><span class="line">kernel<span class="selector-class">.sem</span> = <span class="number">250</span> <span class="number">32000</span> <span class="number">100</span> <span class="number">128</span></span><br><span class="line">net<span class="selector-class">.ipv4</span><span class="selector-class">.ip_local_port_range</span> = <span class="number">9000</span> <span class="number">65500</span></span><br><span class="line">net<span class="selector-class">.core</span><span class="selector-class">.rmem_default</span> = <span class="number">262144</span></span><br><span class="line">net<span class="selector-class">.core</span><span class="selector-class">.rmem_max</span> = <span class="number">4194304</span></span><br><span class="line">net<span class="selector-class">.core</span><span class="selector-class">.wmem_default</span> = <span class="number">262144</span></span><br><span class="line">net<span class="selector-class">.core</span><span class="selector-class">.wmem_max</span> = <span class="number">1048586</span></span><br><span class="line"></span><br><span class="line">执行命令sysctl使其自检并生效</span><br><span class="line"></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure></p><p>修改用户资源限制<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">修改/etc/security/limits.conf配置文件</span><br><span class="line">vi /etc/security/limits.conf</span><br><span class="line"></span><br><span class="line">配置文件下方加入</span><br><span class="line"></span><br><span class="line">oracle              soft    nproc  <span class="number">2047</span></span><br><span class="line">oracle              hard    nproc  <span class="number">16384</span></span><br><span class="line">oracle              soft    nofile  <span class="number">1024</span></span><br><span class="line">oracle              hard    nofile  <span class="number">65536</span></span><br><span class="line">oracle              soft    stack   <span class="number">10240</span></span><br><span class="line"></span><br><span class="line">修改/etc/pam.d/login配置文件</span><br><span class="line">vi /etc/pam.d/login</span><br><span class="line"></span><br><span class="line">配置文件内加入</span><br><span class="line"></span><br><span class="line">session required /<span class="class"><span class="keyword">lib</span>/<span class="title">security</span>/<span class="title">pam_limits</span>.<span class="title">so</span></span></span><br><span class="line">session required pam_limits.so</span><br></pre></td></tr></table></figure></p><p>创建安装目录<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">创建安装目录  <span class="regexp">/usr/</span>local<span class="regexp">/oracle     /</span>usr<span class="regexp">/local/</span>oraInventory     <span class="regexp">/usr/</span>local/oradata  并赋予组用户及权限</span><br><span class="line"></span><br><span class="line">mkdir -p <span class="regexp">/usr/</span>local<span class="regexp">/oracle /</span>usr<span class="regexp">/local/</span>oraInventory <span class="regexp">/usr/</span>local<span class="regexp">/oradata/</span></span><br><span class="line">chown -R <span class="string">oracle:</span>oinstall <span class="regexp">/usr/</span>local<span class="regexp">/oracle /</span>usr<span class="regexp">/local/</span>oraInventory <span class="regexp">/usr/</span>local<span class="regexp">/oradata/</span></span><br><span class="line">chmod -R <span class="number">775</span> <span class="regexp">/usr/</span>local<span class="regexp">/oracle /</span>usr<span class="regexp">/local/</span>oraInventory <span class="regexp">/usr/</span>local<span class="regexp">/oradata/</span></span><br></pre></td></tr></table></figure></p><p>创建oraInst.loc文件<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">创建<span class="regexp">/etc/</span>oraInst.loc文件</span><br><span class="line"></span><br><span class="line">vi <span class="regexp">/etc/</span>oraInst.loc</span><br><span class="line"></span><br><span class="line">文件内加入以下内容</span><br><span class="line"></span><br><span class="line">inventory_loc=<span class="regexp">/usr/</span>local/oraInventory</span><br><span class="line">inst_group=oinstall</span><br><span class="line"></span><br><span class="line">保存退出后执行以下命令。设定该文件的用户组及权限。</span><br><span class="line"></span><br><span class="line">chown <span class="string">oracle:</span>oinstall <span class="regexp">/etc/</span>oraInst.loc</span><br><span class="line">chmod <span class="number">664</span> <span class="regexp">/etc/</span>oraInst.loc</span><br></pre></td></tr></table></figure></p><p>上传oracle 11g的zip文件并解压<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ls /data</span><br><span class="line">输出：linux<span class="selector-class">.x64_11gR2_database_1of2</span><span class="selector-class">.zip</span>  linux<span class="selector-class">.x64_11gR2_database_2of2</span><span class="selector-class">.zip</span></span><br><span class="line">解压：</span><br><span class="line">cd /data</span><br><span class="line">yum -y install unzip</span><br><span class="line">unzip linux<span class="selector-class">.x64_11gR2_database_1of2</span><span class="selector-class">.zip</span></span><br><span class="line">unzip linux<span class="selector-class">.x64_11gR2_database_2of2</span><span class="selector-class">.zip</span></span><br><span class="line">待解压完毕后会生成文件夹/data/database 修改其用户组及权限此处直接使用<span class="number">777</span></span><br><span class="line">chmod <span class="number">777</span> /data/database</span><br><span class="line">chown -R oracle<span class="selector-class">.oinstall</span> /data/database</span><br></pre></td></tr></table></figure></p><p>准备oracle安装应答模板文件db_install.rsp文件</p><p><ul>该文件默认存放在解压后的安装包内，也就是本例中/data/database/response下，将oracle静默安装所需应答文件全部拷贝至 /usr/local/oracle文件夹下<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">将oracle静默安装所需应答文件全部拷贝至 <span class="regexp">/usr/</span>local/oracle文件夹下</span><br><span class="line"></span><br><span class="line">cp <span class="regexp">/data/</span>database<span class="regexp">/response/</span>* <span class="regexp">/usr/</span>local<span class="regexp">/oracle/</span></span><br><span class="line"></span><br><span class="line">修改安装所需的所有应答文件的所属组及权限</span><br><span class="line"></span><br><span class="line">chown  <span class="string">oracle:</span>oinstall <span class="regexp">/usr/</span>local<span class="regexp">/oracle/</span>*.rsp</span><br><span class="line">chmod <span class="number">755</span> <span class="regexp">/usr/</span>local<span class="regexp">/oracle/</span>*.rsp</span><br><span class="line"></span><br><span class="line">配置db_install.rsp文件</span><br><span class="line">vi <span class="regexp">/usr/</span>local<span class="regexp">/oracle/</span>db_install.rsp</span><br><span class="line"></span><br><span class="line">文件内修改相应的参数配置如下：</span><br><span class="line">oracle.install.option=INSTALL_DB_SWONLY     　　　　　　　　<span class="comment">//安装类型,只装数据库软件</span></span><br><span class="line">ORACLE_HOSTNAME=db             　　　　　　　　　　　　　　　 <span class="comment">//主机名称（命令hostname查询）</span></span><br><span class="line">UNIX_GROUP_NAME=oinstall       　　　　　　　　　　　　　　　 <span class="comment">// 安装组</span></span><br><span class="line">INVENTORY_LOCATION=<span class="regexp">/usr/</span>local<span class="regexp">/oraInventory  　　　　　　　　/</span>/INVENTORY目录（**不填就是默认值,本例此处需修改,因个人创建安装目录而定）</span><br><span class="line">SELECTED_LANGUAGES=en,zh_CN            　　　　　　　　 　　<span class="comment">// 选择语言</span></span><br><span class="line">ORACLE_HOME=<span class="regexp">/usr/</span>local<span class="regexp">/oracle/</span>product<span class="regexp">/11.2.0/</span>db_1  　　　　<span class="comment">// oracle_home *路径根据目录情况注意修改 本例安装路径/usr/local/oracle</span></span><br><span class="line">ORACLE_BASE=<span class="regexp">/usr/</span>local<span class="regexp">/oracle                       　　　 /</span>/ oracle_base *注意修改</span><br><span class="line">oracle.install.db.InstallEdition=EE          　　　　　　　 <span class="comment">// oracle版本</span></span><br><span class="line">oracle.install.db.isCustomInstall=<span class="literal">false</span>      　　　　　　　 <span class="comment">//自定义安装，否，使用默认组件</span></span><br><span class="line">oracle.install.db.DBA_GROUP=dba              　　　　　　　 <span class="comment">//dba用户组</span></span><br><span class="line">oracle.install.db.OPER_GROUP=oinstall        　　　　　　　 <span class="comment">//oper用户组</span></span><br><span class="line">oracle.install.db.config.starterdb.type=GENERAL_PURPOSE   <span class="comment">//数据库类型</span></span><br><span class="line">oracle.install.db.config.starterdb.globalDBName=orcl      <span class="comment">//globalDBName</span></span><br><span class="line">oracle.install.db.config.starterdb.SID=orcl  　　　　　　　 <span class="comment">//SID（**此处注意与环境变量内配置SID一致）</span></span><br><span class="line">oracle.install.db.config.starterdb.memoryLimit=<span class="number">81920</span>      <span class="comment">//自动管理内存的内存(M)</span></span><br><span class="line">oracle.install.db.config.starterdb.password.ALL=oracle    <span class="comment">//设定所有数据库用户使用同一个密码</span></span><br><span class="line">SECURITY_UPDATES_VIA_MYORACLESUPPORT=<span class="literal">false</span>       　　　　　 <span class="comment">//（手动写了false）</span></span><br><span class="line">DECLINE_SECURITY_UPDATES=<span class="literal">true</span>　　　　　　　　　　　　　　　　　<span class="comment">// **注意此参数 设定一定要为true</span></span><br></pre></td></tr></table></figure></ul></p><p>设置oracle用户环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">由root切换至创建好的oracle用户</span><br><span class="line">su - oracle</span><br><span class="line"></span><br><span class="line">修改该用户的用户配置文件</span><br><span class="line">vi .bash_profile</span><br><span class="line"></span><br><span class="line">文件内加入并修改至以下内容</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_BASE</span>=/usr/local/oracle</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_HOME</span>=<span class="variable">$ORACLE_BASE</span>/product/11.2.0/db_1</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_SID</span>=orcl</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ORACLE_OWNER</span>=oracle</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$ORACLE_HOME/bin:$HOME/bin</span><br><span class="line"></span><br><span class="line">保存退出后执行source命令立即生效。</span><br><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure></p><p>在oracle用户下开始安装<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">执行命令。</span><br><span class="line"></span><br><span class="line"><span class="comment">/data/database/./runInstaller -silent -force -ignorePrereq -responseFile /usr/local/oracle/db_install.rsp</span></span><br><span class="line"></span><br><span class="line">参数说明</span><br><span class="line"><span class="comment">　　/data/database是安装包解压后的路径，此处根据安装包解压所在位置做修改，因人而异。</span></span><br><span class="line">　　runInstaller 是主要安装脚本</span><br><span class="line">　　-<span class="ruby">silent 静默模式</span></span><br><span class="line"><span class="ruby">　　-force 强制安装</span></span><br><span class="line"><span class="ruby">　　-ignorePrereq忽略warning直接安装。</span></span><br><span class="line"><span class="ruby">　　-responseFile读取安装应答文件。</span></span><br></pre></td></tr></table></figure></p><p>xshell另起窗口并以root登陆<br><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -d -n <span class="number">2</span> <span class="symbol">'du</span> -sh /usr/<span class="keyword">local</span>/oracle'    监测oracle安装目录是否变化。或者直接tail -f命令监测安装log日志,不赘述。</span><br></pre></td></tr></table></figure></p><p>等待安装编译直至出现以下内容，在新创建的root窗口内执行以下提示内的脚本，<br>既/usr/oracle/oraInventory/orainstRoot.sh  /usr/local/oracle/product/11.2.0/db_1/root.sh<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/usr/oracle/oraInventory/orainstRoot.<span class="keyword">sh</span>     <span class="comment">//我的没有出现这个所以没执行</span></span><br><span class="line">/usr/<span class="keyword">local</span>/oracle/product/11.2.0/db_1/root.<span class="keyword">sh</span></span><br><span class="line"></span><br><span class="line">　　To execute the configuration scripts:</span><br><span class="line"></span><br><span class="line">　　1. <span class="keyword">Open</span> a terminal <span class="keyword">window</span></span><br><span class="line"></span><br><span class="line">　　2. <span class="keyword">Log</span> <span class="keyword">in</span> <span class="keyword">as</span> <span class="string">"root"</span></span><br><span class="line"></span><br><span class="line">　　3. <span class="keyword">Run</span> the scripts</span><br><span class="line"></span><br><span class="line">　　4. <span class="keyword">Return</span> to this <span class="keyword">window</span> and hit<span class="string">"Enter"</span> key to <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"> 　　Successfully Setup Software.</span><br><span class="line"></span><br><span class="line">#-------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p><p>sqlpuls登录<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sqlplus / <span class="keyword">as</span> sysdba</span><br><span class="line"></span><br><span class="line">SQL*Plus: Release <span class="number">11.2</span><span class="number">.0</span><span class="number">.1</span><span class="number">.0</span> Production <span class="keyword">on</span> <span class="title">Wed</span> <span class="title">Sep</span> <span class="title">19</span> <span class="title">11</span>:<span class="title">07</span>:<span class="title">23</span> <span class="title">2018</span></span><br><span class="line"></span><br><span class="line">Copyright (c) <span class="number">1982</span>, <span class="number">2009</span>, Oracle.  All rights reserved.</span><br><span class="line"></span><br><span class="line">Connected <span class="built_in">to</span> <span class="keyword">an</span> idle instance.</span><br><span class="line"></span><br><span class="line">SQL&gt;</span><br></pre></td></tr></table></figure></p><p>授权用户<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>,<span class="keyword">resource</span>,dba <span class="keyword">to</span> username</span><br></pre></td></tr></table></figure></p><p>创建用户并指定表空间<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create<span class="built_in"> user </span>username identified by password</span><br><span class="line">default tablespace user_data</span><br><span class="line">temporary tablespace user_temp;</span><br></pre></td></tr></table></figure></p><p>退出<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure></p><h3>Oracle 11g 静默安装教程结束…………</h3>]]></content>
      
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Oracle </tag>
            
            <tag> Xmanager5下载 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PHP-7.2.1_install</title>
      <link href="/2018/09/18/Service_PHP-7-2-1_install/"/>
      <url>/2018/09/18/Service_PHP-7-2-1_install/</url>
      
        <content type="html"><![CDATA[<p>PHP7编译安装<br><a id="more"></a></p><p>部署环境<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">OS</span>    : <span class="selector-tag">CentOS</span> <span class="selector-tag">Linux</span> <span class="selector-tag">release</span> 7<span class="selector-class">.5</span><span class="selector-class">.1804</span> (<span class="selector-tag">Core</span>)</span><br><span class="line"><span class="selector-tag">Kernel</span>: 3<span class="selector-class">.10</span><span class="selector-class">.0-514</span><span class="selector-class">.26</span><span class="selector-class">.2</span><span class="selector-class">.el7</span><span class="selector-class">.x86_64</span></span><br></pre></td></tr></table></figure></p><p>安装php依赖组件（包含Nginx依赖）<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install wget vim pcre pcre-devel openssl openssl-devel libicu-devel gcc gcc-c++ autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel ncurses ncurses-devel curl curl-devel krb5-devel libidn libidn-devel openldap openldap-devel nss_ldap jemalloc-devel cmake boost-devel bison automake libevent libevent-devel <span class="built_in">gd</span> <span class="built_in">gd</span>-devel libtool* libmcrypt libmcrypt-devel mcrypt mhash libxslt libxslt-devel <span class="built_in">readline</span> <span class="built_in">readline</span>-devel gmp gmp-devel libcurl libcurl-devel openjpeg-devel</span><br></pre></td></tr></table></figure></p><p>创建用户和组，并下载安装包解压<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">groupadd www</span><br><span class="line">useradd -g www www</span><br><span class="line">wget http:<span class="comment">//am1.php.net/distributions/php-7.2.1.tar.gz</span></span><br><span class="line">tar xvf php-<span class="number">7.2</span>.<span class="number">1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line">cd php-<span class="number">7.2</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure></p><p>设置变量并开始源码编译<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -frp <span class="string">/usr/lib64/libldap</span>* <span class="string">/usr/lib/</span></span><br><span class="line"><span class="string">./configure</span> <span class="params">--prefix=/usr/local/php</span> <span class="params">--with-config-file-path=/usr/local/php/etc</span> <span class="params">--enable-fpm</span> <span class="params">--with-fpm-user=www</span> <span class="params">--with-fpm-group=www</span> <span class="params">--enable-mysqlnd</span> <span class="params">--with-mysqli=mysqlnd</span> <span class="params">--with-pdo-mysql=mysqlnd</span> <span class="params">--enable-mysqlnd-compression-support</span> <span class="params">--with-iconv-dir</span> <span class="params">--with-freetype-dir</span> <span class="params">--with-jpeg-dir</span> <span class="params">--with-png-dir</span> <span class="params">--with-zlib</span> <span class="params">--with-libxml-dir</span> <span class="params">--enable-xml</span> <span class="params">--disable-rpath</span> <span class="params">--enable-bcmath</span> <span class="params">--enable-shmop</span> <span class="params">--enable-sysvsem</span> <span class="params">--enable-inline-optimization</span> <span class="params">--with-curl</span> <span class="params">--enable-mbregex</span> <span class="params">--enable-mbstring</span> <span class="params">--enable-intl</span> <span class="params">--with-mcrypt</span> <span class="params">--with-libmbfl</span> <span class="params">--enable-ftp</span> <span class="params">--with-gd</span> <span class="params">--enable-gd-jis-conv</span> <span class="params">--enable-gd-native-ttf</span> <span class="params">--with-openssl</span> <span class="params">--with-mhash</span> <span class="params">--enable-pcntl</span> <span class="params">--enable-sockets</span> <span class="params">--with-xmlrpc</span> <span class="params">--enable-zip</span> <span class="params">--enable-soap</span> <span class="params">--with-gettext</span> <span class="params">--disable-fileinfo</span> <span class="params">--enable-opcache</span> <span class="params">--with-pear</span> <span class="params">--enable-maintainer-zts</span> <span class="params">--with-ldap=shared</span> <span class="params">--without-gdbm</span></span><br></pre></td></tr></table></figure></p><p>注：若无报错执行下一步安装，如果编译过程中出现错误，根据报错安装依赖包，通常不会出现这种问题。<br>注：–enable-gd-jis-conv  此参数会导致Zabbix中文字符乱码，建议取消。<br>开始安装<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span> -j <span class="number">4</span> &amp;&amp; <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure></p><p>完成安装后配置PHP.ini文件<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp php.ini-development <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>etc/php.ini</span><br><span class="line">cp <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>etc<span class="regexp">/php-fpm.conf.default /</span>usr<span class="regexp">/local/</span>php<span class="regexp">/etc/</span>php-fpm.conf</span><br><span class="line">cp <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>etc<span class="regexp">/php-fpm.d/</span>www.conf.<span class="keyword">default</span> <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>etc<span class="regexp">/php-fpm.d/</span>www.conf</span><br></pre></td></tr></table></figure></p><p>修改配置文件<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="keyword">local</span>/php/etc/php-fpm.<span class="keyword">conf</span></span><br><span class="line">找到PID，将前面的分号注释去掉,如下：</span><br><span class="line">pid = <span class="keyword">run</span>/php-fpm.pid</span><br></pre></td></tr></table></figure></p><p>启动php-fpm<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/php/</span>sbin<span class="regexp">/php-fpm</span></span><br></pre></td></tr></table></figure></p><p>查看php扩展<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/usr/local/php/bin/</span></span><br><span class="line"><span class="string">./php</span> -m</span><br></pre></td></tr></table></figure></p><p>php软链接创建<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>bin<span class="regexp">/php /u</span>sr<span class="regexp">/bin/</span></span><br><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>bin<span class="regexp">/phar /u</span>sr<span class="regexp">/bin/</span></span><br><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>bin<span class="regexp">/phar.phar /u</span>sr<span class="regexp">/bin/</span></span><br><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>bin<span class="regexp">/php-cgi /u</span>sr<span class="regexp">/bin/</span></span><br><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>bin<span class="regexp">/php-config  /u</span>sr<span class="regexp">/bin/</span></span><br><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>bin<span class="regexp">/phpize  /u</span>sr<span class="regexp">/bin/</span></span><br></pre></td></tr></table></figure></p><p>查看php编译时的参数<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -i <span class="string">| grep configure</span></span><br></pre></td></tr></table></figure></p><p></p><h1></h1><br>修改php.ini配置文件相关参数<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/php/etc/php.ini</span><br><span class="line">expose_php = Off</span><br><span class="line">short_open_tag = ON</span><br><span class="line">max_execution_time = 300</span><br><span class="line">max_input_time = 300</span><br><span class="line">memory_limit = 128M</span><br><span class="line">post_max_size = 32M</span><br><span class="line">date.timezone = Asia/Shanghai</span><br><span class="line">mbstring.func_overload=2</span><br><span class="line">extension = <span class="string">"/usr/local/php/lib/php/extensions/no-debug-zts-20170718/ldap.so"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#OPcache 缓存</span></span><br><span class="line">[opcache]</span><br><span class="line">zend_extension=/usr/local/php/lib/php/extensions/no-debug-zts-20170718/opcache.so</span><br><span class="line">opcache.memory_consumption=128</span><br><span class="line">opcache.interned_strings_buffer=8</span><br><span class="line">opcache.max_accelerated_files=4000</span><br><span class="line">opcache.revalidate_freq=60</span><br><span class="line">opcache.fast_shutdown=1</span><br><span class="line">opcache.enable_cli=1</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置php安全函数</span></span><br><span class="line">disable_functions = passthru,exec,system,chroot,chgrp,chown,shell_exec,proc_open,proc_get_status,popen,ini_alter,ini_restore,dl,openlog,syslog,readlink,symlink,popepassthru</span><br></pre></td></tr></table></figure><p></p><p>修改<a href="http://www.conf" target="_blank" rel="noopener">www.conf</a> 配置文件相关参数<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vim  /usr/local/php/etc/php-fpm.d/www.conf</span><br><span class="line"></span><br><span class="line">listen = /var/run/www/php-cgi.sock</span><br><span class="line">listen<span class="selector-class">.owner</span> = www</span><br><span class="line">listen<span class="selector-class">.group</span> = www</span><br><span class="line">listen<span class="selector-class">.mode</span> = <span class="number">0660</span></span><br><span class="line">listen<span class="selector-class">.allowed_clients</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">pm = dynamic</span><br><span class="line">listen<span class="selector-class">.backlog</span> = -<span class="number">1</span></span><br><span class="line">pm<span class="selector-class">.max_children</span> = <span class="number">180</span></span><br><span class="line">pm<span class="selector-class">.start_servers</span> = <span class="number">50</span></span><br><span class="line">pm<span class="selector-class">.min_spare_servers</span> = <span class="number">50</span></span><br><span class="line">pm<span class="selector-class">.max_spare_servers</span> = <span class="number">180</span></span><br><span class="line">request_terminate_timeout = <span class="number">120</span></span><br><span class="line">request_slowlog_timeout = <span class="number">50</span></span><br><span class="line">slowlog = var/log/slow.log</span><br></pre></td></tr></table></figure></p><p>创建php-cgi.sock存放目录<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/<span class="keyword">run</span><span class="bash">/www/</span></span><br><span class="line"><span class="bash">chown -R www:www /var/run/www</span></span><br></pre></td></tr></table></figure></p><p>创建system系统单元文件php-fpm启动脚本：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=The PHP FastCGI Process Manager</span><br><span class="line"><span class="attr">After</span>=syslog.target network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">PIDFile</span>=/usr/local/php/var/run/php-fpm.pid</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/local/php/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php/etc/php-fpm.conf</span><br><span class="line"><span class="attr">ExecReload</span>=/bin/kill -USR2 <span class="variable">$MAINPID</span></span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure></p><p>启动 php-fpm 服务并加入开机启动<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">systemctl</span> <span class="selector-tag">enable</span> <span class="selector-tag">php-fpm</span><span class="selector-class">.service</span></span><br><span class="line"><span class="selector-tag">systemctl</span> <span class="selector-tag">restart</span> <span class="selector-tag">php-fpm</span><span class="selector-class">.service</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service_PHP </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PXE_install_system</title>
      <link href="/2018/09/17/PXE-install-system/"/>
      <url>/2018/09/17/PXE-install-system/</url>
      
        <content type="html"><![CDATA[<p>PXE一键安装操作系统及配置<br><a id="more"></a><br>部署环境<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Red</span> <span class="selector-tag">Hat</span> ： 7<span class="selector-class">.2</span></span><br><span class="line"><span class="selector-tag">Kernel</span>  ：3<span class="selector-class">.10</span><span class="selector-class">.0-327</span><span class="selector-class">.el7</span><span class="selector-class">.x86_64</span></span><br></pre></td></tr></table></figure></p><p>关闭防火墙及Selinux<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure></p><p>安装软件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpd、rhel7源、DHCP、TFTP、</span><br></pre></td></tr></table></figure></p><p>IP地址<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">本机IP：<span class="number">10.10</span><span class="number">.1</span><span class="number">.2</span>/<span class="number">24</span>  <span class="number">10.10</span><span class="number">.1</span><span class="number">.254</span>    虚拟NAT</span><br><span class="line">        <span class="number">192.168</span><span class="number">.179</span><span class="number">.2</span>/<span class="number">24</span>            虚拟仅主机</span><br><span class="line">虚拟NAT网段：<span class="number">10.10</span><span class="number">.1</span><span class="number">.0</span>/<span class="number">24</span> <span class="number">10.10</span><span class="number">.1</span><span class="number">.254</span></span><br></pre></td></tr></table></figure></p><p>一、要求为进行PXE服务器构建提供RHEL7软件仓库，完成下列任务</p><p><ul>1.安装httpd服务并启动</ul></p><p><ul>2.挂载rhel7镜像并能够访问</ul></p><p><ul>3.测试pxe镜像源<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">yum -y install httpd</span><br><span class="line">systemctl start httpd</span><br><span class="line">systemctl enable httpd</span><br><span class="line">mkdir <span class="meta-keyword">/var/</span>www<span class="meta-keyword">/html/</span>pxe</span><br><span class="line">mount <span class="meta-keyword">/dev/</span>sr0  <span class="meta-keyword">/var/</span>www<span class="meta-keyword">/html/</span>pxe</span><br><span class="line">echo <span class="string">"mount /dev/sr0  /var/www/html/pxe &amp;&gt;/dev/null"</span> &gt;&gt;~/.bashrc    写入开机文件，写在<span class="meta-keyword">/etc/</span>fstab文件也可行</span><br><span class="line"><span class="meta"># vim /etc/fstab</span></span><br><span class="line"><span class="meta"># /ISO/rhel-server-7.2-x86_64-dvd.iso  /var/www/html/rh7dvd  iso9660  loop,ro  0  0</span></span><br><span class="line">浏览器访问地址：</span><br><span class="line"><span class="symbol">http:</span><span class="comment">//192.168.179.2/pxe</span></span><br></pre></td></tr></table></figure></ul></p><p>安装DHCP服务并配置验证</p><p><ul>1.DHCP服务器地址范围:192.168.179.3-253 10.10.1.3-253</ul></p><p><ul>2.PXE引导文件 pxelinux.0</ul></p><p><ul>3.测试DHCP服务<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">yum -y install dhcp</span><br><span class="line"></span><br><span class="line">vim /etc/dhcp/dhcpd.conf</span><br><span class="line"></span><br><span class="line">subnet <span class="number">192.168</span><span class="number">.179</span><span class="number">.0</span> netmask <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> &#123;</span><br><span class="line">range  <span class="number">192.168</span><span class="number">.179</span><span class="number">.3</span> <span class="number">192.168</span><span class="number">.179</span><span class="number">.253</span>;</span><br><span class="line">next-server  <span class="number">192.168</span><span class="number">.179</span><span class="number">.2</span>;</span><br><span class="line">filename  <span class="string">"pxelinux.0"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">subnet <span class="number">10.10</span><span class="number">.1</span><span class="number">.0</span> netmask <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> &#123;</span><br><span class="line">range  <span class="number">10.10</span><span class="number">.1</span><span class="number">.3</span> <span class="number">10.10</span><span class="number">.1</span><span class="number">.253</span>;</span><br><span class="line">next-server  <span class="number">10.10</span><span class="number">.1</span><span class="number">.2</span>;</span><br><span class="line">filename  <span class="string">"pxelinux.0"</span>;</span><br><span class="line">&#125;</span><br><span class="line">保存并退出</span><br><span class="line"></span><br><span class="line">systemctl start dhcpd</span><br><span class="line">systemctl enable dhcpd</span><br><span class="line">netstat -antpu | grep dhcpd</span><br><span class="line"></span><br><span class="line">测试：</span><br><span class="line">dhclient -d eno16777736</span><br></pre></td></tr></table></figure></ul></p><p>安装TFTP服务端<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> tftp-<span class="keyword">server</span></span><br><span class="line">systemctl <span class="keyword">start</span> tftp</span><br><span class="line">systemctl <span class="keyword">enable</span> tftp</span><br></pre></td></tr></table></figure></p><p>配置PXE引导</p><p><ul>启用TFTP服务器，部署引导文件（内核vmlinuz、初始文件initrd.img、网卡启动程序pxelinux.0）</ul></p><p><ul>创建pxelinux.cfg/配置目录，在此目录下建立默认引导文件default</ul></p><p><li>网卡启动程序pxelinux.0由软件包syslinux提供</li></p><p><li>PXE安装用的内核及初始化文件可从RHEL7的光盘目录/images/pxeboot/下提取</li></p><p><li>PXE启动配置相关资料可参考RHEL7的光盘目录/isolinux/，其中包括图形支持模块vesamenu.c32、背景图片spash.png、菜单配置文件isolinux.cfg（使用时改名为default)<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum  -y  install  syslinux</span><br><span class="line">rpm  -ql  syslinux  |  grep pxelinux.<span class="number">0</span></span><br><span class="line">cp  /usr/share/syslinux/pxelinux.<span class="number">0</span>  /var/<span class="class"><span class="keyword">lib</span>/<span class="title">tftpboot</span>/</span></span><br><span class="line">ls /var/<span class="class"><span class="keyword">lib</span>/<span class="title">tftpboot</span>/</span></span><br></pre></td></tr></table></figure></li></p><p><li>拷贝引导装机的内核、初始镜像，部署到TFTP目录当文件较多时，可以在TFTP目录下创建子目录<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir  /var/<span class="class"><span class="keyword">lib</span>/<span class="title">tftpboot</span>/<span class="title">rhel7</span></span></span><br><span class="line">cd  /var/<span class="class"><span class="keyword">lib</span>/<span class="title">tftpboot</span>/<span class="title">rhel7</span>/</span></span><br><span class="line">wget  <span class="symbol">http:</span>/<span class="regexp">/192.168.179.2/pxe</span><span class="regexp">/isolinux/vmlinuz</span></span><br><span class="line">wget  <span class="symbol">http:</span>/<span class="regexp">/192.168.179.2/pxe</span><span class="regexp">/isolinux/initrd</span>.img</span><br></pre></td></tr></table></figure></li></p><p>配置启动菜单</p><p><li>创建配置目录<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir  /var/<span class="class"><span class="keyword">lib</span>/<span class="title">tftpboot</span>/<span class="title">pxelinux</span>.<span class="title">cfg</span></span></span><br><span class="line">cd  /var/<span class="class"><span class="keyword">lib</span>/<span class="title">tftpboot</span>/</span></span><br><span class="line">wget  <span class="symbol">http:</span>/<span class="regexp">/192.168.179.2/pxe</span><span class="regexp">/isolinux/vesamenu</span>.c32        /<span class="regexp">/提供图形支持</span></span><br><span class="line"><span class="regexp">wget  http:/</span><span class="regexp">/192.168.179.2/pxe</span><span class="regexp">/isolinux/splash</span>.png         /<span class="regexp">/背景图片</span></span><br><span class="line"><span class="regexp">wget  -O  pxelinux.cfg/default</span>  <span class="symbol">http:</span>/<span class="regexp">/192.168.179.2/pxe</span><span class="regexp">/isolinux/isolinux</span>.cfg  /<span class="regexp">/引导菜单</span></span><br><span class="line"><span class="regexp">ls  -R  /var</span><span class="regexp">/lib/tftpboot</span><span class="regexp">/</span></span><br></pre></td></tr></table></figure></li></p><p><li>调整启动参数<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim  /var/lib/tftpboot/pxelinux.cfg/default</span><br><span class="line"></span><br><span class="line">default vesamenu<span class="selector-class">.c32</span>                              <span class="comment">//默认交给图形模块处理</span></span><br><span class="line">timeout <span class="number">600</span>                                      <span class="comment">//选择限时为60秒（单位1/10秒）</span></span><br><span class="line"><span class="selector-tag">menu</span> title  PXE  Installation  Server             <span class="comment">//启动菜单标题信息</span></span><br><span class="line"><span class="selector-tag">label</span>  linux                                  <span class="comment">//菜单项标签</span></span><br><span class="line"><span class="selector-tag">menu</span>  <span class="selector-tag">label</span>  ^Install Red Hat Enterprise Linux <span class="number">7.2</span></span><br><span class="line">kernel  rhel7/vmlinuz                      <span class="comment">//内核的位置</span></span><br><span class="line">append  initrd=rhel7/initrd<span class="selector-class">.img</span>  inst.stage2=http:<span class="comment">//192.168.179.2/pxe   //初始镜像、安装源地址</span></span><br></pre></td></tr></table></figure></li></p><p>测试TFTP服务是否可用</p><p><li>安装tftp客户端</li></p><p><li>测试get</li></p><p><li>查看get结果<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum  -y  install  tftp</span><br><span class="line">cd /root</span><br><span class="line">tftp  <span class="number">192.168</span><span class="number">.179</span><span class="number">.2</span>  -c  get pxelinux<span class="number">.0</span>     <span class="comment">//get pxelinux.0到当前目录</span></span><br><span class="line">ll -h pxelinux<span class="number">.0</span></span><br></pre></td></tr></table></figure></li></p><p>部署自动应答文件<br><a href="https://soliton.net.cn/download/linux/txh.cfg" target="_blank" rel="noopener">图形化下载</a><br><a href="https://soliton.net.cn/download/linux/zxh.cfg" target="_blank" rel="noopener">最小化下载</a><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">将生成好的应答文件放入http的可访问目录下 格式（.cfg）：</span><br><span class="line"></span><br><span class="line">mv zxh.cfg  <span class="regexp">/var/</span>www<span class="regexp">/html/</span></span><br><span class="line">mv txh.cfg  <span class="regexp">/var/</span>www<span class="regexp">/html/</span></span><br><span class="line"></span><br><span class="line">测试是否可以下载：</span><br><span class="line">wget <span class="string">http:</span><span class="comment">//192.168.179.2/txh.cfg         //图形化自动应答</span></span><br><span class="line">wget <span class="string">http:</span><span class="comment">//192.168.179.2.zxh.cfg         //最小化自动应答</span></span><br></pre></td></tr></table></figure></p><p>修改PXE服务 default 引导配置文件，调用自动应答文件<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim  /var/lib/tftpboot/pxelinux.cfg/default</span><br><span class="line">修改如下：只改这行</span><br><span class="line">append <span class="attribute">initrd</span>=rhel7/initrd.img <span class="attribute">ks</span>=http://192.168.179.2/zxh.cfg</span><br><span class="line"></span><br><span class="line">append <span class="attribute">initrd</span>=rhel7/initrd.img <span class="attribute">ks</span>=http://192.168.179.2/txh.cfg</span><br></pre></td></tr></table></figure></p><p>重启服务<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">restart</span> dhcpd</span><br><span class="line">systemctl <span class="built_in">restart</span> tftp.service</span><br><span class="line">systemctl <span class="built_in">restart</span> httpd</span><br></pre></td></tr></table></figure></p><p>接着就可以去测试了</p>]]></content>
      
      
      <categories>
          
          <category> PXE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PXE </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Selenium+Chrome+Chromedriver</title>
      <link href="/2018/09/11/Selenium-Chrome-Chromedriver/"/>
      <url>/2018/09/11/Selenium-Chrome-Chromedriver/</url>
      
        <content type="html"><![CDATA[<p>自动化测试，嗯、很不错，在网上找文档都没解决，后来自己留心了下才解决的问题，花了很久才弄好的，感觉教程都有毒。</p><a id="more"></a><h3>开始正题</h3><p>在centos7上安装Selenium + Chromedriver，并且使用facebook/webdriver测试<br>系统环境：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">CentOS</span> <span class="selector-tag">Linux</span> <span class="selector-tag">release</span> 7<span class="selector-class">.5</span><span class="selector-class">.1804</span> (<span class="selector-tag">Core</span>)</span><br><span class="line">4<span class="selector-class">.9</span><span class="selector-class">.93-boot2docker</span></span><br><span class="line"><span class="selector-tag">Architecture</span>: <span class="selector-tag">X86-64</span></span><br></pre></td></tr></table></figure></p><p>安装php 7.2：使用yum 安装，也可编译安装   下面是安装php各种扩展，随意<br><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm </span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span><br><span class="line">yum -y install php72w php72w-cli php72w-common php72w-devel php72w-embedded php72w-fpm php72w-gd php72w-mbstring php72w-mysqlnd php72w-opcache php72-pdo php72w-xml</span><br></pre></td></tr></table></figure></p><p>安装Chrome 浏览器<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install http<span class="variable">s:</span>//<span class="keyword">dl</span>.google.<span class="keyword">com</span>/linux/direct/google-chrome-stable_current_x86_64.rpm &amp;&amp; yum -<span class="keyword">y</span> install GConf2 wget</span><br></pre></td></tr></table></figure></p><p>安装JAVA 1.8.0版本，因为Selenium3版本的需要java1.8.0支持<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">yum</span> <span class="selector-tag">-y</span> <span class="selector-tag">install</span> <span class="selector-tag">java-1</span><span class="selector-class">.8</span><span class="selector-class">.0</span></span><br></pre></td></tr></table></figure></p><p>安装Selenium-server，下载Selenium-server 用java 直接执行即可<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="regexp">//</span>selenium-release.storage.googleapis.com<span class="regexp">/3.14/</span>selenium-server-standalone-<span class="number">3.14</span>.<span class="number">0</span>.jar</span><br></pre></td></tr></table></figure></p><p>Selenium服务初始化并输出日志放在后台执行<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohub java -jar selenium-server-standalone-<span class="number">3.14</span>.<span class="number">0</span><span class="selector-class">.jar</span> &amp;&gt;&gt;/tmp/selenium-server<span class="selector-class">.log</span> &amp;</span><br></pre></td></tr></table></figure></p><p>安装chromedriver （谷歌驱动）<a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank" rel="noopener">最新版下载</a><br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="symbol">https:</span>/<span class="regexp">/soliton.net.cn/download</span><span class="regexp">/linux/chromedriver</span><span class="comment">#谷歌驱动</span></span><br><span class="line">wget <span class="symbol">https:</span>/<span class="regexp">/soliton.net.cn/download</span><span class="regexp">/linux/geckodriver</span><span class="comment">#火狐驱动</span></span><br><span class="line">chmod +x chromedriver<span class="comment">#赋予执行权限</span></span><br><span class="line">mv chromedriver /usr/bin<span class="comment">#移动到系统默认路径为了更方便的调用</span></span><br></pre></td></tr></table></figure></p><p>安装Xvfb（相当于虚拟的图形化）<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y isntall Xvfb xorg-xll-<span class="built_in">fonts</span>* -y</span><br></pre></td></tr></table></figure></p><p>用xvfb 启动chrome，新建一个脚本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/bin/xvfb-chrome</span><br><span class="line"><span class="comment">#!/bin/bash  </span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="title">_kill_procs</span></span>() &#123;  </span><br><span class="line"><span class="built_in">kill</span> -TERM <span class="variable">$chrome</span>  </span><br><span class="line"><span class="built_in">wait</span> <span class="variable">$chrome</span>  </span><br><span class="line"><span class="built_in">kill</span> -TERM <span class="variable">$xvfb</span>  </span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment"># Setup a trap to catch SIGTERM and relay it to child processes  </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">trap</span> _kill_procs SIGTERM    </span><br><span class="line"></span><br><span class="line">XVFB_WHD=<span class="variable">$&#123;XVFB_WHD:-1280x720x16&#125;</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Start Xvfb  </span></span><br><span class="line">Xvfb :99 -ac -screen 0 <span class="variable">$XVFB_WHD</span> -nolisten tcp &amp;  </span><br><span class="line">xvfb=$!  </span><br><span class="line"><span class="built_in">export</span> DISPLAY=:99    </span><br><span class="line">chrome --no-sandbox --<span class="built_in">disable</span>-gpu<span class="variable">$@</span> &amp;  </span><br><span class="line">chrome=$!  </span><br><span class="line"><span class="built_in">wait</span> <span class="variable">$chrome</span>  </span><br><span class="line"><span class="built_in">wait</span> <span class="variable">$xvfb</span></span><br></pre></td></tr></table></figure></p><p>给脚本赋予执行权限<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x  <span class="regexp">/usr/</span>bin<span class="regexp">/xvfb-chrome</span></span><br></pre></td></tr></table></figure></p><p>更改chrome启动的软链接<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ln -s <span class="regexp">/etc/</span>alternatives<span class="regexp">/google-chrome /</span>usr<span class="regexp">/bin/</span>chrome</span><br><span class="line">rm -rf <span class="regexp">/usr/</span>bin/google-chrome</span><br><span class="line">ln -s <span class="regexp">/usr/</span>bin<span class="regexp">/xvfb-chrome /</span>usr<span class="regexp">/bin/</span>google-chrome</span><br></pre></td></tr></table></figure></p><p>启动Chrome并创建日志文件并放在后台运行<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup google-chrome &amp;<span class="meta">&gt;&gt;</span>/tmp/chrome.log &amp;</span><br></pre></td></tr></table></figure></p><p>安装  facebook/webdriver<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -sS https:<span class="comment">//getcomposer.org/installer  | php</span></span><br><span class="line"></span><br><span class="line">php composer<span class="selector-class">.phar</span> require facebook/webdriver</span><br></pre></td></tr></table></figure></p><p>使用facebook的php-webdriver测试<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">vim test.php</span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// An example of using php-webdriver.</span></span></span><br><span class="line"><span class="php"><span class="comment">// Do not forget to run composer install before and also have Selenium server started and listening on port 4444.</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">Facebook</span>\<span class="title">WebDriver</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">use</span> <span class="title">Facebook</span>\<span class="title">WebDriver</span>\<span class="title">Remote</span>\<span class="title">DesiredCapabilities</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">use</span> <span class="title">Facebook</span>\<span class="title">WebDriver</span>\<span class="title">Remote</span>\<span class="title">RemoteWebDriver</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">require_once</span>(<span class="string">'vendor/autoload.php'</span>);</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="comment">// start Chrome with 5 second timeout</span></span></span><br><span class="line"><span class="php">$host = <span class="string">'http://localhost:4444/wd/hub'</span>; <span class="comment">// this is the default</span></span></span><br><span class="line"><span class="php">$capabilities = DesiredCapabilities::chrome();</span></span><br><span class="line"><span class="php">$driver = RemoteWebDriver::create($host, $capabilities, <span class="number">5000</span>);</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="comment">// navigate to 'http://www.baidu.com/'</span></span></span><br><span class="line"><span class="php">$driver-&gt;get(<span class="string">'https://www.baidu.com/'</span>);</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="comment">// wait until the page is loaded</span></span></span><br><span class="line"><span class="php"><span class="comment">// $driver-&gt;wait()-&gt;until(</span></span></span><br><span class="line"><span class="php"><span class="comment">//     WebDriverExpectedCondition::titleContains('潙¾度')  </span></span></span><br><span class="line"><span class="php"><span class="comment">// );</span></span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="comment">// print the title of the current page</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"The title is '"</span> . $driver-&gt;getTitle() . <span class="string">"'\n"</span>;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="comment">// print the URI of the current page</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"The current URI is '"</span> . $driver-&gt;getCurrentURL() . <span class="string">"'\n"</span>;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="comment">// print the pagesource of the current page</span></span></span><br><span class="line"><span class="php">$html_selenium = $driver-&gt;getPageSource();</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $html_selenium;</span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="comment">// close the browser</span></span></span><br><span class="line"><span class="php">$driver-&gt;quit();</span></span><br></pre></td></tr></table></figure></p><p>执行测试文件<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">php</span> <span class="selector-tag">test</span><span class="selector-class">.php</span></span><br></pre></td></tr></table></figure></p><p>命令行返回：（网页代码太多只看前十行）<br><img src="https://soliton.net.cn/soliton.images/webdriver.png"></p><p></p><h4>教程到此结束…………<p></p><p>注：如果是docker，你可以直接拉取我上传的镜像，启动时只要映射4444端口即可<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="symbol">docker</span> pull wangxinqiu/<span class="keyword">selenium-chrome-centos</span></span><br><span class="line"><span class="keyword">docker </span>run -<span class="keyword">it </span> --name <span class="keyword">selenium-chrome </span>-p <span class="number">4444</span>:<span class="number">4444</span>  wangxinqiu/<span class="keyword">selenium-chrome-centos </span>/<span class="keyword">bin/bash</span></span><br><span class="line"><span class="keyword">/sh/selenium-chrome.sh</span>启动<span class="keyword">Selenium-server </span>和chrome</span><br><span class="line">提示 ： 启动脚本后等一会儿再执行测试，不然会出启动chrome 的报错</span><br><span class="line"><span class="symbol">php</span> /<span class="meta">data</span>/test.phpfacebook测试</span><br></pre></td></tr></table></figure></p><p></p><h3>以上仅提供参考<p></p></h3></h4>]]></content>
      
      
      <categories>
          
          <category> Selenium+Chrome+Chromedriver </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chrome </tag>
            
            <tag> Selenium </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mysql-5.6.25_install</title>
      <link href="/2018/09/04/Service_Mysql-5-6-25_install/"/>
      <url>/2018/09/04/Service_Mysql-5-6-25_install/</url>
      
        <content type="html"><![CDATA[<p>Mysql数据库编译安装教程<br><a id="more"></a></p><p>注：我使用的 yum 是 本地yum + 阿里yum，本地 yum 没有 有很多包都没有，所以我的教程是这样的</p><p>安装 Mysql 依赖包<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install </span>make gcc gcc-c++ cmake <span class="keyword">bison </span><span class="keyword">bison-devel </span>  ncurses-devel perl</span><br></pre></td></tr></table></figure></p><p>创建 mysql 用户和组<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd mysql -g mysql -M -s <span class="regexp">/sbin/</span>nologin</span><br></pre></td></tr></table></figure></p><p>下载 mysql-5.6.25<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget  --<span class="keyword">no</span>-check-certificate -<span class="keyword">c</span> http<span class="variable">s:</span>//downloads.mysql.<span class="keyword">com</span>/archives/<span class="built_in">get</span>/<span class="keyword">file</span>/mysql-<span class="number">5.6</span>.<span class="number">25</span>.tar.gz</span><br></pre></td></tr></table></figure></p><p>解压 mysql-5.6.25<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-zxf</span> <span class="selector-tag">mysql-5</span><span class="selector-class">.6</span><span class="selector-class">.25</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"><span class="selector-tag">cd</span> <span class="selector-tag">mysql-5</span><span class="selector-class">.6</span><span class="selector-class">.25</span></span><br></pre></td></tr></table></figure></p><p>安装Mysql，编译，编译安装<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cmake <span class="attribute">-DCMAKE_INSTALL_PREFIX</span>=/usr/local/mysql <span class="attribute">-DMYSQL_DATADIR</span>=/usr/local/mysql/data <span class="attribute">-DSYSCONFDIR</span>=/etc <span class="attribute">-DWITH_MYISAM_STORAGE_ENGINE</span>=1 <span class="attribute">-DWITH_INNOBASE_STORAGE_ENGINE</span>=1\</span><br><span class="line"></span><br><span class="line"><span class="attribute">-DWITH_MEMORY_STORAGE_ENGINE</span>=1 <span class="attribute">-DWITH_READLINE</span>=1 <span class="attribute">-DMYSQL_UNIX_ADDR</span>=/tmp/mysqld.sock <span class="attribute">-DMYSQL_TCP_PORT</span>=3306 <span class="attribute">-DENABLED_LOCAL_INFILE</span>=1 <span class="attribute">-DWITH_PARTITION_STORAGE_ENGINE</span>=1\</span><br><span class="line"></span><br><span class="line"><span class="attribute">-DEXTRA_CHARSETS</span>=all <span class="attribute">-DDEFAULT_CHARSET</span>=utf8 <span class="attribute">-DDEFAULT_COLLATION</span>=utf8_general_ci</span><br><span class="line"></span><br><span class="line">make </span><br><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>授权 Mysql 用户目录<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown <span class="string">mysql:</span>mysql <span class="regexp">/usr/</span>local/mysql</span><br></pre></td></tr></table></figure></p><p>Mysql 数据库初始化<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span></span><br><span class="line">.<span class="regexp">/scripts/my</span>sql_install_db --user=mysql --datadir=<span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>data</span><br></pre></td></tr></table></figure></p><p>拷贝配置文件<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp support-files/my-default<span class="selector-class">.cnf</span>  /etc/my<span class="selector-class">.cnf</span> &lt;&lt; E</span><br><span class="line">y</span><br><span class="line">E</span><br></pre></td></tr></table></figure></p><p>修改 my.cnf 配置<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="comment">"datadir=/usr/local/mysql/data</span></span><br><span class="line">default-storage-engine=InnoDB</span><br><span class="line">lower_case_table_names=<span class="number">1</span><span class="comment">" &gt;&gt;/etc/my.cnf</span></span><br><span class="line"></span><br><span class="line">注： <span class="keyword">echo</span> 输出这三行 追加到/etc/my.<span class="keyword">cnf</span>配置文件里</span><br></pre></td></tr></table></figure></p><p>添加变量，刷新变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin:/usr/local/mysql/bin:/usr/local/mysql/lib"</span> &gt;&gt;  ~/.bash_profile</span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></p><p>传统方式启动mysql<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="keyword">local</span>/mysql/bin/mysqld_safe <span class="comment">--user=mysql</span></span><br></pre></td></tr></table></figure></p><p>查看MySQL端口<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tnl <span class="string">| grep 3306</span></span><br></pre></td></tr></table></figure></p><p>制作成服务启动<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp support-files<span class="regexp">/mysql.server /</span>etc<span class="regexp">/init.d/my</span>sqld</span><br></pre></td></tr></table></figure></p><p>添加到开机启动项<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --<span class="keyword">add</span><span class="bash"> mysqld</span></span><br></pre></td></tr></table></figure></p><p>创建 Mysql 软连接<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>bin<span class="regexp">/mysql /u</span>sr<span class="regexp">/bin/</span></span><br><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>bin<span class="regexp">/mysqladmin /u</span>sr<span class="regexp">/bin/</span></span><br></pre></td></tr></table></figure></p><p>修改 mysql 登陆   用户：root 密码：123456<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mysqladmin</span> -uroot -hlocalhost  password <span class="string">"123456"</span></span><br></pre></td></tr></table></figure></p><p>用 root登录 Mysql<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mysql</span> -uroot -hlocalhost -p123456</span><br></pre></td></tr></table></figure></p><p>Mysql 编译安装教程结束</p><p>小提示：如果root密码忘记了怎么办？？？<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">进入配置 my.cnf 文件 </span><br><span class="line">vim /etc/my.cnf</span><br><span class="line"></span><br><span class="line">添加以下内容并保存</span><br><span class="line">skip-grant-tables </span><br><span class="line"></span><br><span class="line">重启Mysql服务</span><br><span class="line">service mysqld restart</span><br><span class="line"></span><br><span class="line">直接不用密码登录</span><br><span class="line">mysql -uroot -hlocalhost -p#连续回车即可</span><br><span class="line"></span><br><span class="line">修改root 密码为123456</span><br><span class="line">update<span class="built_in"> user </span><span class="builtin-name">set</span> <span class="attribute">password</span>=password('123456') where <span class="attribute">user</span>=<span class="string">'root'</span>;</span><br><span class="line"></span><br><span class="line">更新用户表</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">接着退出重启服务即可。</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service_Mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PHP_install_Parameter dependence</title>
      <link href="/2018/09/04/PHP-install-Parameter-dependence/"/>
      <url>/2018/09/04/PHP-install-Parameter-dependence/</url>
      
        <content type="html"><![CDATA[<p>PHP编译参数是需要安装的依赖。</p><a id="more"></a><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: <span class="keyword">error</span>: jpeglib.h <span class="keyword">not</span> found.</span><br><span class="line">yum -y install libjpeg-devel</span><br></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: <span class="keyword">error</span>: png.h <span class="keyword">not</span> found.</span><br><span class="line">yum -y install libpng libpng-devel</span><br></pre></td></tr></table></figure><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">configure</span>: error: free<span class="keyword">type</span>-config not found.</span><br><span class="line"><span class="title">yum</span> -y install free<span class="keyword">type</span>-devel</span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">configure:</span> <span class="string">error:</span> Cannot find ldap.h</span><br><span class="line">yum -y install openldap-devel openldap-servers openldap-clients</span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">configure:</span> <span class="string">error:</span> Please reinstall the mysql distribution</span><br><span class="line">yum -y install mysql mysql-server mysql-devel</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">configure:</span> <span class="attr">error:</span> <span class="literal">No</span> <span class="string">curses/termcap</span> <span class="string">library</span> <span class="string">found</span></span><br><span class="line"><span class="string">yum</span> <span class="bullet">-y</span> <span class="string">install</span> <span class="string">ncurses-devel</span></span><br></pre></td></tr></table></figure><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: error: xml2-config<span class="built_in"> not </span>found. Please<span class="built_in"> check </span>your libxml2 installation.</span><br><span class="line">yum -y install libxml2 libxml2-devel</span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">configure:</span> <span class="string">error:</span> Cannot find OpenSSL’s</span><br><span class="line">yum -y install openssl-devel</span><br></pre></td></tr></table></figure><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: <span class="built_in">error</span>: libjpeg.(a|so) <span class="keyword">not</span> found</span><br><span class="line">yum -y install <span class="built_in">gd</span> <span class="built_in">gd</span>-devel</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: <span class="built_in">error</span>: cannot <span class="built_in">find</span> <span class="built_in">output</span> from lex; giving up</span><br><span class="line">yum -y install flex</span><br></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">configure:</span> error: mod_deflate has <span class="keyword">been </span>requested <span class="keyword">but </span>can not <span class="keyword">be </span><span class="keyword">built </span>due to prerequisite failures</span><br><span class="line">yum -y <span class="keyword">install </span>zlib-devel openssl-devel</span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">configure:</span> <span class="string">error:</span> …No recognized SSL/TLS toolkit detected</span><br><span class="line">yum -y install libssl-dev</span><br></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Configure:</span> error: Please reinstall the <span class="keyword">BZip2 </span><span class="keyword">distribution</span></span><br><span class="line"><span class="keyword">yum </span>-y <span class="keyword">install </span><span class="keyword">bzip2 </span><span class="keyword">bzip2-devel</span></span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">Configure:</span> <span class="string">error:</span> Please reinstall the libcurl distribution – easy.h should be <span class="keyword">in</span> <span class="regexp">/include/</span>curl/</span><br><span class="line">yum -y install curl curl-devel</span><br></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Configure: <span class="keyword">error</span>: Unable <span class="keyword">to</span> locate gmp.h</span><br><span class="line">yum -y install gmp-devel</span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Configure: error: Cannot <span class="builtin-name">find</span> MySQL header files under /usr.<span class="built_in"> Note </span>that the MySQL<span class="built_in"> client </span>library is <span class="keyword">not</span> bundled anymore!</span><br><span class="line">yum -y install mysql-devel</span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">configure:</span> <span class="string">error:</span> Please reinstall the ncurses distribution</span><br><span class="line">yum -y install ncurses ncurses-devel</span><br></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Checking <span class="keyword">for</span> unixODBC support… configure: <span class="keyword">error</span>: <span class="keyword">ODBC</span> header <span class="keyword">file</span> ‘/usr/<span class="keyword">include</span>/sqlext.<span class="keyword">h</span>’ not found!</span><br><span class="line">yum -y install unixODBC-devel</span><br></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">Configure:</span> <span class="string">error:</span> Cannot find pspell</span><br><span class="line">yum -y install pspell-devel</span><br></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: <span class="keyword">error</span>: mcrypt.h <span class="keyword">not</span> found. Please reinstall libmcrypt.</span><br><span class="line">yum -y install libmcrypt libmcrypt-devel</span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Configure: error: snmp.h <span class="keyword">not</span> found. Check your<span class="built_in"> SNMP </span>installation.</span><br><span class="line">yum -y install net-snmp net-snmp-devel</span><br></pre></td></tr></table></figure><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">开启LDAP服务还需要</span><br><span class="line">yum -y <span class="keyword">install</span> openldap-devel openldap-servers openldap-clients</span><br></pre></td></tr></table></figure><h3>以上均作参考,不是很全,如果你没找到的麻烦把你的报错用邮件发给我,我会及时处理并添加,谢谢</h3>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service_PHP </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PHP-install_Parameter description</title>
      <link href="/2018/09/04/PHP-install-Parameter-description/"/>
      <url>/2018/09/04/PHP-install-Parameter-description/</url>
      
        <content type="html"><![CDATA[<p>PHP 编译安装参数说明<br><a id="more"></a><br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line">-<span class="ruby">-prefix=<span class="regexp">/usr/local</span><span class="regexp">/phpphp 安装目录 </span></span></span><br><span class="line"><span class="ruby">--with-apxs2=<span class="regexp">/usr/local</span><span class="regexp">/apache/bin</span><span class="regexp">/apxs    表示使用apache2.0以上版本，apxs表示使用的apache1.0版本</span></span></span><br><span class="line"><span class="ruby">--with-config-file-path=<span class="regexp">/usr/local</span><span class="regexp">/php/etc</span>               指定php.ini位置</span></span><br><span class="line"><span class="ruby">--with-MySQL=<span class="regexp">/usr/local</span><span class="regexp">/mysql                        mysql安装目录，对mysql的支持</span></span></span><br><span class="line"><span class="ruby">--with-MySQLi=<span class="regexp">/usr/local</span><span class="regexp">/mysql/bin</span><span class="regexp">/mysql_config            mysqli文件目录,优化支持</span></span></span><br><span class="line"><span class="ruby">--enable-safe-mode                                          打开安全模式</span></span><br><span class="line"><span class="ruby">--enable-ftp                                打开ftp的支持</span></span><br><span class="line"><span class="ruby">--enable-zip                               打开对zip的支持</span></span><br><span class="line"><span class="ruby">--with-bz2                                   打开对bz2文件的支持                       </span></span><br><span class="line"><span class="ruby">--with-jpeg-dir                                打开对jpeg图片的支持</span></span><br><span class="line"><span class="ruby">--with-png-dir                                 打开对png图片的支持</span></span><br><span class="line"><span class="ruby">--with-freetype-dir                              打开对freetype字体库的支持</span></span><br><span class="line"><span class="ruby">--without-iconv                                关闭iconv函数，种字符集间的转换</span></span><br><span class="line"><span class="ruby">--with-libXML-dir                                 打开libxml2库的支持</span></span><br><span class="line"><span class="ruby">--with-XMLrpc                                 打开xml-rpc的c语言</span></span><br><span class="line"><span class="ruby">--with-zlib-dir                                 打开zlib库的支持</span></span><br><span class="line"><span class="ruby">--with-gd                                    打开gd库的支持</span></span><br><span class="line"><span class="ruby">--enable-gd-native-ttf                           支持TrueType字符串函数库</span></span><br><span class="line"><span class="ruby">--with-curl                                   打开curl浏览工具的支持</span></span><br><span class="line"><span class="ruby">--with-curlwrappers                              运用curl工具打开url流</span></span><br><span class="line"><span class="ruby">--with-ttf                                    打开freetype1.*的支持，可以不加了</span></span><br><span class="line"><span class="ruby">--with-xsl 打开XSLT 文件支持，扩展了libXML2库 ，需要libxslt软件</span></span><br><span class="line"><span class="ruby">--with-gettext                                打开gnu 的gettext 支持，编码库用到</span></span><br><span class="line"><span class="ruby">--with-pear                      打开pear命令的支持，PHP扩展用的</span></span><br><span class="line"><span class="ruby">--enable-calendar                  打开日历扩展功能</span></span><br><span class="line"><span class="ruby">--enable-mbstring                  多字节，字符串的支持</span></span><br><span class="line"><span class="ruby">--enable-bcmath                  打开图片大小调整,用到zabbix监控的时候用到了这个模块</span></span><br><span class="line"><span class="ruby">--enable-sockets                  打开 sockets 支持</span></span><br><span class="line"><span class="ruby">--enable-exif                      图片的元数据支持</span></span><br><span class="line"><span class="ruby">--enable-magic-quotes               魔术引用的支持</span></span><br><span class="line"><span class="ruby">--disable-rpath                     关闭额外的运行库文件</span></span><br><span class="line"><span class="ruby">--disable-debug                  关闭调试模式</span></span><br><span class="line"><span class="ruby">--with-mime-magic=<span class="regexp">/usr/share</span><span class="regexp">/file/magic</span>.mime      魔术头文件位置</span></span><br></pre></td></tr></table></figure></p><p>CGI方式安装才用的参数<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">-enable-fpm                     打上PHP-fpm 补丁后才有这个参数，CGI方式安装的启动程序</span></span><br><span class="line"><span class="ruby">--enable-fastCGI                 支持fastcgi方式启动PHP</span></span><br><span class="line"><span class="ruby">--enable-force-CGI-redirect             同上 ,帮助里没有解释</span></span><br><span class="line"><span class="ruby">--with-ncurses                     支持ncurses 屏幕绘制以及基于文本终端的图形互动功能的动态库</span></span><br><span class="line"><span class="ruby">--enable-pcntl                     freeTDS需要用到的，可能是链接mssql 才用到</span></span><br></pre></td></tr></table></figure></p><p>mhash和mcrypt算法的扩展<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">-with-mcrypt                     算法</span></span><br><span class="line"><span class="ruby">--with-mhash                     算法</span></span><br></pre></td></tr></table></figure></p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">-with-gmp</span></span><br><span class="line"><span class="ruby">--enable-inline-optimization</span></span><br><span class="line"><span class="ruby">--with-openssl                     openssl的支持，加密传输时用到的</span></span><br><span class="line"><span class="ruby">--enable-dbase</span></span><br><span class="line"><span class="ruby">--with-pcre-dir=<span class="regexp">/usr/local</span><span class="regexp">/bin/pcre</span>-config      perl的正则库案安装位置</span></span><br><span class="line"><span class="ruby">--disable-dmalloc</span></span><br><span class="line"><span class="ruby">--with-gdbm                     dba的gdbm支持</span></span><br><span class="line"><span class="ruby">--enable-sigchild</span></span><br><span class="line"><span class="ruby">--enable-sysvsem</span></span><br><span class="line"><span class="ruby">--enable-sysvshm</span></span><br><span class="line"><span class="ruby">--enable-zend-multibyte               支持zend的多字节</span></span><br><span class="line"><span class="ruby">--enable-mbregex</span></span><br><span class="line"><span class="ruby">--enable-wddx</span></span><br><span class="line"><span class="ruby">--enable-shmop</span></span><br><span class="line"><span class="ruby">--enable-soap</span></span><br></pre></td></tr></table></figure><p>较全的PHP扩展实例:<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./configure</span> <span class="params">--prefix=/usr/local/php</span> <span class="params">--with-config-file-path=/usr/local/php/etc</span> <span class="params">--with-mysql=/usr/local/mysql</span> <span class="params">--with-mysqli=/usr/bin/mysql_config</span> \</span><br><span class="line"><span class="params">--with-iconv-dir=/usr/local</span> <span class="params">--with-freetype-dir</span> <span class="params">--with-jpeg-dir</span> <span class="params">--with-png-dir</span> <span class="params">--with-zlib</span> <span class="params">--with-libxml-dir=/usr</span> <span class="params">--enable-xml</span> \</span><br><span class="line"><span class="params">--disable-rpath</span> <span class="params">--enable-discard-path</span> <span class="params">--enable-safe-mode</span> <span class="params">--enable-bcmath</span> <span class="params">--enable-shmop</span> <span class="params">--enable-sysvsem</span> <span class="params">--enable-inline-optimization</span> \</span><br><span class="line"><span class="params">--with-curl</span> <span class="params">--with-curlwrappers</span> <span class="params">--enable-mbregex</span> <span class="params">--enable-fastcgi</span> <span class="params">--enable-fpm</span> <span class="params">--enable-force-cgi-redirect</span> <span class="params">--enable-mbstring</span> <span class="params">--with-mcrypt</span> \</span><br><span class="line"><span class="params">--with-gd</span> <span class="params">--enable-gd-native-ttf</span> <span class="params">--with-openssl</span> <span class="params">--with-mhash</span> <span class="params">--enable-pcntl</span> <span class="params">--enable-sockets</span> <span class="params">--with-ldap</span> <span class="params">--with-ldap-sasl</span> <span class="params">--with-xmlrpc</span> \</span><br><span class="line"><span class="params">--enable-zip</span> <span class="params">--enable-soap</span> <span class="params">--without-pear</span> <span class="params">--with-zlib</span> <span class="params">--enable-pdo</span> <span class="params">--with-pdo-mysql</span> <span class="params">--with-mysql</span></span><br></pre></td></tr></table></figure></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mysqli扩展技术不仅可以调用MySQL的存储过程、处理MySQL事务，而且还可以使访问数据库工作变得更加稳定。 </span></span><br><span class="line"><span class="attribute">make</span> ZEND_EXTRA_LIBS=<span class="string">'-liconv'</span></span><br></pre></td></tr></table></figure><p>我自己编译安装时用的是如下:<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./configure</span> <span class="params">--prefix=/usr/local/php</span> <span class="params">--with-config-file-path=/usr/local/php/etc</span> <span class="params">--with-mysql=/usr/local/mysql</span> <span class="params">--with-mysqli=/usr/bin/mysql_config</span> \</span><br><span class="line"><span class="params">--with-iconv-dir=/usr/local</span> <span class="params">--with-freetype-dir</span> <span class="params">--with-jpeg-dir</span> <span class="params">--with-png-dir</span> <span class="params">--with-zlib</span> <span class="params">--with-libxml-dir</span> =<span class="string">/usr</span> <span class="params">--enable-xml</span> <span class="params">--disable</span> -rpath \</span><br><span class="line"><span class="params">--enable-bcmath</span> <span class="params">--enable-shmop</span> <span class="params">--enable-sysvsem</span> <span class="params">--enable-inline-optimization</span> <span class="params">--with-curl</span> <span class="params">--enable-mbregex</span> <span class="params">--enable-fpm</span> <span class="params">--enable-mbstring</span> \</span><br><span class="line"><span class="params">--with-mcrypt</span> <span class="params">--with-gd</span> <span class="params">--enable</span> -gd-native-ttf <span class="params">--with-openssl</span> <span class="params">--with-mhash</span> <span class="params">--enable-pcntl</span> <span class="params">--enable-sockets</span> <span class="params">--with-ldap</span> - -with-ldap-sasl \</span><br><span class="line"><span class="params">--with-xmlrpc</span> <span class="params">--enable-zip</span> <span class="params">--enable-soap</span> <span class="params">--without-pear</span> <span class="params">--with-zlib</span> <span class="params">--enable-pdo</span> <span class="params">--with-pdo-mysql</span> <span class="params">--with-mysql</span></span><br></pre></td></tr></table></figure></p><h3>以上参数均提供参考</h3>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service_PHP </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PHP-5.6.37_install</title>
      <link href="/2018/09/04/Service_PHP-5-6-37_install/"/>
      <url>/2018/09/04/Service_PHP-5-6-37_install/</url>
      
        <content type="html"><![CDATA[<p>PHP编译安装,方便扩展，优点较多。</p><a id="more"></a><p>下载PHP5.6.37,也可以去网站找到你需要安装的版本。这里安装的是5.6版本<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://<span class="number">101.110</span><span class="meta">.118</span><span class="meta">.22</span>/cn2.php.net/distributions/php-<span class="number">5.6</span><span class="meta">.37</span>.tar.gz</span><br></pre></td></tr></table></figure></p><p><li>安装PHP插件依赖</li></p><p><li>添加epel源</li><br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh http:<span class="regexp">//</span>dl.fedoraproject.org<span class="regexp">/pub/</span>epel<span class="regexp">/6/</span>x86_64<span class="regexp">/epel-release-6-8 .noarch.rpm</span></span><br></pre></td></tr></table></figure></p><p><li>安装PHP参数需要的依赖包</li><br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libjpeg-devel <span class="string">\</span> </span><br><span class="line">libpng libpng-devel <span class="string">\</span> </span><br><span class="line">libfreetype-devel freetype-devel <span class="string">\</span> </span><br><span class="line">openldap-devel openldap-servers openldap-clients <span class="string">\</span> </span><br><span class="line">mysql mysql-server mysql-devel</span><br></pre></td></tr></table></figure></p><p>解压tar包<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-zxvf</span> <span class="selector-tag">php-5</span><span class="selector-class">.6</span><span class="selector-class">.37</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span>  #解压<span class="selector-tag">tar</span>包</span><br><span class="line"><span class="selector-tag">cd</span> <span class="selector-tag">php-5</span><span class="selector-class">.6</span><span class="selector-class">.37</span></span><br></pre></td></tr></table></figure></p><p>安装，编译，编译安装<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./configure</span> <span class="params">--prefix=/usr/local/php</span> <span class="params">--with-config-file-path=/usr/local/php/etc</span> <span class="params">--with-mysql=/usr/local/mysql</span> <span class="params">--with-mysqli=/usr/bin/mysql_config</span> \</span><br><span class="line"><span class="params">--with-iconv-dir=/usr/local</span> <span class="params">--with-freetype-dir</span> <span class="params">--with-jpeg-dir</span> <span class="params">--with-png-dir</span> <span class="params">--with-zlib</span> <span class="params">--with-libxml-dir=/usr</span> <span class="params">--enable-xml</span> <span class="params">--disable</span> -rpath \</span><br><span class="line"><span class="params">--enable-bcmath</span> <span class="params">--enable-shmop</span> <span class="params">--enable-sysvsem</span> <span class="params">--enable-inline-optimization</span> <span class="params">--with-curl</span> <span class="params">--enable-mbregex</span> <span class="params">--enable-fpm</span> <span class="params">--enable-mbstring</span> \</span><br><span class="line"><span class="params">--with-mcrypt</span> <span class="params">--with-gd</span> <span class="params">--enable</span> -gd-native-ttf <span class="params">--with-openssl</span> <span class="params">--with-mhash</span> <span class="params">--enable-pcntl</span> <span class="params">--enable-sockets</span> <span class="params">--with-ldap</span> <span class="params">--with-ldap-sasl</span> \</span><br><span class="line"><span class="params">--with-xmlrpc</span> <span class="params">--enable-zip</span> <span class="params">--enable-soap</span> <span class="params">--without-pear</span> <span class="params">--with-zlib</span> <span class="params">--enable-pdo</span> <span class="params">--with-pdo-mysql</span> <span class="params">--with-mysql</span></span><br><span class="line"></span><br><span class="line">make </span><br><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>创建PHP软连接<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>bin<span class="regexp">/php  /u</span>sr<span class="regexp">/bin/</span></span><br></pre></td></tr></table></figure></p><p>查看编译安装时的参数<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">php -i</span></span><br></pre></td></tr></table></figure></p><p>配置php-fpm管理php</p><p><li>编辑<code>php-fpm.conf</code>文件</li><br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将; pid = <span class="keyword">run</span><span class="bash">/php-fpm.pid前面的分号去掉</span></span><br></pre></td></tr></table></figure></p><p><li>进入php解压目录也可查找<code>find / -name init.d.php-fpm</code> </li><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd php<span class="number">-5.6</span><span class="number">.37</span>/sapi/fpm</span><br></pre></td></tr></table></figure></p><p><li>拷贝系统启动文件</li><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp init<span class="selector-class">.d</span><span class="selector-class">.php-fpm</span> /etc/init.d/php-fpm</span><br></pre></td></tr></table></figure></p><p><li>给启动文件赋予执行权限</li><br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x <span class="regexp">/etc/i</span>nit.d<span class="regexp">/php-fpm</span></span><br></pre></td></tr></table></figure></p><p><li>启动服务</li><br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">php-fpm</span></span><br></pre></td></tr></table></figure></p><p><li>关闭服务</li><br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php-fpm <span class="built_in">stop</span></span><br></pre></td></tr></table></figure></p><p><li>重启服务</li><br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">php-fpm restart</span></span><br></pre></td></tr></table></figure></p><p><li>添加到开机启动列表</li><br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --<span class="keyword">add</span><span class="bash"> php-fpm</span></span><br></pre></td></tr></table></figure></p><p><li>设置开机自启</li><br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig php-fpm <span class="keyword">on</span></span><br></pre></td></tr></table></figure></p><p><li>设置开机不自启</li><br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">chkconfig</span> php-fpm <span class="literal">off</span></span><br></pre></td></tr></table></figure></p><p></p><h3>以上是PHP编译安装及PHP-FPM管理步骤</h3>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service_PHP </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Service_Nginx_1.12.2_install</title>
      <link href="/2018/09/03/Service-Nginx-1-12-2-install/"/>
      <url>/2018/09/03/Service-Nginx-1-12-2-install/</url>
      
        <content type="html"><![CDATA[<p>Nginx 1.12.2编译安装<br><a id="more"></a><br>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure></p><p>下载Nginx 1.12.2源码包<br><a href="https://soliton.net.cn/download/linux/nginx-1.12.2.tar.gz" target="_blank" rel="noopener">Nginx1.12.2</a><br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>soliton.net.cn<span class="regexp">/download/</span>linux<span class="regexp">/nginx-1.12.2.tar.gz</span></span><br></pre></td></tr></table></figure></p><p>安装nginx 依赖<br><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y pcre pcre-devel openssl openssl-devel <span class="literal">zlib</span> <span class="literal">zlib</span>-devel</span><br></pre></td></tr></table></figure></p><p>创建用户<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">useradd</span> -s /<span class="keyword">bin/nologin </span>-M nginx</span><br></pre></td></tr></table></figure></p><p>Nginx源码解包<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">zxvf</span> <span class="selector-tag">nginx-1</span><span class="selector-class">.12</span><span class="selector-class">.2</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure></p><p>安装<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./configure</span>  <span class="params">--prefix=/usr/local/nginx</span> <span class="params">--pid-path=/usr/local/nginx/run/nginx</span>.pid <span class="params">--with-http_ssl_module</span> <span class="params">--user=nginx</span> <span class="params">--group=nginx</span> <span class="params">--with-pcre</span> <span class="params">--without-mail_pop3_module</span> <span class="params">--without-mail_imap_module</span> <span class="params">--without-mail_smtp_module</span> <span class="params">--with-http_realip_module</span></span><br></pre></td></tr></table></figure></p><p>编译并编译安装<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span> -j <span class="number">4</span> &amp;&amp; <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure></p><p>创建nginx软连接<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s <span class="regexp">/usr/</span>local<span class="regexp">/nginx/</span>sbin<span class="regexp">/nginx /u</span>sr<span class="regexp">/bin/</span></span><br></pre></td></tr></table></figure></p><p>复制nginx.conf<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /usr/<span class="keyword">local</span>/nginx/<span class="keyword">conf</span>/nginx.<span class="keyword">conf</span>   /usr/<span class="keyword">local</span>/nginx/<span class="keyword">conf</span>/nginx.<span class="keyword">conf</span>,bak</span><br></pre></td></tr></table></figure></p><p>创建nginx.conf<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="keyword">local</span>/nginx/<span class="keyword">conf</span>/nginx.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure></p><p><a href="https://www.soliton.wang/2018/09/01/Nginx-conf/index.html">查看nginx.conf</a></p><p>创建 vhost目录<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mkdir</span>  /usr/<span class="keyword">local</span>/nginx/<span class="keyword">conf</span>/vhost</span><br></pre></td></tr></table></figure></p><p>创建web主目录<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /<span class="built_in">home</span>/www/ceshi</span><br></pre></td></tr></table></figure></p><p>启动服务<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br><span class="line">nginx -s <span class="keyword">reload</span>  重启服务</span><br></pre></td></tr></table></figure></p><p>配置开机自启</p><p><ul>创建nginx服务<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim  /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">systemd</span>/<span class="title">system</span>/<span class="title">nginx</span>.<span class="title">service</span></span></span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=nginx</span><br><span class="line">After=network.target</span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=<span class="regexp">/usr/local</span><span class="regexp">/nginx/sbin</span><span class="regexp">/nginx</span></span><br><span class="line"><span class="regexp">ExecReload=/usr</span><span class="regexp">/local/nginx</span><span class="regexp">/sbin/nginx</span> -s reload</span><br><span class="line">ExecStop=<span class="regexp">/usr/local</span><span class="regexp">/nginx/sbin</span><span class="regexp">/nginx -s quit</span></span><br><span class="line"><span class="regexp">PrivateTmp=true</span></span><br><span class="line"><span class="regexp">[Install]</span></span><br><span class="line"><span class="regexp">WantedBy=multi-user.target</span></span><br></pre></td></tr></table></figure></ul></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start<span class="regexp">/stop/</span>restart nginx  <span class="regexp">//</span>启动<span class="regexp">/关闭/</span>重启服务</span><br><span class="line">systemctl enable<span class="regexp">/disable nginx      /</span><span class="regexp">/开机启动/</span>不启动</span><br></pre></td></tr></table></figure><p></p><h3>Nginx编译安装教程结束<p></p></h3>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -Service_Nginx </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Nginx.conf</title>
      <link href="/2018/09/01/Nginx-conf/"/>
      <url>/2018/09/01/Nginx-conf/</url>
      
        <content type="html"><![CDATA[<p>nginx主配置文件<br><a id="more"></a><br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">user</span>  nginx nginx;</span><br><span class="line"></span><br><span class="line"><span class="attribute">worker_processes</span> auto;</span><br><span class="line"><span class="attribute">worker_cpu_affinity</span> auto;</span><br><span class="line"></span><br><span class="line"><span class="comment">#error_log  logs/nginx_error.log crit;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Specifies the value for maximum file descriptors that can be opened by this process.</span></span><br><span class="line"><span class="attribute">worker_rlimit_nofile</span> <span class="number">51200</span>;</span><br><span class="line"></span><br><span class="line">events</span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">use</span> <span class="literal">epoll</span>;</span><br><span class="line"><span class="attribute">worker_connections</span> <span class="number">51200</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">include</span>       mime.types;</span><br><span class="line"><span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line"><span class="attribute">server_names_hash_bucket_size</span> <span class="number">128</span>;</span><br><span class="line"><span class="attribute">client_header_buffer_size</span> <span class="number">32k</span>;</span><br><span class="line"><span class="attribute">large_client_header_buffers</span> <span class="number">4</span> <span class="number">32k</span>;</span><br><span class="line"><span class="attribute">client_max_body_size</span> <span class="number">100m</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">sendfile</span> <span class="literal">on</span>;</span><br><span class="line"><span class="attribute">tcp_nopush</span>     <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">keepalive_timeout</span> <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">tcp_nodelay</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">fastcgi_connect_timeout</span> <span class="number">300</span>;</span><br><span class="line"><span class="attribute">fastcgi_send_timeout</span> <span class="number">300</span>;</span><br><span class="line"><span class="attribute">fastcgi_read_timeout</span> <span class="number">300</span>;</span><br><span class="line"><span class="attribute">fastcgi_buffer_size</span> <span class="number">64k</span>;</span><br><span class="line"><span class="attribute">fastcgi_buffers</span> <span class="number">4</span> <span class="number">64k</span>;</span><br><span class="line"><span class="attribute">fastcgi_busy_buffers_size</span> <span class="number">128k</span>;</span><br><span class="line"><span class="attribute">fastcgi_temp_file_write_size</span> <span class="number">256k</span>;</span><br><span class="line"><span class="attribute">fastcgi_intercept_errors</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line"><span class="attribute">gzip_min_length</span>  <span class="number">1k</span>;</span><br><span class="line"><span class="attribute">gzip_buffers</span>     <span class="number">4</span> <span class="number">16k</span>;</span><br><span class="line"><span class="attribute">gzip_http_version</span> <span class="number">1</span>.<span class="number">0</span>;</span><br><span class="line"><span class="attribute">gzip_comp_level</span> <span class="number">2</span>;</span><br><span class="line"><span class="attribute">gzip_types</span>       text/plain application/x-javascript text/css application/xml;</span><br><span class="line"><span class="attribute">gzip_vary</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#limit_zone  crawler  $binary_remote_addr  10m;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#log format</span></span><br><span class="line"><span class="attribute">log_format</span>  access  <span class="string">'<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] "<span class="variable">$request</span>" '</span></span><br><span class="line">             <span class="string">'<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> "<span class="variable">$http_referer</span>" '</span></span><br><span class="line">             <span class="string">'"<span class="variable">$http_user_agent</span>" <span class="variable">$http_x_forwarded_for</span>'</span>;</span><br><span class="line"><span class="section">server</span> &#123;  </span><br><span class="line">      <span class="attribute">listen</span> <span class="number">80</span> default;  </span><br><span class="line">      <span class="attribute">return</span> <span class="number">500</span>;  </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attribute">include</span> vhost/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Service_Nginx </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
