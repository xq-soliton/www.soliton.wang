<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
























<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

<link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/ico.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/ico.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/ico.png?v=6.4.1">










<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.4.1',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  





  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "7309f5ba"
    });
  daovoice('update');
  </script>



  <meta name="description" content="主机新增一个2G硬盘，如何在不重启的情况下格式并开机挂载！">
<meta name="keywords" content="Centos7">
<meta property="og:type" content="article">
<meta property="og:title" content="Centos7 Add a hard disk">
<meta property="og:url" content="https://www.soliton.wang/2018/10/09/Centos-add-a-hard-disk/index.html">
<meta property="og:site_name" content="soliton">
<meta property="og:description" content="主机新增一个2G硬盘，如何在不重启的情况下格式并开机挂载！">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-10-17T08:55:08.516Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Centos7 Add a hard disk">
<meta name="twitter:description" content="主机新增一个2G硬盘，如何在不重启的情况下格式并开机挂载！">



  <link rel="alternate" href="/atom.xml" title="soliton" type="application/atom+xml" />




  <link rel="canonical" href="https://www.soliton.wang/2018/10/09/Centos-add-a-hard-disk/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Centos7 Add a hard disk | soliton</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">


<link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">soliton</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">I would like to use my life to spoil your life!</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签<span class="badge">21</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类<span class="badge">14</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档<span class="badge">25</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-sitemap">
    <a href="/sitemap.xml" rel="section">
      <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />站点地图</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.soliton.wang/2018/10/09/Centos-add-a-hard-disk/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="soliton">
      <meta itemprop="description" content="我愿用我一生换你十年天真无邪！">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="soliton">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Centos7 Add a hard disk
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-09 14:08:00" itemprop="dateCreated datePublished" datetime="2018-10-09T14:08:00+08:00">2018-10-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-17 16:55:08" itemprop="dateModified" datetime="2018-10-17T16:55:08+08:00">2018-10-17</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Disk/" itemprop="url" rel="index"><span itemprop="name">Disk</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>主机新增一个2G硬盘，如何在不重启的情况下格式并开机挂载！<br><a id="more"></a></p>
<p></p><h3>系统环境<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OS    :Red Hat Enterprise Linux<span class="built_in"> Server </span>release 7.2 (Maipo)</span><br><span class="line">Kernel:3.10.0-327.el7.x86_64</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3>关闭防火墙和SELINUX<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Selinux：</span></span><br><span class="line"><span class="keyword">setenforce </span><span class="number">0</span>  宽松模式</span><br><span class="line"><span class="symbol">sed</span> -i <span class="string">"s/enforcing/disabled/g"</span>  /etc/sysconfig/<span class="keyword">selinux </span>  永久关闭</span><br><span class="line"><span class="symbol">Firewalld</span>：</span><br><span class="line"><span class="symbol">systemctl</span> stop firewalld</span><br><span class="line"><span class="symbol">systemctl</span> disable firewalld</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3>添加前操作<p></p>
<p><li>查看磁盘信息<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br><span class="line"></span><br><span class="line">磁盘 /dev/sda：<span class="number">85.9</span> GB, <span class="number">85899345920</span> 字节，<span class="number">167772160</span> 个扇区</span><br><span class="line">Units = 扇区 of <span class="number">1</span> * <span class="number">512</span> = <span class="number">512</span> bytes</span><br><span class="line">扇区大小(逻辑/物理)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">I/O 大小(最小/最佳)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：<span class="number">0x000946de</span></span><br><span class="line"></span><br><span class="line">   设备 Boot      		Start       End       Blocks    Id  System</span><br><span class="line">/dev/sda1   *        <span class="number">2048</span>      <span class="number">411647</span>      <span class="number">204800</span>   <span class="number">83</span>  Linux</span><br><span class="line">/dev/sda2          <span class="number">411648</span>    <span class="number">33972223</span>    <span class="number">16780288</span>   <span class="number">8</span>e  Linux LVM</span><br><span class="line">/dev/sda3        <span class="number">33972224</span>   <span class="number">167772159</span>    <span class="number">66899968</span>   <span class="number">83</span>  Linux</span><br><span class="line">………………</span><br></pre></td></tr></table></figure></li></p>
<p></p><h3>添加一块2G硬盘<p></p>
<p></p><h5><code>添加后也是查看不到刚刚添加的硬盘</code><p></p>
<p><li>查看主机总线号并写脚本进行刷新<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ls /sys/class/scsi_host/</span><br><span class="line"></span><br><span class="line">information:</span><br><span class="line">host0  host10  host12  host14  host16  host18  host2   host21  host23  host25  host27  host29  host30  host32  host5  host7  host9</span><br><span class="line">host1  host11  host13  host15  host17  host19  host20  host22  host24  host26  host28  host3   host31  host4   host6  host8</span><br><span class="line"></span><br><span class="line">ls /sys/class/scsi_host/ | wc -l</span><br><span class="line"></span><br><span class="line">information：</span><br><span class="line">注：从0开始循环到32</span><br><span class="line">vim scsi_host.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 0 32`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"- - -"</span> &gt; /sys/class/scsi_host/host<span class="variable">$i</span>/scan</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li></p>
<p></p><h3>再重新来查看磁盘信息<br><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br><span class="line"></span><br><span class="line">information:</span><br><span class="line">	</span><br><span class="line">磁盘 /dev/sda：85.9 GB,<span class="number"> 85899345920 </span>字节，167772160 个扇区</span><br><span class="line">Units = 扇区 of<span class="number"> 1 </span>*<span class="number"> 512 </span>=<span class="number"> 512 </span>bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 /<span class="number"> 512 </span>字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 /<span class="number"> 512 </span>字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：0x000946de</span><br><span class="line"></span><br><span class="line">   设备 Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *       <span class="number"> 2048 </span>    <span class="number"> 411647 </span>    <span class="number"> 204800 </span> <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/sda2         <span class="number"> 411648 </span>  <span class="number"> 33972223 </span>  <span class="number"> 16780288 </span>  8e  Linux LVM</span><br><span class="line">/dev/sda3       <span class="number"> 33972224 </span> <span class="number"> 167772159 </span>  <span class="number"> 66899968 </span> <span class="number"> 83 </span> Linux</span><br><span class="line"></span><br><span class="line">…………</span><br><span class="line">磁盘 /dev/sdb：2147 MB,<span class="number"> 2147483648 </span>字节，4194304 个扇区</span><br><span class="line">Units = 扇区 of<span class="number"> 1 </span>*<span class="number"> 512 </span>=<span class="number"> 512 </span>bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 /<span class="number"> 512 </span>字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 /<span class="number"> 512 </span>字节</span><br><span class="line"></span><br><span class="line">这就是刚刚添加的2G硬盘</span><br><span class="line"></span><br><span class="line">执行dmseg命令也可以查看新添加的硬盘</span><br><span class="line">dmseg | grep sdb</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3>格式化并挂载<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sdb</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">分区号 (1-4，默认 1)：</span><br><span class="line">起始 扇区 (2048-4194303，默认为 2048)：</span><br><span class="line">将使用默认值 2048</span><br><span class="line">Last 扇区, +扇区 <span class="keyword">or</span> +size&#123;K,M,G&#125; (2048-4194303，默认为 4194303)：+2040M</span><br><span class="line">分区 1 已设置为 Linux 类型，大小设为 2 GiB</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl</span><br><span class="line"></span><br><span class="line">_________________________________________________________________________</span><br><span class="line">mkfs.ext4 /dev/sdb</span><br><span class="line">information:</span><br><span class="line">/dev/sdb1: <span class="attribute">UUID</span>=<span class="string">"d3f57d6d-3820-489a-a82e-eb573249b99e"</span> <span class="attribute">TYPE</span>=<span class="string">"ext4"</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir /zabbix</span><br><span class="line">vim /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="attribute">UUID</span>=d3f57d6d-3820-489a-a82e-eb573249b99e  /zabbix  ext4 defaults 0 0		</span><br><span class="line"><span class="attribute">UUID</span>=sdb1分区， /<span class="attribute">zabbix</span>=挂载目录， <span class="attribute">ext4</span>=分区格式  <span class="attribute">defualts</span>=使用文件系统的默认挂载参数    <span class="attribute">0</span>=忽略检查  <span class="attribute">0</span>=不检查</span><br><span class="line"></span><br><span class="line">mount -a 	#挂载</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3>查看挂载<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df -h </span><br><span class="line">/dev/sda3               <span class="number">63</span>G  <span class="number">4.9</span>G   <span class="number">55</span>G    <span class="number">9</span>% /</span><br><span class="line">devtmpfs               <span class="number">1.9</span>G     <span class="number">0</span>  <span class="number">1.9</span>G    <span class="number">0</span>% /dev</span><br><span class="line">tmpfs                  <span class="number">1.9</span>G  <span class="number">140</span>K  <span class="number">1.9</span>G    <span class="number">1</span>% /dev/shm</span><br><span class="line">tmpfs                  <span class="number">1.9</span>G  <span class="number">9.0</span>M  <span class="number">1.9</span>G    <span class="number">1</span>% /run</span><br><span class="line">tmpfs                  <span class="number">1.9</span>G     <span class="number">0</span>  <span class="number">1.9</span>G    <span class="number">0</span>% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/rhel-home   <span class="number">10</span>G   <span class="number">33</span>M   <span class="number">10</span>G    <span class="number">1</span>% /home</span><br><span class="line">/dev/sda1              <span class="number">197</span>M  <span class="number">147</span>M   <span class="number">51</span>M   <span class="number">75</span>% /boot</span><br><span class="line">tmpfs                  <span class="number">378</span>M   <span class="number">36</span>K  <span class="number">378</span>M    <span class="number">1</span>% /run/user/<span class="number">0</span></span><br><span class="line">/dev/sr0               <span class="number">3.8</span>G  <span class="number">3.8</span>G     <span class="number">0</span>  <span class="number">100</span>% /mnt</span><br><span class="line">/dev/sdb1              <span class="number">2.0</span>G  <span class="number">6.0</span>M  <span class="number">1.9</span>G    <span class="number">1</span>% /zabbix</span><br></pre></td></tr></table></figure><p></p>
</h3></h3></h3></h5></h3></h3></h3></h3>
      
    </div>

    

    
    
    

	<div><div>

    <div style="text-align:center;color: #1f1d1d;font-size:24px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>

</div>
</div>
    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>soliton</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://www.soliton.wang/2018/10/09/Centos-add-a-hard-disk/" title="Centos7 Add a hard disk">https://www.soliton.wang/2018/10/09/Centos-add-a-hard-disk/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Centos7/" rel="tag"><i class="fa fa-tag"></i> Centos7</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/10/09/sphinx-coreseek/" rel="next" title="sphinx+coreseek">
                <i class="fa fa-chevron-left"></i> sphinx+coreseek
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/10/16/Centos-install-Shadowsocks/" rel="prev" title="Centos_install_shadowsocks">
                Centos_install_shadowsocks <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zOTE3MS8xNTY5OA=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/logo.jpg"
                alt="soliton" />
            
              <p class="site-author-name" itemprop="name">soliton</p>
              <p class="site-description motion-element" itemprop="description">我愿用我一生换你十年天真无邪！</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">25</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">21</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://xq-soliton.github.io/" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:Linux_Wangxinqiu@163.com" target="_blank" title="E-Mail" rel="external nofollow"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:soliton.wang@gmail.com" target="_blank" title="Google" rel="external nofollow"><i class="fa fa-fw fa-google"></i>Google</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://sighttp.qq.com/msgrd?v=1&uin=1670829014" target="_blank" title="QQ" rel="external nofollow"><i class="fa fa-fw fa-qq"></i>QQ</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">1.</span> <span class="nav-text">系统环境12OS    :Red Hat Enterprise Linux Server release 7.2 (Maipo)Kernel:3.10.0-327.el7.x86_64
关闭防火墙和SELINUX123456Selinux：setenforce 0  宽松模式sed -i &quot;s/enforcing/disabled/g&quot;  /etc/sysconfig/selinux   永久关闭Firewalld：systemctl stop firewalldsystemctl disable firewalld
添加前操作
查看磁盘信息1234567891011121314fdisk -l磁盘 /dev/sda：85.9 GB, 85899345920 字节，167772160 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000946de   设备 Boot      		Start       End       Blocks    Id  System/dev/sda1   *        2048      411647      204800   83  Linux/dev/sda2          411648    33972223    16780288   8e  Linux LVM/dev/sda3        33972224   167772159    66899968   83  Linux………………
添加一块2G硬盘
添加后也是查看不到刚刚添加的硬盘
查看主机总线号并写脚本进行刷新1234567891011121314151617ls /sys/class/scsi_host/information:host0  host10  host12  host14  host16  host18  host2   host21  host23  host25  host27  host29  host30  host32  host5  host7  host9host1  host11  host13  host15  host17  host19  host20  host22  host24  host26  host28  host3   host31  host4   host6  host8ls /sys/class/scsi_host/ | wc -linformation：注：从0开始循环到32vim scsi_host.sh#!/bin/bashfor i in `seq 0 32`doecho &quot;- - -&quot; &gt; /sys/class/scsi_host/host$i/scandone
再重新来查看磁盘信息1234567891011121314151617181920212223242526fdisk -linformation:	磁盘 /dev/sda：85.9 GB, 85899345920 字节，167772160 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000946de   设备 Boot      Start         End      Blocks   Id  System/dev/sda1   *        2048      411647      204800   83  Linux/dev/sda2          411648    33972223    16780288   8e  Linux LVM/dev/sda3        33972224   167772159    66899968   83  Linux…………磁盘 /dev/sdb：2147 MB, 2147483648 字节，4194304 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节这就是刚刚添加的2G硬盘执行dmseg命令也可以查看新添加的硬盘dmseg | grep sdb
格式化并挂载12345678910111213141516171819202122232425262728293031fdisk /dev/sdb命令(输入 m 获取帮助)：nPartition type:   p   primary (0 primary, 0 extended, 4 free)   e   extendedSelect (default p): p分区号 (1-4，默认 1)：起始 扇区 (2048-4194303，默认为 2048)：将使用默认值 2048Last 扇区, +扇区 or +size{K,M,G} (2048-4194303，默认为 4194303)：+2040M分区 1 已设置为 Linux 类型，大小设为 2 GiB命令(输入 m 获取帮助)：wThe partition table has been altered!Calling ioctl_________________________________________________________________________mkfs.ext4 /dev/sdbinformation:/dev/sdb1: UUID=&quot;d3f57d6d-3820-489a-a82e-eb573249b99e&quot; TYPE=&quot;ext4&quot; mkdir /zabbixvim /etc/fstabUUID=d3f57d6d-3820-489a-a82e-eb573249b99e  /zabbix  ext4 defaults 0 0		UUID=sdb1分区， /zabbix=挂载目录， ext4=分区格式  defualts=使用文件系统的默认挂载参数    0=忽略检查  0=不检查mount -a 	#挂载
查看挂载1234567891011df -h /dev/sda3               63G  4.9G   55G    9% /devtmpfs               1.9G     0  1.9G    0% /devtmpfs                  1.9G  140K  1.9G    1% /dev/shmtmpfs                  1.9G  9.0M  1.9G    1% /runtmpfs                  1.9G     0  1.9G    0% /sys/fs/cgroup/dev/mapper/rhel-home   10G   33M   10G    1% /home/dev/sda1              197M  147M   51M   75% /boottmpfs                  378M   36K  378M    1% /run/user/0/dev/sr0               3.8G  3.8G     0  100% /mnt/dev/sdb1              2.0G  6.0M  1.9G    1% /zabbix
</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">2.</span> <span class="nav-text">关闭防火墙和SELINUX123456Selinux：setenforce 0  宽松模式sed -i &quot;s/enforcing/disabled/g&quot;  /etc/sysconfig/selinux   永久关闭Firewalld：systemctl stop firewalldsystemctl disable firewalld
添加前操作
查看磁盘信息1234567891011121314fdisk -l磁盘 /dev/sda：85.9 GB, 85899345920 字节，167772160 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000946de   设备 Boot      		Start       End       Blocks    Id  System/dev/sda1   *        2048      411647      204800   83  Linux/dev/sda2          411648    33972223    16780288   8e  Linux LVM/dev/sda3        33972224   167772159    66899968   83  Linux………………
添加一块2G硬盘
添加后也是查看不到刚刚添加的硬盘
查看主机总线号并写脚本进行刷新1234567891011121314151617ls /sys/class/scsi_host/information:host0  host10  host12  host14  host16  host18  host2   host21  host23  host25  host27  host29  host30  host32  host5  host7  host9host1  host11  host13  host15  host17  host19  host20  host22  host24  host26  host28  host3   host31  host4   host6  host8ls /sys/class/scsi_host/ | wc -linformation：注：从0开始循环到32vim scsi_host.sh#!/bin/bashfor i in `seq 0 32`doecho &quot;- - -&quot; &gt; /sys/class/scsi_host/host$i/scandone
再重新来查看磁盘信息1234567891011121314151617181920212223242526fdisk -linformation:	磁盘 /dev/sda：85.9 GB, 85899345920 字节，167772160 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000946de   设备 Boot      Start         End      Blocks   Id  System/dev/sda1   *        2048      411647      204800   83  Linux/dev/sda2          411648    33972223    16780288   8e  Linux LVM/dev/sda3        33972224   167772159    66899968   83  Linux…………磁盘 /dev/sdb：2147 MB, 2147483648 字节，4194304 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节这就是刚刚添加的2G硬盘执行dmseg命令也可以查看新添加的硬盘dmseg | grep sdb
格式化并挂载12345678910111213141516171819202122232425262728293031fdisk /dev/sdb命令(输入 m 获取帮助)：nPartition type:   p   primary (0 primary, 0 extended, 4 free)   e   extendedSelect (default p): p分区号 (1-4，默认 1)：起始 扇区 (2048-4194303，默认为 2048)：将使用默认值 2048Last 扇区, +扇区 or +size{K,M,G} (2048-4194303，默认为 4194303)：+2040M分区 1 已设置为 Linux 类型，大小设为 2 GiB命令(输入 m 获取帮助)：wThe partition table has been altered!Calling ioctl_________________________________________________________________________mkfs.ext4 /dev/sdbinformation:/dev/sdb1: UUID=&quot;d3f57d6d-3820-489a-a82e-eb573249b99e&quot; TYPE=&quot;ext4&quot; mkdir /zabbixvim /etc/fstabUUID=d3f57d6d-3820-489a-a82e-eb573249b99e  /zabbix  ext4 defaults 0 0		UUID=sdb1分区， /zabbix=挂载目录， ext4=分区格式  defualts=使用文件系统的默认挂载参数    0=忽略检查  0=不检查mount -a 	#挂载
查看挂载1234567891011df -h /dev/sda3               63G  4.9G   55G    9% /devtmpfs               1.9G     0  1.9G    0% /devtmpfs                  1.9G  140K  1.9G    1% /dev/shmtmpfs                  1.9G  9.0M  1.9G    1% /runtmpfs                  1.9G     0  1.9G    0% /sys/fs/cgroup/dev/mapper/rhel-home   10G   33M   10G    1% /home/dev/sda1              197M  147M   51M   75% /boottmpfs                  378M   36K  378M    1% /run/user/0/dev/sr0               3.8G  3.8G     0  100% /mnt/dev/sdb1              2.0G  6.0M  1.9G    1% /zabbix
</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">3.</span> <span class="nav-text">添加前操作
查看磁盘信息1234567891011121314fdisk -l磁盘 /dev/sda：85.9 GB, 85899345920 字节，167772160 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000946de   设备 Boot      		Start       End       Blocks    Id  System/dev/sda1   *        2048      411647      204800   83  Linux/dev/sda2          411648    33972223    16780288   8e  Linux LVM/dev/sda3        33972224   167772159    66899968   83  Linux………………
添加一块2G硬盘
添加后也是查看不到刚刚添加的硬盘
查看主机总线号并写脚本进行刷新1234567891011121314151617ls /sys/class/scsi_host/information:host0  host10  host12  host14  host16  host18  host2   host21  host23  host25  host27  host29  host30  host32  host5  host7  host9host1  host11  host13  host15  host17  host19  host20  host22  host24  host26  host28  host3   host31  host4   host6  host8ls /sys/class/scsi_host/ | wc -linformation：注：从0开始循环到32vim scsi_host.sh#!/bin/bashfor i in `seq 0 32`doecho &quot;- - -&quot; &gt; /sys/class/scsi_host/host$i/scandone
再重新来查看磁盘信息1234567891011121314151617181920212223242526fdisk -linformation:	磁盘 /dev/sda：85.9 GB, 85899345920 字节，167772160 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000946de   设备 Boot      Start         End      Blocks   Id  System/dev/sda1   *        2048      411647      204800   83  Linux/dev/sda2          411648    33972223    16780288   8e  Linux LVM/dev/sda3        33972224   167772159    66899968   83  Linux…………磁盘 /dev/sdb：2147 MB, 2147483648 字节，4194304 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节这就是刚刚添加的2G硬盘执行dmseg命令也可以查看新添加的硬盘dmseg | grep sdb
格式化并挂载12345678910111213141516171819202122232425262728293031fdisk /dev/sdb命令(输入 m 获取帮助)：nPartition type:   p   primary (0 primary, 0 extended, 4 free)   e   extendedSelect (default p): p分区号 (1-4，默认 1)：起始 扇区 (2048-4194303，默认为 2048)：将使用默认值 2048Last 扇区, +扇区 or +size{K,M,G} (2048-4194303，默认为 4194303)：+2040M分区 1 已设置为 Linux 类型，大小设为 2 GiB命令(输入 m 获取帮助)：wThe partition table has been altered!Calling ioctl_________________________________________________________________________mkfs.ext4 /dev/sdbinformation:/dev/sdb1: UUID=&quot;d3f57d6d-3820-489a-a82e-eb573249b99e&quot; TYPE=&quot;ext4&quot; mkdir /zabbixvim /etc/fstabUUID=d3f57d6d-3820-489a-a82e-eb573249b99e  /zabbix  ext4 defaults 0 0		UUID=sdb1分区， /zabbix=挂载目录， ext4=分区格式  defualts=使用文件系统的默认挂载参数    0=忽略检查  0=不检查mount -a 	#挂载
查看挂载1234567891011df -h /dev/sda3               63G  4.9G   55G    9% /devtmpfs               1.9G     0  1.9G    0% /devtmpfs                  1.9G  140K  1.9G    1% /dev/shmtmpfs                  1.9G  9.0M  1.9G    1% /runtmpfs                  1.9G     0  1.9G    0% /sys/fs/cgroup/dev/mapper/rhel-home   10G   33M   10G    1% /home/dev/sda1              197M  147M   51M   75% /boottmpfs                  378M   36K  378M    1% /run/user/0/dev/sr0               3.8G  3.8G     0  100% /mnt/dev/sdb1              2.0G  6.0M  1.9G    1% /zabbix
</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">4.</span> <span class="nav-text">添加一块2G硬盘
添加后也是查看不到刚刚添加的硬盘
查看主机总线号并写脚本进行刷新1234567891011121314151617ls /sys/class/scsi_host/information:host0  host10  host12  host14  host16  host18  host2   host21  host23  host25  host27  host29  host30  host32  host5  host7  host9host1  host11  host13  host15  host17  host19  host20  host22  host24  host26  host28  host3   host31  host4   host6  host8ls /sys/class/scsi_host/ | wc -linformation：注：从0开始循环到32vim scsi_host.sh#!/bin/bashfor i in `seq 0 32`doecho &quot;- - -&quot; &gt; /sys/class/scsi_host/host$i/scandone
再重新来查看磁盘信息1234567891011121314151617181920212223242526fdisk -linformation:	磁盘 /dev/sda：85.9 GB, 85899345920 字节，167772160 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000946de   设备 Boot      Start         End      Blocks   Id  System/dev/sda1   *        2048      411647      204800   83  Linux/dev/sda2          411648    33972223    16780288   8e  Linux LVM/dev/sda3        33972224   167772159    66899968   83  Linux…………磁盘 /dev/sdb：2147 MB, 2147483648 字节，4194304 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节这就是刚刚添加的2G硬盘执行dmseg命令也可以查看新添加的硬盘dmseg | grep sdb
格式化并挂载12345678910111213141516171819202122232425262728293031fdisk /dev/sdb命令(输入 m 获取帮助)：nPartition type:   p   primary (0 primary, 0 extended, 4 free)   e   extendedSelect (default p): p分区号 (1-4，默认 1)：起始 扇区 (2048-4194303，默认为 2048)：将使用默认值 2048Last 扇区, +扇区 or +size{K,M,G} (2048-4194303，默认为 4194303)：+2040M分区 1 已设置为 Linux 类型，大小设为 2 GiB命令(输入 m 获取帮助)：wThe partition table has been altered!Calling ioctl_________________________________________________________________________mkfs.ext4 /dev/sdbinformation:/dev/sdb1: UUID=&quot;d3f57d6d-3820-489a-a82e-eb573249b99e&quot; TYPE=&quot;ext4&quot; mkdir /zabbixvim /etc/fstabUUID=d3f57d6d-3820-489a-a82e-eb573249b99e  /zabbix  ext4 defaults 0 0		UUID=sdb1分区， /zabbix=挂载目录， ext4=分区格式  defualts=使用文件系统的默认挂载参数    0=忽略检查  0=不检查mount -a 	#挂载
查看挂载1234567891011df -h /dev/sda3               63G  4.9G   55G    9% /devtmpfs               1.9G     0  1.9G    0% /devtmpfs                  1.9G  140K  1.9G    1% /dev/shmtmpfs                  1.9G  9.0M  1.9G    1% /runtmpfs                  1.9G     0  1.9G    0% /sys/fs/cgroup/dev/mapper/rhel-home   10G   33M   10G    1% /home/dev/sda1              197M  147M   51M   75% /boottmpfs                  378M   36K  378M    1% /run/user/0/dev/sr0               3.8G  3.8G     0  100% /mnt/dev/sdb1              2.0G  6.0M  1.9G    1% /zabbix
</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#undefined"><span class="nav-number">4.0.1.</span> <span class="nav-text">添加后也是查看不到刚刚添加的硬盘
查看主机总线号并写脚本进行刷新1234567891011121314151617ls /sys/class/scsi_host/information:host0  host10  host12  host14  host16  host18  host2   host21  host23  host25  host27  host29  host30  host32  host5  host7  host9host1  host11  host13  host15  host17  host19  host20  host22  host24  host26  host28  host3   host31  host4   host6  host8ls /sys/class/scsi_host/ | wc -linformation：注：从0开始循环到32vim scsi_host.sh#!/bin/bashfor i in `seq 0 32`doecho &quot;- - -&quot; &gt; /sys/class/scsi_host/host$i/scandone
再重新来查看磁盘信息1234567891011121314151617181920212223242526fdisk -linformation:	磁盘 /dev/sda：85.9 GB, 85899345920 字节，167772160 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000946de   设备 Boot      Start         End      Blocks   Id  System/dev/sda1   *        2048      411647      204800   83  Linux/dev/sda2          411648    33972223    16780288   8e  Linux LVM/dev/sda3        33972224   167772159    66899968   83  Linux…………磁盘 /dev/sdb：2147 MB, 2147483648 字节，4194304 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节这就是刚刚添加的2G硬盘执行dmseg命令也可以查看新添加的硬盘dmseg | grep sdb
格式化并挂载12345678910111213141516171819202122232425262728293031fdisk /dev/sdb命令(输入 m 获取帮助)：nPartition type:   p   primary (0 primary, 0 extended, 4 free)   e   extendedSelect (default p): p分区号 (1-4，默认 1)：起始 扇区 (2048-4194303，默认为 2048)：将使用默认值 2048Last 扇区, +扇区 or +size{K,M,G} (2048-4194303，默认为 4194303)：+2040M分区 1 已设置为 Linux 类型，大小设为 2 GiB命令(输入 m 获取帮助)：wThe partition table has been altered!Calling ioctl_________________________________________________________________________mkfs.ext4 /dev/sdbinformation:/dev/sdb1: UUID=&quot;d3f57d6d-3820-489a-a82e-eb573249b99e&quot; TYPE=&quot;ext4&quot; mkdir /zabbixvim /etc/fstabUUID=d3f57d6d-3820-489a-a82e-eb573249b99e  /zabbix  ext4 defaults 0 0		UUID=sdb1分区， /zabbix=挂载目录， ext4=分区格式  defualts=使用文件系统的默认挂载参数    0=忽略检查  0=不检查mount -a 	#挂载
查看挂载1234567891011df -h /dev/sda3               63G  4.9G   55G    9% /devtmpfs               1.9G     0  1.9G    0% /devtmpfs                  1.9G  140K  1.9G    1% /dev/shmtmpfs                  1.9G  9.0M  1.9G    1% /runtmpfs                  1.9G     0  1.9G    0% /sys/fs/cgroup/dev/mapper/rhel-home   10G   33M   10G    1% /home/dev/sda1              197M  147M   51M   75% /boottmpfs                  378M   36K  378M    1% /run/user/0/dev/sr0               3.8G  3.8G     0  100% /mnt/dev/sdb1              2.0G  6.0M  1.9G    1% /zabbix
</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">5.</span> <span class="nav-text">再重新来查看磁盘信息1234567891011121314151617181920212223242526fdisk -linformation:	磁盘 /dev/sda：85.9 GB, 85899345920 字节，167772160 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节磁盘标签类型：dos磁盘标识符：0x000946de   设备 Boot      Start         End      Blocks   Id  System/dev/sda1   *        2048      411647      204800   83  Linux/dev/sda2          411648    33972223    16780288   8e  Linux LVM/dev/sda3        33972224   167772159    66899968   83  Linux…………磁盘 /dev/sdb：2147 MB, 2147483648 字节，4194304 个扇区Units = 扇区 of 1 * 512 = 512 bytes扇区大小(逻辑/物理)：512 字节 / 512 字节I/O 大小(最小/最佳)：512 字节 / 512 字节这就是刚刚添加的2G硬盘执行dmseg命令也可以查看新添加的硬盘dmseg | grep sdb
格式化并挂载12345678910111213141516171819202122232425262728293031fdisk /dev/sdb命令(输入 m 获取帮助)：nPartition type:   p   primary (0 primary, 0 extended, 4 free)   e   extendedSelect (default p): p分区号 (1-4，默认 1)：起始 扇区 (2048-4194303，默认为 2048)：将使用默认值 2048Last 扇区, +扇区 or +size{K,M,G} (2048-4194303，默认为 4194303)：+2040M分区 1 已设置为 Linux 类型，大小设为 2 GiB命令(输入 m 获取帮助)：wThe partition table has been altered!Calling ioctl_________________________________________________________________________mkfs.ext4 /dev/sdbinformation:/dev/sdb1: UUID=&quot;d3f57d6d-3820-489a-a82e-eb573249b99e&quot; TYPE=&quot;ext4&quot; mkdir /zabbixvim /etc/fstabUUID=d3f57d6d-3820-489a-a82e-eb573249b99e  /zabbix  ext4 defaults 0 0		UUID=sdb1分区， /zabbix=挂载目录， ext4=分区格式  defualts=使用文件系统的默认挂载参数    0=忽略检查  0=不检查mount -a 	#挂载
查看挂载1234567891011df -h /dev/sda3               63G  4.9G   55G    9% /devtmpfs               1.9G     0  1.9G    0% /devtmpfs                  1.9G  140K  1.9G    1% /dev/shmtmpfs                  1.9G  9.0M  1.9G    1% /runtmpfs                  1.9G     0  1.9G    0% /sys/fs/cgroup/dev/mapper/rhel-home   10G   33M   10G    1% /home/dev/sda1              197M  147M   51M   75% /boottmpfs                  378M   36K  378M    1% /run/user/0/dev/sr0               3.8G  3.8G     0  100% /mnt/dev/sdb1              2.0G  6.0M  1.9G    1% /zabbix
</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">6.</span> <span class="nav-text">格式化并挂载12345678910111213141516171819202122232425262728293031fdisk /dev/sdb命令(输入 m 获取帮助)：nPartition type:   p   primary (0 primary, 0 extended, 4 free)   e   extendedSelect (default p): p分区号 (1-4，默认 1)：起始 扇区 (2048-4194303，默认为 2048)：将使用默认值 2048Last 扇区, +扇区 or +size{K,M,G} (2048-4194303，默认为 4194303)：+2040M分区 1 已设置为 Linux 类型，大小设为 2 GiB命令(输入 m 获取帮助)：wThe partition table has been altered!Calling ioctl_________________________________________________________________________mkfs.ext4 /dev/sdbinformation:/dev/sdb1: UUID=&quot;d3f57d6d-3820-489a-a82e-eb573249b99e&quot; TYPE=&quot;ext4&quot; mkdir /zabbixvim /etc/fstabUUID=d3f57d6d-3820-489a-a82e-eb573249b99e  /zabbix  ext4 defaults 0 0		UUID=sdb1分区， /zabbix=挂载目录， ext4=分区格式  defualts=使用文件系统的默认挂载参数    0=忽略检查  0=不检查mount -a 	#挂载
查看挂载1234567891011df -h /dev/sda3               63G  4.9G   55G    9% /devtmpfs               1.9G     0  1.9G    0% /devtmpfs                  1.9G  140K  1.9G    1% /dev/shmtmpfs                  1.9G  9.0M  1.9G    1% /runtmpfs                  1.9G     0  1.9G    0% /sys/fs/cgroup/dev/mapper/rhel-home   10G   33M   10G    1% /home/dev/sda1              197M  147M   51M   75% /boottmpfs                  378M   36K  378M    1% /run/user/0/dev/sr0               3.8G  3.8G     0  100% /mnt/dev/sdb1              2.0G  6.0M  1.9G    1% /zabbix
</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">7.</span> <span class="nav-text">查看挂载1234567891011df -h /dev/sda3               63G  4.9G   55G    9% /devtmpfs               1.9G     0  1.9G    0% /devtmpfs                  1.9G  140K  1.9G    1% /dev/shmtmpfs                  1.9G  9.0M  1.9G    1% /runtmpfs                  1.9G     0  1.9G    0% /sys/fs/cgroup/dev/mapper/rhel-home   10G   33M   10G    1% /home/dev/sda1              197M  147M   51M   75% /boottmpfs                  378M   36K  378M    1% /run/user/0/dev/sr0               3.8G  3.8G     0  100% /mnt/dev/sdb1              2.0G  6.0M  1.9G    1% /zabbix
</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">soliton</span>

  

  
</div>


  



  <div class="powered-by">念旧</div>



  <span class="post-meta-divider">|</span>



<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共17.3k字</span>
</div>

<div>
<!-- 在网页底部添加网站运行时间 -->
<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("09/21/2018 00:00:00");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "站点运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分钟 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>

</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
	
    
      <div>
        
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "1",
        "bdMiniList": false,
        "bdPic": ""
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "分享到：",
        "viewSize": "16"
      },
      "slide": {
        "bdImg": "5",
        "bdPos": "left",
        "bdTop": "100"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src ='/ static / api / js / share.js？v = 89860593.js？cdnversion ='+〜（ -  new Date（）/ 36e5）];

</script>

      </div>
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  













  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script>



  



  
    <script type="text/javascript">
      window.livereOptions = {
        refer: '2018/10/09/Centos-add-a-hard-disk/'
      };
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>



  

  
  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


<!-- 页面点击小红心 --> 
<script type="text/javascript" src="/js/src/love.js"></script>

<script type="text/javascript" color="0,0,255" opacity='1.2' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>



</body>
</html>
